!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequiref017;t.register("cV7jL",function(n,r){let i;e(n.exports,"diagram",function(){return V});var a,o,s,l=t("2O8Km"),u=t("6N8n7"),c=function(){var e=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},t=[1,4],n=[1,13],r=[1,12],i=[1,15],a=[1,16],o=[1,20],s=[1,19],l=[6,7,8],u=[1,26],c=[1,24],h=[1,25],p=[6,7,11],f=[1,6,13,15,16,19,22],g=[1,33],v=[1,34],y=[1,6,7,11,13,15,16,19,22],b={trace:function(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function(e,t,n,r,i,a,o){var s=a.length-1;switch(i){case 6:case 7:return r;case 8:r.getLogger().trace("Stop NL ");break;case 9:r.getLogger().trace("Stop EOF ");break;case 11:r.getLogger().trace("Stop NL2 ");break;case 12:r.getLogger().trace("Stop EOF2 ");break;case 15:r.getLogger().info("Node: ",a[s].id),r.addNode(a[s-1].length,a[s].id,a[s].descr,a[s].type);break;case 16:r.getLogger().trace("Icon: ",a[s]),r.decorateNode({icon:a[s]});break;case 17:case 21:r.decorateNode({class:a[s]});break;case 18:r.getLogger().trace("SPACELIST");break;case 19:r.getLogger().trace("Node: ",a[s].id),r.addNode(0,a[s].id,a[s].descr,a[s].type);break;case 20:r.decorateNode({icon:a[s]});break;case 25:r.getLogger().trace("node found ..",a[s-2]),this.$={id:a[s-1],descr:a[s-1],type:r.getType(a[s-2],a[s])};break;case 26:this.$={id:a[s],descr:a[s],type:r.nodeType.DEFAULT};break;case 27:r.getLogger().trace("node found ..",a[s-3]),this.$={id:a[s-3],descr:a[s-1],type:r.getType(a[s-2],a[s])}}},table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:n,7:[1,10],9:9,12:11,13:r,14:14,15:i,16:a,17:17,18:18,19:o,22:s},e(l,[2,3]),{1:[2,2]},e(l,[2,4]),e(l,[2,5]),{1:[2,6],6:n,12:21,13:r,14:14,15:i,16:a,17:17,18:18,19:o,22:s},{6:n,9:22,12:11,13:r,14:14,15:i,16:a,17:17,18:18,19:o,22:s},{6:u,7:c,10:23,11:h},e(p,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:o,22:s}),e(p,[2,18]),e(p,[2,19]),e(p,[2,20]),e(p,[2,21]),e(p,[2,23]),e(p,[2,24]),e(p,[2,26],{19:[1,30]}),{20:[1,31]},{6:u,7:c,10:32,11:h},{1:[2,7],6:n,12:21,13:r,14:14,15:i,16:a,17:17,18:18,19:o,22:s},e(f,[2,14],{7:g,11:v}),e(y,[2,8]),e(y,[2,9]),e(y,[2,10]),e(p,[2,15]),e(p,[2,16]),e(p,[2,17]),{20:[1,35]},{21:[1,36]},e(f,[2,13],{7:g,11:v}),e(y,[2,11]),e(y,[2,12]),{21:[1,37]},e(p,[2,25]),e(p,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=Error(e);throw n.hash=t,n}},parse:function(e){var t=this,n=[0],r=[],i=[null],a=[],o=this.table,s="",l=0,u=0,c=a.slice.call(arguments,1),h=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);h.setInput(e,p.yy),p.yy.lexer=h,p.yy.parser=this,typeof h.yylloc>"u"&&(h.yylloc={});var g=h.yylloc;a.push(g);var v=h.options&&h.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,b,x,w,E,T,_,k,D={};;){if(b=n[n.length-1],this.defaultActions[b]?x=this.defaultActions[b]:((null===y||typeof y>"u")&&(y=function(){var e;return"number"!=typeof(e=r.pop()||h.lex()||1)&&(e instanceof Array&&(e=(r=e).pop()),e=t.symbols_[e]||e),e}()),x=o[b]&&o[b][y]),typeof x>"u"||!x.length||!x[0]){var C="";for(E in k=[],o[b])this.terminals_[E]&&E>2&&k.push("'"+this.terminals_[E]+"'");C=h.showPosition?"Parse error on line "+(l+1)+`:
`+h.showPosition()+`
Expecting `+k.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:h.match,token:this.terminals_[y]||y,line:h.yylineno,loc:g,expected:k})}if(x[0]instanceof Array&&x.length>1)throw Error("Parse Error: multiple actions possible at state: "+b+", token: "+y);switch(x[0]){case 1:n.push(y),i.push(h.yytext),a.push(h.yylloc),n.push(x[1]),y=null,u=h.yyleng,s=h.yytext,l=h.yylineno,g=h.yylloc;break;case 2:if(T=this.productions_[x[1]][1],D.$=i[i.length-T],D._$={first_line:a[a.length-(T||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(T||1)].first_column,last_column:a[a.length-1].last_column},v&&(D._$.range=[a[a.length-(T||1)].range[0],a[a.length-1].range[1]]),"u">typeof(w=this.performAction.apply(D,[s,u,l,p.yy,x[1],i,a].concat(c))))return w;T&&(n=n.slice(0,-1*T*2),i=i.slice(0,-1*T),a=a.slice(0,-1*T)),n.push(this.productions_[x[1]][0]),i.push(D.$),a.push(D._$),_=o[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}};function x(){this.yy={}}return b.lexer={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack)for(var a in i)this[a]=i[a];return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,r,i=this._currentRules(),a=0;a<i.length;a++)if((n=this._input.match(this.rules[i[a]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=a,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[a])))return e;if(!this._backtrack)return!1;t=!1;continue}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(e,t,n,r){switch(n){case 0:return e.getLogger().trace("Found comment",t.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:case 23:case 26:this.popState();break;case 5:e.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return e.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:e.getLogger().trace("end icon"),this.popState();break;case 10:return e.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return e.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return e.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return e.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:case 15:case 16:case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 24:e.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return e.getLogger().trace("description:",t.yytext),"NODE_DESCR";case 27:return this.popState(),e.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),e.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),e.getLogger().trace("node end ...",t.yytext),"NODE_DEND";case 30:case 33:case 34:return this.popState(),e.getLogger().trace("node end (("),"NODE_DEND";case 31:case 32:return this.popState(),e.getLogger().trace("node end (-"),"NODE_DEND";case 35:case 36:return e.getLogger().trace("Long description:",t.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}},x.prototype=b,b.Parser=x,new x}();c.parser=c;let h=e=>(0,l.d)(e,(0,l.c)()),p=[],f=0,g={},v=function(e){for(let t=p.length-1;t>=0;t--)if(p[t].level<e)return p[t];return null},y={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},b=(e,t)=>{g[e]=t},x=e=>{switch(e){case y.DEFAULT:return"no-border";case y.RECT:return"rect";case y.ROUNDED_RECT:return"rounded-rect";case y.CIRCLE:return"circle";case y.CLOUD:return"cloud";case y.BANG:return"bang";case y.HEXAGON:return"hexgon";default:return"no-border"}},w=e=>g[e],E=Object.freeze(Object.defineProperty({__proto__:null,addNode:(e,t,n,r)=>{(0,l.l).info("addNode",e,t,n,r);let i=(0,l.c)(),a={id:f++,nodeId:h(t),level:e,descr:h(n),type:r,children:[],width:(0,l.c)().mindmap.maxNodeWidth};switch(a.type){case y.ROUNDED_RECT:case y.RECT:case y.HEXAGON:a.padding=2*i.mindmap.padding;break;default:a.padding=i.mindmap.padding}let o=v(e);if(o)o.children.push(a),p.push(a);else if(0===p.length)p.push(a);else{let e=Error('There can be only one root. No parent could be found for ("'+a.descr+'")');throw e.hash={text:"branch "+name,token:"branch "+name,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+name+'"']},e}},clear:()=>{p=[],f=0,g={}},decorateNode:e=>{let t=p[p.length-1];e&&e.icon&&(t.icon=h(e.icon)),e&&e.class&&(t.class=h(e.class))},getElementById:w,getLogger:()=>l.l,getMindmap:()=>p.length>0?p[0]:null,getNodeById:e=>p[e],getType:(e,t)=>{switch((0,l.l).debug("In get type",e,t),e){case"[":return y.RECT;case"(":return")"===t?y.ROUNDED_RECT:y.CLOUD;case"((":return y.CIRCLE;case")":return y.CLOUD;case"))":return y.BANG;case"{{":return y.HEXAGON;default:return y.DEFAULT}},nodeType:y,get parseError(){return i},sanitizeText:h,setElementForId:b,setErrorHandler:e=>{i=e},type2Str:x},Symbol.toStringTag,{value:"Module"})),T=function(e,t,n){e.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+x(t.type)).attr("d",`M0 ${t.height-5} v${-t.height+10} q0,-5 5,-5 h${t.width-10} q5,0 5,5 v${t.height-5} H0 Z`),e.append("line").attr("class","node-line-"+n).attr("x1",0).attr("y1",t.height).attr("x2",t.width).attr("y2",t.height)},_=function(e,t){e.append("rect").attr("id","node-"+t.id).attr("class","node-bkg node-"+x(t.type)).attr("height",t.height).attr("width",t.width)},k=function(e,t){let n=t.width,r=t.height,i=.15*n,a=.25*n,o=.35*n,s=.2*n;e.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+x(t.type)).attr("d",`M0 0 a${i},${i} 0 0,1 ${.25*n},${-1*n*.1}
      a${o},${o} 1 0,1 ${.4*n},${-1*n*.1}
      a${a},${a} 1 0,1 ${.35*n},${1*n*.2}

      a${i},${i} 1 0,1 ${.15*n},${1*r*.35}
      a${s},${s} 1 0,1 ${-1*n*.15},${1*r*.65}

      a${a},${i} 1 0,1 ${-1*n*.25},${.15*n}
      a${o},${o} 1 0,1 ${-1*n*.5},0
      a${i},${i} 1 0,1 ${-1*n*.25},${-1*n*.15}

      a${i},${i} 1 0,1 ${-1*n*.1},${-1*r*.35}
      a${s},${s} 1 0,1 ${.1*n},${-1*r*.65}

    H0 V0 Z`)},D=function(e,t){let n=t.width,r=t.height,i=.15*n;e.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+x(t.type)).attr("d",`M0 0 a${i},${i} 1 0,0 ${.25*n},${-1*r*.1}
      a${i},${i} 1 0,0 ${.25*n},0
      a${i},${i} 1 0,0 ${.25*n},0
      a${i},${i} 1 0,0 ${.25*n},${1*r*.1}

      a${i},${i} 1 0,0 ${.15*n},${1*r*.33}
      a${.8*i},${.8*i} 1 0,0 0,${1*r*.34}
      a${i},${i} 1 0,0 ${-1*n*.15},${1*r*.33}

      a${i},${i} 1 0,0 ${-1*n*.25},${.15*r}
      a${i},${i} 1 0,0 ${-1*n*.25},0
      a${i},${i} 1 0,0 ${-1*n*.25},0
      a${i},${i} 1 0,0 ${-1*n*.25},${-1*r*.15}

      a${i},${i} 1 0,0 ${-1*n*.1},${-1*r*.33}
      a${.8*i},${.8*i} 1 0,0 0,${-1*r*.34}
      a${i},${i} 1 0,0 ${.1*n},${-1*r*.33}

    H0 V0 Z`)},C=function(e,t){e.append("circle").attr("id","node-"+t.id).attr("class","node-bkg node-"+x(t.type)).attr("r",t.width/2)},A=function(e,t){let n=t.height,r=n/4,i=t.width-t.padding+2*r,a=[{x:r,y:0},{x:i-r,y:0},{x:i,y:-n/2},{x:i-r,y:-n},{x:r,y:-n},{x:0,y:-n/2}];e.insert("polygon",":first-child").attr("points",a.map(function(e){return e.x+","+e.y}).join(" ")).attr("transform","translate("+(t.width-i)/2+", "+n+")")},S=function(e,t){e.append("rect").attr("id","node-"+t.id).attr("class","node-bkg node-"+x(t.type)).attr("height",t.height).attr("rx",t.padding).attr("ry",t.padding).attr("width",t.width)},N={drawNode:function(e,t,n,r){let i=r.htmlLabels,a=n%11,o=e.append("g");t.section=a;let s="section-"+a;a<0&&(s+=" section-root"),o.attr("class",(t.class?t.class+" ":"")+"mindmap-node "+s);let l=o.append("g"),c=o.append("g"),h=t.descr.replace(/(<br\/*>)/g,`
`);(0,u.c)(c,h,{useHtmlLabels:i,width:t.width,classes:"mindmap-node-label"}),i||c.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");let p=c.node().getBBox(),f=r.fontSize.replace?r.fontSize.replace("px",""):r.fontSize;if(t.height=p.height+.55*f+t.padding,t.width=p.width+2*t.padding,t.icon){if(t.type===y.CIRCLE)t.height+=50,t.width+=50,o.append("foreignObject").attr("height","50px").attr("width",t.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+t.icon),c.attr("transform","translate("+t.width/2+", "+(t.height/2-1.5*t.padding)+")");else{t.width+=50;let e=t.height;t.height=Math.max(e,60);let n=Math.abs(t.height-e);o.append("foreignObject").attr("width","60px").attr("height",t.height).attr("style","text-align: center;margin-top:"+n/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+t.icon),c.attr("transform","translate("+(25+t.width/2)+", "+(n/2+t.padding/2)+")")}}else if(i){let e=(t.width-p.width)/2,n=(t.height-p.height)/2;c.attr("transform","translate("+e+", "+n+")")}else{let e=t.width/2,n=t.padding/2;c.attr("transform","translate("+e+", "+n+")")}switch(t.type){case y.DEFAULT:T(l,t,a);break;case y.ROUNDED_RECT:S(l,t);break;case y.RECT:_(l,t);break;case y.CIRCLE:l.attr("transform","translate("+t.width/2+", "+ +t.height/2+")"),C(l,t);break;case y.CLOUD:k(l,t);break;case y.BANG:D(l,t);break;case y.HEXAGON:A(l,t)}return b(t.id,o),t.height},positionNode:function(e){let t=w(e.id),n=e.x||0,r=e.y||0;t.attr("transform","translate("+n+","+r+")")},drawEdge:function(e,t,n,r,i){let a=n.x+n.width/2,o=n.y+n.height/2,s=t.x+t.width/2,l=t.y+t.height/2,u=s>a?a+Math.abs(a-s)/2:a-Math.abs(a-s)/2,c=l>o?o+Math.abs(o-l)/2:o-Math.abs(o-l)/2,h=s>a?Math.abs(a-u)/2+a:-Math.abs(a-u)/2+a,p=l>o?Math.abs(o-c)/2+o:-Math.abs(o-c)/2+o;e.append("path").attr("d","TB"===n.direction||"BT"===n.direction?`M${a},${o} Q${a},${p} ${u},${c} T${s},${l}`:`M${a},${o} Q${h},${o} ${u},${c} T${s},${l}`).attr("class","edge section-edge-"+i%11+" edge-depth-"+r)}};var L={exports:{}};l.T,L.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!(t&&a.length===t));o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}(e,t)||function(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=typeof window>"u"?null:window,u=s?s.navigator:null;s&&s.document;var c=e(""),h=e({}),p=e(function(){}),f=typeof HTMLElement>"u"?"undefined":e(HTMLElement),g=function(e){return e&&e.instanceString&&y(e.instanceString)?e.instanceString():null},v=function(t){return null!=t&&e(t)==c},y=function(t){return null!=t&&e(t)===p},b=function(e){return!T(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)},x=function(t){return null!=t&&e(t)===h&&!b(t)&&t.constructor===Object},w=function(t){return null!=t&&e(t)===e(1)&&!isNaN(t)},E=function(e){if("undefined"!==f)return null!=e&&e instanceof HTMLElement},T=function(e){return _(e)||k(e)},_=function(e){return"collection"===g(e)&&e._private.single},k=function(e){return"collection"===g(e)&&!e._private.single},D=function(e){return"core"===g(e)},C=function(e){return"stylesheet"===g(e)},A=function(e){return null==e||!!(""===e||e.match(/^\s+$/))},S=function(t){return null!=t&&e(t)===h&&y(t.then)},N=function(e,t){t||(t=function(){if(1==arguments.length)return arguments[0];if(0==arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var n=function n(){var r,i=arguments,a=t.apply(this,i),o=n.cache;return(r=o[a])||(r=o[a]=e.apply(this,i)),r};return n.cache={},n},L=N(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),I=N(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),O=N(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),M=function(e){return A(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},P="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",R="rgb[a]?\\(("+P+"[%]?)\\s*,\\s*("+P+"[%]?)\\s*,\\s*("+P+"[%]?)(?:\\s*,\\s*("+P+"))?\\)",F="rgb[a]?\\((?:"+P+"[%]?)\\s*,\\s*(?:"+P+"[%]?)\\s*,\\s*(?:"+P+"[%]?)(?:\\s*,\\s*(?:"+P+"))?\\)",B="hsl[a]?\\(("+P+")\\s*,\\s*("+P+"[%])\\s*,\\s*("+P+"[%])(?:\\s*,\\s*("+P+"))?\\)",z="hsl[a]?\\((?:"+P+")\\s*,\\s*(?:"+P+"[%])\\s*,\\s*(?:"+P+"[%])(?:\\s*,\\s*(?:"+P+"))?\\)",G=function(e,t){return e<t?-1:e>t?1:0},Y=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(null!=r)for(var i=Object.keys(r),a=0;a<i.length;a++){var o=i[a];e[o]=r[o]}}return e},V=function(e){if(!(!(4===e.length||7===e.length)||"#"!==e[0])){var t,n,r;return 4===e.length?(t=parseInt(e[1]+e[1],16),n=parseInt(e[2]+e[2],16),r=parseInt(e[3]+e[3],16)):(t=parseInt(e[1]+e[2],16),n=parseInt(e[3]+e[4],16),r=parseInt(e[5]+e[6],16)),[t,n,r]}},X=function(e){function t(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var n,r,i,a,o,s,l,u,c=RegExp("^"+B+"$").exec(e);if(c){if((r=parseInt(c[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(i=parseFloat(c[2]))<0||i>100||(i/=100,(a=parseFloat(c[3]))<0||a>100)||(a/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1)))return;if(0===i)s=l=u=Math.round(255*a);else{var h=a<.5?a*(1+i):a+i-a*i,p=2*a-h;s=Math.round(255*t(p,h,r+1/3)),l=Math.round(255*t(p,h,r)),u=Math.round(255*t(p,h,r-1/3))}n=[s,l,u,o]}return n},j=function(e){var t,n=RegExp("^"+R+"$").exec(e);if(n){t=[];for(var r=[],i=1;i<=3;i++){var a=n[i];if("%"===a[a.length-1]&&(r[i]=!0),a=parseFloat(a),r[i]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var o=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(o&&!s)return;var l=n[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t},U={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},H=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(x(a))throw Error("Tried to set map with object key");i<n.length-1?(null==t[a]&&(t[a]={}),t=t[a]):t[a]=e.value}},q=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(x(a))throw Error("Tried to get map with object key");if(null==(t=t[a]))break}return t},W=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},$="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof l.T?l.T:"u">typeof self?self:{},K="object"==typeof $&&$&&$.Object===Object&&$,Z="object"==typeof self&&self&&self.Object===Object&&self,Q=K||Z||Function("return this")(),J=function(){return Q.Date.now()},ee=/\s/,et=function(e){for(var t=e.length;t--&&ee.test(e.charAt(t)););return t},en=/^\s+/,er=Q.Symbol,ei=Object.prototype,ea=ei.hasOwnProperty,eo=ei.toString,es=er?er.toStringTag:void 0,el=function(e){var t=ea.call(e,es),n=e[es];try{e[es]=void 0;var r=!0}catch(e){}var i=eo.call(e);return r&&(t?e[es]=n:delete e[es]),i},eu=Object.prototype.toString,ec=er?er.toStringTag:void 0,eh=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ec&&ec in Object(e)?el(e):eu.call(e)},ed=function(e){return"symbol"==typeof e||null!=e&&"object"==typeof e&&"[object Symbol]"==eh(e)},ep=0/0,ef=/^[-+]0x[0-9a-f]+$/i,eg=/^0b[01]+$/i,ev=/^0o[0-7]+$/i,ey=parseInt,em=function(e){if("number"==typeof e)return e;if(ed(e))return ep;if(W(e)){var t,n="function"==typeof e.valueOf?e.valueOf():e;e=W(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=(t=e)&&t.slice(0,et(t)+1).replace(en,"");var r=eg.test(e);return r||ev.test(e)?ey(e.slice(2),r?2:8):ef.test(e)?ep:+e},eb=Math.max,ex=Math.min,ew=function(e,t,n){var r,i,a,o,s,l,u=0,c=!1,h=!1,p=!0;if("function"!=typeof e)throw TypeError("Expected a function");function f(t){var n=r,a=i;return r=i=void 0,u=t,o=e.apply(a,n)}function g(e){var n=e-l,r=e-u;return void 0===l||n>=t||n<0||h&&r>=a}function v(){var e,n,r,i=J();if(g(i))return y(i);s=setTimeout(v,(e=i-l,n=i-u,r=t-e,h?ex(r,a-n):r))}function y(e){return s=void 0,p&&r?f(e):(r=i=void 0,o)}function b(){var e,n=J(),a=g(n);if(r=arguments,i=this,l=n,a){if(void 0===s)return u=e=l,s=setTimeout(v,t),c?f(e):o;if(h)return clearTimeout(s),s=setTimeout(v,t),f(l)}return void 0===s&&(s=setTimeout(v,t)),o}return t=em(t)||0,W(n)&&(c=!!n.leading,a=(h="maxWait"in n)?eb(em(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),b.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},b.flush=function(){return void 0===s?o:y(J())},b},eE=s?s.performance:null,eT=eE&&eE.now?function(){return eE.now()}:function(){return Date.now()},e_=function(){if(s){if(s.requestAnimationFrame)return function(e){s.requestAnimationFrame(e)};if(s.mozRequestAnimationFrame)return function(e){s.mozRequestAnimationFrame(e)};if(s.webkitRequestAnimationFrame)return function(e){s.webkitRequestAnimationFrame(e)};if(s.msRequestAnimationFrame)return function(e){s.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(eT())},1e3/60)}}(),ek=function(e){return e_(e)},eD=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261,r=n;!(t=e.next()).done;)r=65599*r+t.value|0;return r},eC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;return 65599*t+e|0},eA=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(t<<5)+t+e|0},eS=function(e){return 2097152*e[0]+e[1]},eN=function(e,t){return[eC(e[0],t[0]),eA(e[1],t[1])]},eL=function(e,t){var n={value:0,done:!1},r=0,i=e.length;return eD({next:function(){return r<i?n.value=e[r++]:n.done=!0,n}},t)},eI=function(e,t){var n={value:0,done:!1},r=0,i=e.length;return eD({next:function(){return r<i?n.value=e.charCodeAt(r++):n.done=!0,n}},t)},eO=function(){return eM(arguments)},eM=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];t=0===n?eI(r):eI(r,t)}return t},eP=!0,eR=null!=console.warn,eF=null!=console.trace,eB=Number.MAX_SAFE_INTEGER||9007199254740991,ez=function(){return!0},eG=function(){return!1},eY=function(){return 0},eV=function(){},eX=function(e){throw Error(e)},ej=function(e){if(void 0===e)return eP;eP=!!e},eU=function(e){ej()&&(eR?console.warn(e):(console.log(e),eF&&console.trace()))},eH=function(e){return null==e?e:b(e)?e.slice():x(e)?Y({},e):e},eq=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},eW={},e$=function(){return eW},eK=function(e){var t=Object.keys(e);return function(n){for(var r={},i=0;i<t.length;i++){var a=t[i],o=null==n?void 0:n[a];r[a]=void 0===o?e[a]:o}return r}},eZ=function(e,t,n){for(var r=e.length-1;r>=0&&!(e[r]===t&&(e.splice(r,1),n));r--);},eQ=function(e){e.splice(0,e.length)},eJ=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}},e0=function(e,t,n){return n&&(t=O(n,t)),e[t]},e1=function(e,t,n,r){n&&(t=O(n,t)),e[t]=r},e2=function(){function e(){t(this,e),this._obj={}}return r(e,[{key:"set",value:function(e,t){return this._obj[e]=t,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}]),e}(),e5="u">typeof Map?Map:e2,e3=function(){function e(n){if(t(this,e),this._obj=Object.create(null),this.size=0,null!=n){var r;r=null!=n.instanceString&&n.instanceString()===this.instanceString()?n.toArray():n;for(var i=0;i<r.length;i++)this.add(r[i])}}return r(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter(function(t){return e.has(t)})}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}}]),e}(),e4=(typeof Set>"u"?"undefined":e(Set))!=="undefined"?Set:e3,e9=function(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(void 0===e||void 0===t||!D(e)){eX("An element must have a core reference and parameters set");return}var r=t.group;if(null==r&&(r=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"!==r&&"edges"!==r){eX("An element must be of type `nodes` or `edges`; you specified `"+r+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===r:!!t.pannable,active:!1,classes:new e4,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),t.renderedPosition){var a=t.renderedPosition,o=e.pan(),s=e.zoom();i.position={x:(a.x-o.x)/s,y:(a.y-o.y)/s}}var l=[];b(t.classes)?l=t.classes:v(t.classes)&&(l=t.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var h=l[u];h&&""!==h&&i.classes.add(h)}this.createEmitter();var p=t.style||t.css;p&&(eU("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(p)),(void 0===n||n)&&this.restore()},e6=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,r){x(t)&&!T(t)&&(t=(i=t).roots||i.root,n=i.visit,r=i.directed),r=2!=arguments.length||y(n)?r:n,n=y(n)?n:function(){};for(var i,a,o=this._private.cy,s=t=v(t)?this.filter(t):t,l=[],u=[],c={},h={},p={},f=0,g=this.byGroup(),b=g.nodes,w=g.edges,E=0;E<s.length;E++){var _=s[E],k=_.id();_.isNode()&&(l.unshift(_),e.bfs&&(p[k]=!0,u.push(_)),h[k]=0)}for(;0!==l.length;){var D=function(){var t=e.bfs?l.shift():l.pop(),i=t.id();if(e.dfs){if(p[i])return"continue";p[i]=!0,u.push(t)}var o=h[i],s=c[i],g=null!=s?s.source():null,v=null!=s?s.target():null,y=null==s?void 0:t.same(g)?v[0]:g[0],x=void 0;if(!0===(x=n(t,s,y,f++,o)))return a=t,"break";if(!1===x)return"break";for(var E=t.connectedEdges().filter(function(e){return(!r||e.source().same(t))&&w.has(e)}),T=0;T<E.length;T++){var _=E[T],k=_.connectedNodes().filter(function(e){return!e.same(t)&&b.has(e)}),D=k.id();0===k.length||p[D]||(k=k[0],l.push(k),e.bfs&&(p[D]=!0,u.push(k)),c[D]=_,h[D]=h[i]+1)}}();if("continue"!==D&&"break"===D)break}for(var C=o.collection(),A=0;A<u.length;A++){var S=u[A],N=c[S.id()];null!=N&&C.push(N),C.push(S)}return{path:o.collection(C),found:o.collection(a)}}},e8={breadthFirstSearch:e6({bfs:!0}),depthFirstSearch:e6({dfs:!0})};e8.bfs=e8.breadthFirstSearch,e8.dfs=e8.depthFirstSearch;var e7=(function(e,t){(function(){var t,n,r,i,a,o,s,l,u,c,h,p,f,g,v;r=Math.floor,c=Math.min,n=function(e,t){return e<t?-1:e>t?1:0},u=function(e,t,i,a,o){var s;if(null==i&&(i=0),null==o&&(o=n),i<0)throw Error("lo must be non-negative");for(null==a&&(a=e.length);i<a;)0>o(t,e[s=r((i+a)/2)])?a=s:i=s+1;return[].splice.apply(e,[i,i-i].concat(t)),t},o=function(e,t,r){return null==r&&(r=n),e.push(t),g(e,0,e.length-1,r)},a=function(e,t){var r,i;return null==t&&(t=n),r=e.pop(),e.length?(i=e[0],e[0]=r,v(e,0,t)):i=r,i},l=function(e,t,r){var i;return null==r&&(r=n),i=e[0],e[0]=t,v(e,0,r),i},s=function(e,t,r){var i;return null==r&&(r=n),e.length&&0>r(e[0],t)&&(t=(i=[e[0],t])[0],e[0]=i[1],v(e,0,r)),t},i=function(e,t){var i,a,o,s,l,u;for(null==t&&(t=n),s=(function(){u=[];for(var t=0,n=r(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)u.push(t);return u}).apply(this).reverse(),l=[],a=0,o=s.length;a<o;a++)i=s[a],l.push(v(e,i,t));return l},f=function(e,t,r){var i;if(null==r&&(r=n),-1!==(i=e.indexOf(t)))return g(e,0,i,r),v(e,i,r)},h=function(e,t,r){var a,o,l,u;if(null==r&&(r=n),!(a=e.slice(0,t)).length)return a;for(i(a,r),u=e.slice(t),o=0,l=u.length;o<l;o++)s(a,u[o],r);return a.sort(r).reverse()},p=function(e,t,r){var o,s,l,h,p,f,g,v,y;if(null==r&&(r=n),10*t<=e.length){if(!(l=e.slice(0,t).sort(r)).length)return l;for(s=l[l.length-1],g=e.slice(t),h=0,f=g.length;h<f;h++)0>r(o=g[h],s)&&(u(l,o,0,null,r),l.pop(),s=l[l.length-1]);return l}for(i(e,r),y=[],p=0,v=c(t,e.length);0<=v?p<v:p>v;0<=v?++p:--p)y.push(a(e,r));return y},g=function(e,t,r,i){var a,o,s;for(null==i&&(i=n),a=e[r];r>t;){if(0>i(a,o=e[s=r-1>>1])){e[r]=o,r=s;continue}break}return e[r]=a},v=function(e,t,r){var i,a,o,s,l;for(null==r&&(r=n),a=e.length,l=t,o=e[t],i=2*t+1;i<a;)(s=i+1)<a&&!(0>r(e[i],e[s]))&&(i=s),e[t]=e[i],i=2*(t=i)+1;return e[t]=o,g(e,l,t,r)},t=function(){function e(e){this.cmp=null!=e?e:n,this.nodes=[]}return e.push=o,e.pop=a,e.replace=l,e.pushpop=s,e.heapify=i,e.updateItem=f,e.nlargest=h,e.nsmallest=p,e.prototype.push=function(e){return o(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return -1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return s(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return f(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),e.exports=t}).call($)}(iw={exports:{}},iw.exports),iw.exports),te=eK({root:null,weight:function(e){return 1},directed:!1}),tt=eK({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),tn=eK({weight:function(e){return 1},directed:!1}),tr=eK({weight:function(e){return 1},directed:!1,root:null}),ti=Math.sqrt(2),ta=function(e,t,n){0===n.length&&eX("Karger-Stein must be run on a connected (sub)graph");for(var r=n[e],i=r[1],a=r[2],o=t[i],s=t[a],l=n.length-1;l>=0;l--){var u=n[l],c=u[1],h=u[2];(t[c]===o&&t[h]===s||t[c]===s&&t[h]===o)&&n.splice(l,1)}for(var p=0;p<n.length;p++){var f=n[p];f[1]===s?(n[p]=f.slice(),n[p][1]=o):f[2]===s&&(n[p]=f.slice(),n[p][2]=o)}for(var g=0;g<t.length;g++)t[g]===s&&(t[g]=o);return n},to=function(e,t,n,r){for(;n>r;)t=ta(Math.floor(Math.random()*t.length),e,t),n--;return t},ts=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},tl=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},tu=function(e){return{x:e[0],y:e[1]}},tc=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=1/0,i=t;i<n;i++){var a=e[i];isFinite(a)&&(r=Math.min(a,r))}return r},th=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=-1/0,i=t;i<n;i++){var a=e[i];isFinite(a)&&(r=Math.max(a,r))}return r},td=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=0,i=0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(r+=o,i++)}return r/i},tp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=!(arguments.length>5)||void 0===arguments[5]||arguments[5];r?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var o=0,s=e.length-1;s>=0;s--){var l=e[s];a?isFinite(l)||(e[s]=-1/0,o++):e.splice(s,1)}i&&e.sort(function(e,t){return e-t});var u=e.length,c=Math.floor(u/2);return u%2!=0?e[c+1+o]:(e[c-1+o]+e[c+o])/2},tf=function(e,t){return Math.atan2(t,e)-Math.PI/2},tg=Math.log2||function(e){return Math.log(e)/Math.log(2)},tv=function(e){return e>0?1:e<0?-1:0},ty=function(e,t){return Math.sqrt(tm(e,t))},tm=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},tb=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},tx=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},tw=function(e,t,n,r){return{x:tx(e.x,t.x,n.x,r),y:tx(e.y,t.y,n.y,r)}},tE=function(e,t,n,r){var i={x:t.x-e.x,y:t.y-e.y},a=ty(e,t),o={x:i.x/a,y:i.y/a};return n=null!=n?n:0,r=null!=r?r:n*a,{x:e.x+o.x*r,y:e.y+o.y*r}},tT=function(e,t,n){return Math.max(e,Math.min(n,t))},t_=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},tk=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},tD=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},tC=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},tA=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},tS=function(e){var t,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===o.length)t=n=r=i=o[0];else if(2===o.length)t=r=o[0],i=n=o[1];else if(4===o.length){var s=a(o,4);t=s[0],n=s[1],r=s[2],i=s[3]}return e.x1-=i,e.x2+=n,e.y1-=t,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},tN=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},tL=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},tI=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},tO=function(e,t){return tI(e,t.x1,t.y1)&&tI(e,t.x2,t.y2)},tM=function(e,t,n,r,i,a,o){var s,l,u=t2(i,a),c=i/2,h=a/2,p=n-c+u-o,f=r-h-o,g=n+c-u+o;if((l=t$(e,t,n,r,p,f,g,f,!1)).length>0)return l;var v=n+c+o,y=r-h+u-o,b=r+h-u+o;if((l=t$(e,t,n,r,v,y,v,b,!1)).length>0)return l;var x=n-c+u-o,w=r+h+o,E=n+c-u+o;if((l=t$(e,t,n,r,x,w,E,w,!1)).length>0)return l;var T=n-c-o,_=r-h+u-o,k=r+h-u+o;if((l=t$(e,t,n,r,T,_,T,k,!1)).length>0)return l;var D=n-c+u,C=r-h+u;if((s=tq(e,t,n,r,D,C,u+o)).length>0&&s[0]<=D&&s[1]<=C)return[s[0],s[1]];var A=n+c-u,S=r-h+u;if((s=tq(e,t,n,r,A,S,u+o)).length>0&&s[0]>=A&&s[1]<=S)return[s[0],s[1]];var N=n+c-u,L=r+h-u;if((s=tq(e,t,n,r,N,L,u+o)).length>0&&s[0]>=N&&s[1]>=L)return[s[0],s[1]];var I=n-c+u,O=r+h-u;return(s=tq(e,t,n,r,I,O,u+o)).length>0&&s[0]<=I&&s[1]>=O?[s[0],s[1]]:[]},tP=function(e,t,n,r,i,a,o,s,l){var u={x1:Math.min(n,o,i)-l,x2:Math.max(n,o,i)+l,y1:Math.min(r,s,a)-l,y2:Math.max(r,s,a)+l};return!(e<u.x1||e>u.x2||t<u.y1||t>u.y2)},tR=function(e,t,n,r){var i=t*t-4*e*(n-=r);if(i<0)return[];var a=Math.sqrt(i),o=2*e;return[(-t+a)/o,(-t-a)/o]},tF=function(e,t,n,r,i){var a,o,s,l,u,c,h,p;if(0===e&&(e=1e-5),t/=e,n/=e,r/=e,a=(o=(3*n-t*t)/9)*o*o+(s=(-(27*r)+t*(9*n-2*(t*t)))/54)*s,i[1]=0,h=t/3,a>0){u=(u=s+Math.sqrt(a))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(a))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+u+c,h+=(u+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+u)/2,i[3]=h,i[5]=-h;return}if(i[5]=i[3]=0,0===a){p=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-h+2*p,i[4]=i[2]=-(p+h);return}l=Math.acos(s/Math.sqrt(l=(o=-o)*o*o)),p=2*Math.sqrt(o),i[0]=-h+p*Math.cos(l/3),i[2]=-h+p*Math.cos((l+2*Math.PI)/3),i[4]=-h+p*Math.cos((l+4*Math.PI)/3)},tB=function(e,t,n,r,i,a,o,s){var l=[];tF(1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+r*r-4*r*a+2*r*s+4*a*a-4*a*s+s*s,9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*r*a-3*r*r-3*r*s-6*a*a+3*a*s,3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*r*r-6*r*a+r*s-r*t+2*a*a+2*a*t-s*t,1*n*i-n*n+n*e-i*e+r*a-r*r+r*t-a*t,l);for(var u=[],c=0;c<6;c+=2)1e-7>Math.abs(l[c+1])&&l[c]>=0&&l[c]<=1&&u.push(l[c]);u.push(1),u.push(0);for(var h,p=-1,f=0;f<u.length;f++)h=Math.pow(Math.pow(1-u[f],2)*n+2*(1-u[f])*u[f]*i+u[f]*u[f]*o-e,2)+Math.pow(Math.pow(1-u[f],2)*r+2*(1-u[f])*u[f]*a+u[f]*u[f]*s-t,2),p>=0?h<p&&(p=h):p=h;return p},tz=function(e,t,n,r,i,a){var o=[e-n,t-r],s=[i-n,a-r],l=s[0]*s[0]+s[1]*s[1],u=o[0]*o[0]+o[1]*o[1],c=o[0]*s[0]+o[1]*s[1],h=c*c/l;return c<0?u:h>l?(e-i)*(e-i)+(t-a)*(t-a):u-h},tG=function(e,t,n){for(var r,i,a,o,s=0,l=0;l<n.length/2;l++)if(r=n[2*l],i=n[2*l+1],l+1<n.length/2?(a=n[(l+1)*2],o=n[(l+1)*2+1]):(a=n[(l+1-n.length/2)*2],o=n[(l+1-n.length/2)*2+1]),!(r==e&&a==e)){if((!(r>=e)||!(e>=a))&&(!(r<=e)||!(e<=a)))continue;(e-r)/(a-r)*(o-i)+i>t&&s++}return s%2!=0},tY=function(e,t,n,r,i,a,o,s,l){var u,c=Array(n.length);null!=s[0]?(u=Math.atan(s[1]/s[0]),s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=s;for(var h=Math.cos(-u),p=Math.sin(-u),f=0;f<c.length/2;f++)c[2*f]=a/2*(n[2*f]*h-n[2*f+1]*p),c[2*f+1]=o/2*(n[2*f+1]*h+n[2*f]*p),c[2*f]+=r,c[2*f+1]+=i;return tG(e,t,l>0?tX(tj(c,-l)):c)},tV=function(e,t,n,r,i,a,o){for(var s=Array(n.length),l=a/2,u=o/2,c=t5(a,o),h=c*c,p=0;p<n.length/4;p++){var f=void 0,g=void 0;f=0===p?n.length-2:4*p-2,g=4*p+2;var v=r+l*n[4*p],y=i+u*n[4*p+1],b=c/Math.tan(Math.acos(-n[f]*n[g]-n[f+1]*n[g+1])/2),x=v-b*n[f],w=y-b*n[f+1],E=v+b*n[g],T=y+b*n[g+1];s[4*p]=x,s[4*p+1]=w,s[4*p+2]=E,s[4*p+3]=T;var _=n[f+1],k=-n[f];if(_*n[g]+k*n[g+1]<0&&(_*=-1,k*=-1),Math.pow(x+_*c-e,2)+Math.pow(w+k*c-t,2)<=h)return!0}return tG(e,t,s)},tX=function(e){for(var t,n,r,i,a,o,s,l,u=Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],n=e[4*c+1],r=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(a=e[(c+1)*4],o=e[(c+1)*4+1],s=e[(c+1)*4+2],l=e[(c+1)*4+3]):(a=e[0],o=e[1],s=e[2],l=e[3]);var h=t$(t,n,r,i,a,o,s,l,!0);u[2*c]=h[0],u[2*c+1]=h[1]}return u},tj=function(e,t){for(var n,r,i,a,o=Array(2*e.length),s=0;s<e.length/2;s++){n=e[2*s],r=e[2*s+1],s<e.length/2-1?(i=e[(s+1)*2],a=e[(s+1)*2+1]):(i=e[0],a=e[1]);var l=a-r,u=-(i-n),c=Math.sqrt(l*l+u*u),h=l/c,p=u/c;o[4*s]=n+h*t,o[4*s+1]=r+p*t,o[4*s+2]=i+h*t,o[4*s+3]=a+p*t}return o},tU=function(e,t,n,r,i,a){var o=n-e,s=r-t,l=Math.sqrt((o/=i)*o+(s/=a)*s),u=l-1;if(u<0)return[];var c=u/l;return[(n-e)*c+e,(r-t)*c+t]},tH=function(e,t,n,r,i,a,o){return e-=i,t-=a,(e/=n/2+o)*e+(t/=r/2+o)*t<=1},tq=function(e,t,n,r,i,a,o){var s=[n-e,r-t],l=[e-i,t-a],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),h=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-o*o);if(h<0)return[];var p=(-c+Math.sqrt(h))/(2*u),f=(-c-Math.sqrt(h))/(2*u),g=Math.min(p,f),v=Math.max(p,f),y=[];if(g>=0&&g<=1&&y.push(g),v>=0&&v<=1&&y.push(v),0===y.length)return[];var b=y[0]*s[0]+e,x=y[0]*s[1]+t;return y.length>1?y[0]==y[1]?[b,x]:[b,x,y[1]*s[0]+e,y[1]*s[1]+t]:[b,x]},tW=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},t$=function(e,t,n,r,i,a,o,s,l){var u=e-i,c=n-e,h=o-i,p=t-a,f=r-t,g=s-a,v=h*p-g*u,y=c*p-f*u,b=g*c-h*f;if(0===b)return 0===v||0===y?tW(e,n,o)===o?[o,s]:tW(e,n,i)===i?[i,a]:tW(i,o,n)===n?[n,r]:[]:[];var x=v/b,w=y/b;return -.001<=x&&x<=1.001&&-.001<=w&&w<=1.001?[e+x*c,t+x*f]:l?[e+x*c,t+x*f]:[]},tK=function(e,t,n,r,i,a,o,s){var l,u=[],c=Array(n.length),h=!0;if(null==a&&(h=!1),h){for(var p=0;p<c.length/2;p++)c[2*p]=n[2*p]*a+r,c[2*p+1]=n[2*p+1]*o+i;f=s>0?tX(tj(c,-s)):c}else f=n;for(var f,g,v,y,b,x=0;x<f.length/2;x++)g=f[2*x],v=f[2*x+1],x<f.length/2-1?(y=f[(x+1)*2],b=f[(x+1)*2+1]):(y=f[0],b=f[1]),0!==(l=t$(e,t,r,i,g,v,y,b)).length&&u.push(l[0],l[1]);return u},tZ=function(e,t,n,r,i,a,o,s){for(var l,u=[],c=Array(n.length),h=a/2,p=o/2,f=t5(a,o),g=0;g<n.length/4;g++){var v=void 0,y=void 0;v=0===g?n.length-2:4*g-2,y=4*g+2;var b=r+h*n[4*g],x=i+p*n[4*g+1],w=f/Math.tan(Math.acos(-n[v]*n[y]-n[v+1]*n[y+1])/2),E=b-w*n[v],T=x-w*n[v+1],_=b+w*n[y],k=x+w*n[y+1];0===g?(c[n.length-2]=E,c[n.length-1]=T):(c[4*g-2]=E,c[4*g-1]=T),c[4*g]=_,c[4*g+1]=k;var D=n[v+1],C=-n[v];D*n[y]+C*n[y+1]<0&&(D*=-1,C*=-1),0!==(l=tq(e,t,r,i,E+D*f,T+C*f,f)).length&&u.push(l[0],l[1])}for(var A=0;A<c.length/4;A++)0!==(l=t$(e,t,r,i,c[4*A],c[4*A+1],c[4*A+2],c[4*A+3],!1)).length&&u.push(l[0],l[1]);if(u.length>2){for(var S=[u[0],u[1]],N=Math.pow(S[0]-e,2)+Math.pow(S[1]-t,2),L=1;L<u.length/2;L++){var I=Math.pow(u[2*L]-e,2)+Math.pow(u[2*L+1]-t,2);I<=N&&(S[0]=u[2*L],S[1]=u[2*L+1],N=I)}return S}return u},tQ=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=(i-n)/i;return a<0&&(a=1e-5),[t[0]+a*r[0],t[1]+a*r[1]]},tJ=function(e,t){return t0(t1(e,t))},t0=function(e){for(var t,n,r=e.length/2,i=1/0,a=1/0,o=-1/0,s=-1/0,l=0;l<r;l++)t=e[2*l],n=e[2*l+1],i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,n),s=Math.max(s,n);for(var u=2/(o-i),c=2/(s-a),h=0;h<r;h++)t=e[2*h]=e[2*h]*u,n=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,n),s=Math.max(s,n);if(a<-1)for(var p=0;p<r;p++)n=e[2*p+1]=e[2*p+1]+(-1-a);return e},t1=function(e,t){var n=1/e*2*Math.PI,r=e%2==0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var i,a=Array(2*e),o=0;o<e;o++)i=o*n+r,a[2*o]=Math.cos(i),a[2*o+1]=Math.sin(-i);return a},t2=function(e,t){return Math.min(e/4,t/4,8)},t5=function(e,t){return Math.min(e/10,t/10,8)},t3=function(){return 8},t4=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},t9=eK({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),t6=eK({root:null,weight:function(e){return 1},directed:!1,alpha:0}),t8={degreeCentralityNormalized:function(e){e=t6(e);var t=this.cy(),n=this.nodes(),r=n.length;if(e.directed){for(var i={},a={},o=0,s=0,l=0;l<r;l++){var u=n[l],c=u.id();e.root=u;var h=this.degreeCentrality(e);o<h.indegree&&(o=h.indegree),s<h.outdegree&&(s=h.outdegree),i[c]=h.indegree,a[c]=h.outdegree}return{indegree:function(e){return 0==o?0:(v(e)&&(e=t.filter(e)),i[e.id()]/o)},outdegree:function(e){return 0===s?0:(v(e)&&(e=t.filter(e)),a[e.id()]/s)}}}for(var p={},f=0,g=0;g<r;g++){var y=n[g];e.root=y;var b=this.degreeCentrality(e);f<b.degree&&(f=b.degree),p[y.id()]=b.degree}return{degree:function(e){return 0===f?0:(v(e)&&(e=t.filter(e)),p[e.id()]/f)}}},degreeCentrality:function(e){e=t6(e);var t=this.cy(),n=this,r=e,i=r.root,a=r.weight,o=r.directed,s=r.alpha;if(i=t.collection(i)[0],o){for(var l=i.connectedEdges(),u=l.filter(function(e){return e.target().same(i)&&n.has(e)}),c=l.filter(function(e){return e.source().same(i)&&n.has(e)}),h=u.length,p=c.length,f=0,g=0,v=0;v<u.length;v++)f+=a(u[v]);for(var y=0;y<c.length;y++)g+=a(c[y]);return{indegree:Math.pow(h,1-s)*Math.pow(f,s),outdegree:Math.pow(p,1-s)*Math.pow(g,s)}}for(var b=i.connectedEdges().intersection(n),x=b.length,w=0,E=0;E<b.length;E++)w+=a(b[E]);return{degree:Math.pow(x,1-s)*Math.pow(w,s)}}};t8.dc=t8.degreeCentrality,t8.dcn=t8.degreeCentralityNormalised=t8.degreeCentralityNormalized;var t7=eK({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),ne={closenessCentralityNormalized:function(e){for(var t=t7(e),n=t.harmonic,r=t.weight,i=t.directed,a=this.cy(),o={},s=0,l=this.nodes(),u=this.floydWarshall({weight:r,directed:i}),c=0;c<l.length;c++){for(var h=0,p=l[c],f=0;f<l.length;f++)if(c!==f){var g=u.distance(p,l[f]);n?h+=1/g:h+=g}n||(h=1/h),s<h&&(s=h),o[p.id()]=h}return{closeness:function(e){return 0==s?0:o[e=v(e)?a.filter(e)[0].id():e.id()]/s}}},closenessCentrality:function(e){var t=t7(e),n=t.root,r=t.weight,i=t.directed,a=t.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:r,directed:i}),s=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(n)){var h=o.distanceTo(c);a?s+=1/h:s+=h}}return a?s:1/s}};ne.cc=ne.closenessCentrality,ne.ccn=ne.closenessCentralityNormalised=ne.closenessCentralityNormalized;var nt=eK({weight:null,directed:!1}),nn={betweennessCentrality:function(e){for(var t=nt(e),n=t.directed,r=t.weight,i=null!=r,a=this.cy(),o=this.nodes(),s={},l={},u=0,c={set:function(e,t){l[e]=t,t>u&&(u=t)},get:function(e){return l[e]}},h=0;h<o.length;h++){var p=o[h],f=p.id();n?s[f]=p.outgoers().nodes():s[f]=p.openNeighborhood().nodes(),c.set(f,0)}for(var g=0;g<o.length;g++)!function(e){for(var t=o[e].id(),n=[],l={},u={},h={},p=new e7(function(e,t){return h[e]-h[t]}),f=0;f<o.length;f++){var g=o[f].id();l[g]=[],u[g]=0,h[g]=1/0}for(u[t]=1,h[t]=0,p.push(t);!p.empty();){var v=p.pop();if(n.push(v),i)for(var y=0;y<s[v].length;y++){var b=s[v][y],x=a.getElementById(v),w=r(x.edgesTo(b).length>0?x.edgesTo(b)[0]:b.edgesTo(x)[0]);h[b=b.id()]>h[v]+w&&(h[b]=h[v]+w,0>p.nodes.indexOf(b)?p.push(b):p.updateItem(b),u[b]=0,l[b]=[]),h[b]==h[v]+w&&(u[b]=u[b]+u[v],l[b].push(v))}else for(var E=0;E<s[v].length;E++){var T=s[v][E].id();h[T]==1/0&&(p.push(T),h[T]=h[v]+1),h[T]==h[v]+1&&(u[T]=u[T]+u[v],l[T].push(v))}}for(var _={},k=0;k<o.length;k++)_[o[k].id()]=0;for(;n.length>0;){for(var D=n.pop(),C=0;C<l[D].length;C++){var A=l[D][C];_[A]=_[A]+u[A]/u[D]*(1+_[D])}D!=o[e].id()&&c.set(D,c.get(D)+_[D])}}(g);var v={betweenness:function(e){var t=a.collection(e).id();return c.get(t)},betweennessNormalized:function(e){if(0==u)return 0;var t=a.collection(e).id();return c.get(t)/u}};return v.betweennessNormalised=v.betweennessNormalized,v}};nn.bc=nn.betweennessCentrality;var nr=eK({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),ni=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r](e);return n},na=function(e,t,n){for(var r=0;r<t;r++)e[r*t+r]=n},no=function(e,t){for(var n,r=0;r<t;r++){n=0;for(var i=0;i<t;i++)n+=e[i*t+r];for(var a=0;a<t;a++)e[a*t+r]=e[a*t+r]/n}},ns=function(e,t,n){for(var r=Array(n*n),i=0;i<n;i++){for(var a=0;a<n;a++)r[i*n+a]=0;for(var o=0;o<n;o++)for(var s=0;s<n;s++)r[i*n+s]+=e[i*n+o]*t[o*n+s]}return r},nl=function(e,t,n){for(var r=e.slice(0),i=1;i<n;i++)e=ns(e,r,t);return e},nu=function(e,t,n){for(var r=Array(t*t),i=0;i<t*t;i++)r[i]=Math.pow(e[i],n);return no(r,t),r},nc=function(e,t,n,r){for(var i=0;i<n;i++)if(Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},nh=function(e,t,n,r){for(var i=[],a=0;a<t;a++){for(var o=[],s=0;s<t;s++)Math.round(1e3*e[a*t+s])/1e3>0&&o.push(n[s]);0!==o.length&&i.push(r.collection(o))}return i},nd=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},np=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&nd(e[t],e[n])&&e.splice(n,1);return e},nf=function(e){for(var t=this.nodes(),n=this.edges(),r=this.cy(),i=nr(e),a={},o=0;o<t.length;o++)a[t[o].id()]=o;for(var s,l=t.length,u=l*l,c=Array(u),h=0;h<u;h++)c[h]=0;for(var p=0;p<n.length;p++){var f=n[p],g=a[f.source().id()],v=a[f.target().id()],y=ni(f,i.attributes);c[g*l+v]+=y,c[v*l+g]+=y}na(c,l,i.multFactor),no(c,l);for(var b=!0,x=0;b&&x<i.maxIterations;)b=!1,nc(c=nu(s=nl(c,l,i.expandFactor),l,i.inflateFactor),s,u,4)||(b=!0),x++;return np(nh(c,l,t,r))},ng=function(e){return e},nv=function(e,t){return Math.abs(t-e)},ny=function(e,t,n){return e+nv(t,n)},nm=function(e,t,n){return e+Math.pow(n-t,2)},nb=function(e){return Math.sqrt(e)},nx=function(e,t,n){return Math.max(e,nv(t,n))},nw=function(e,t,n,r,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ng,o=r,s=0;s<e;s++)o=i(o,t(s),n(s));return a(o)},nE={euclidean:function(e,t,n){return e>=2?nw(e,t,n,0,nm,nb):nw(e,t,n,0,ny)},squaredEuclidean:function(e,t,n){return nw(e,t,n,0,nm)},manhattan:function(e,t,n){return nw(e,t,n,0,ny)},max:function(e,t,n){return nw(e,t,n,-1/0,nx)}};function nT(e,t,n,r,i,a){var o;return o=y(e)?e:nE[e]||nE.euclidean,0===t&&y(e)?o(i,a):o(t,n,r,i,a)}nE["squared-euclidean"]=nE.squaredEuclidean,nE.squaredeuclidean=nE.squaredEuclidean;var n_=eK({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),nk=function(e){return n_(e)},nD=function(e,t,n,r,i){var a="kMedoids"!==i?function(e){return n[e]}:function(e){return r[e](n)};return nT(e,r.length,a,function(e){return r[e](t)},n,t)},nC=function(e,t,n){for(var r=n.length,i=Array(r),a=Array(r),o=Array(t),s=null,l=0;l<r;l++)i[l]=e.min(n[l]).value,a[l]=e.max(n[l]).value;for(var u=0;u<t;u++){s=[];for(var c=0;c<r;c++)s[c]=Math.random()*(a[c]-i[c])+i[c];o[u]=s}return o},nA=function(e,t,n,r,i){for(var a=1/0,o=0,s=0;s<t.length;s++){var l=nD(n,e,t[s],r,i);l<a&&(a=l,o=s)}return o},nS=function(e,t,n){for(var r=[],i=null,a=0;a<t.length;a++)n[(i=t[a]).id()]===e&&r.push(i);return r},nN=function(e,t,n){for(var r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)if(Math.abs(e[r][i]-t[r][i])>n)return!1;return!0},nL=function(e,t,n){for(var r=0;r<n;r++)if(e===t[r])return!0;return!1},nI=function(e,t){var n=Array(t);if(e.length<50)for(var r=0;r<t;r++){for(var i=e[Math.floor(Math.random()*e.length)];nL(i,n,r);)i=e[Math.floor(Math.random()*e.length)];n[r]=i}else for(var a=0;a<t;a++)n[a]=e[Math.floor(Math.random()*e.length)];return n},nO=function(e,t,n){for(var r=0,i=0;i<t.length;i++)r+=nD("manhattan",t[i],e,n,"kMedoids");return r},nM=function(e,t,n,r,i){for(var a,o,s=0;s<t.length;s++)for(var l=0;l<e.length;l++)r[s][l]=Math.pow(n[s][l],i.m);for(var u=0;u<e.length;u++)for(var c=0;c<i.attributes.length;c++){a=0,o=0;for(var h=0;h<t.length;h++)a+=r[h][u]*i.attributes[c](t[h]),o+=r[h][u];e[u][c]=a/o}},nP=function(e,t,n,r,i){for(var a=0;a<e.length;a++)t[a]=e[a].slice();for(var o,s=2/(i.m-1),l=0;l<n.length;l++)for(var u=0;u<r.length;u++){o=0;for(var c=0;c<n.length;c++)o+=Math.pow(nD(i.distance,r[u],n[l],i.attributes,"cmeans")/nD(i.distance,r[u],n[c],i.attributes,"cmeans"),s);e[u][l]=1/o}},nR=function(e,t,n,r){for(var i=Array(n.k),a=0;a<i.length;a++)i[a]=[];for(var o,s,l=0;l<t.length;l++){o=-1/0,s=-1;for(var u=0;u<t[0].length;u++)t[l][u]>o&&(o=t[l][u],s=u);i[s].push(e[l])}for(var c=0;c<i.length;c++)i[c]=r.collection(i[c]);return i},nF=function(e){var t,n,r,i,a=this.cy(),o=this.nodes(),s=nk(e);r=Array(o.length);for(var l=0;l<o.length;l++)r[l]=Array(s.k);n=Array(o.length);for(var u=0;u<o.length;u++)n[u]=Array(s.k);for(var c=0;c<o.length;c++){for(var h=0,p=0;p<s.k;p++)n[c][p]=Math.random(),h+=n[c][p];for(var f=0;f<s.k;f++)n[c][f]=n[c][f]/h}t=Array(s.k);for(var g=0;g<s.k;g++)t[g]=Array(s.attributes.length);i=Array(o.length);for(var v=0;v<o.length;v++)i[v]=Array(s.k);for(var y=!0,b=0;y&&b<s.maxIterations;)y=!1,nM(t,o,n,i,s),nP(n,r,t,o,s),nN(n,r,s.sensitivityThreshold)||(y=!0),b++;return{clusters:nR(o,n,s,a),degreeOfMembership:n}},nB=eK({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),nz={single:"min",complete:"max"},nG=function(e){var t=nB(e),n=nz[t.linkage];return null!=n&&(t.linkage=n),t},nY=function(e,t,n,r,i){for(var a,o=0,s=1/0,l=i.attributes,u=function(e,t){return nT(i.distance,l.length,function(t){return l[t](e)},function(e){return l[e](t)},e,t)},c=0;c<e.length;c++){var h=e[c].key,p=n[h][r[h]];p<s&&(o=h,s=p)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===e.length)return!1;var f,g=t[o],v=t[r[o]];f="dendrogram"===i.mode?{left:g,right:v,key:g.key}:{value:g.value.concat(v.value),key:g.key},e[g.index]=f,e.splice(v.index,1),t[g.key]=f;for(var y=0;y<e.length;y++){var b=e[y];g.key===b.key?a=1/0:"min"===i.linkage?(a=n[g.key][b.key],n[g.key][b.key]>n[v.key][b.key]&&(a=n[v.key][b.key])):"max"===i.linkage?(a=n[g.key][b.key],n[g.key][b.key]<n[v.key][b.key]&&(a=n[v.key][b.key])):a="mean"===i.linkage?(n[g.key][b.key]*g.size+n[v.key][b.key]*v.size)/(g.size+v.size):"dendrogram"===i.mode?u(b.value,g.value):u(b.value[0],g.value[0]),n[g.key][b.key]=n[b.key][g.key]=a}for(var x=0;x<e.length;x++){var w=e[x].key;if(r[w]===g.key||r[w]===v.key){for(var E=w,T=0;T<e.length;T++){var _=e[T].key;n[w][_]<n[w][E]&&(E=_)}r[w]=E}e[x].index=x}return g.key=v.key=g.index=v.index=null,!0},nV=function e(t,n,r){t&&(t.value?n.push(t.value):(t.left&&e(t.left,n),t.right&&e(t.right,n)))},nX=function e(t,n){if(!t)return"";if(t.left&&t.right){var r=e(t.left,n),i=e(t.right,n),a=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:a.id()}}),n.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}if(t.value)return t.value.id()},nj=function e(t,n,r){if(!t)return[];var i=[],a=[],o=[];return 0===n?(t.left&&nV(t.left,i),t.right&&nV(t.right,a),o=i.concat(a),[r.collection(o)]):1===n?t.value?[r.collection(t.value)]:(t.left&&nV(t.left,i),t.right&&nV(t.right,a),[r.collection(i),r.collection(a)]):t.value?[r.collection(t.value)]:(t.left&&(i=e(t.left,n-1,r)),t.right&&(a=e(t.right,n-1,r)),i.concat(a))},nU=function(e){for(var t,n=this.cy(),r=this.nodes(),i=nG(e),a=i.attributes,o=function(e,t){return nT(i.distance,a.length,function(t){return a[t](e)},function(e){return a[e](t)},e,t)},s=[],l=[],u=[],c=[],h=0;h<r.length;h++){var p={value:"dendrogram"===i.mode?r[h]:[r[h]],key:h,index:h};s[h]=p,c[h]=p,l[h]=[],u[h]=0}for(var f=0;f<s.length;f++)for(var g=0;g<=f;g++){var v=void 0;v="dendrogram"===i.mode?f===g?1/0:o(s[f].value,s[g].value):f===g?1/0:o(s[f].value[0],s[g].value[0]),l[f][g]=v,l[g][f]=v,v<l[f][u[f]]&&(u[f]=g)}for(var y=nY(s,c,l,u,i);y;)y=nY(s,c,l,u,i);return"dendrogram"===i.mode?(t=nj(s[0],i.dendrogramDepth,n),i.addDendrogram&&nX(s[0],n)):(t=Array(s.length),s.forEach(function(e,r){e.key=e.index=null,t[r]=n.collection(e.value)})),t},nH=eK({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),nq=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||eX("Damping must range on [0.5, 1).  Got: ".concat(t));var r=["median","mean","min","max"];return r.some(function(e){return e===n})||w(n)||eX("Preference must be one of [".concat(r.map(function(e){return"'".concat(e,"'")}).join(", "),"] or a number.  Got: ").concat(n)),nH(e)},nW=function(e,t,n,r){var i=function(e,t){return r[t](e)};return-nT(e,r.length,function(e){return i(t,e)},function(e){return i(n,e)},t,n)},n$=function(e,t,n){for(var r=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&r.push(i);return r},nK=function(e,t,n){for(var r=[],i=0;i<e;i++){for(var a=-1,o=-1/0,s=0;s<n.length;s++){var l=n[s];t[i*e+l]>o&&(a=l,o=t[i*e+l])}a>0&&r.push(a)}for(var u=0;u<n.length;u++)r[n[u]]=n[u];return r},nZ=function(e,t,n){for(var r=nK(e,t,n),i=0;i<n.length;i++){for(var a=[],o=0;o<r.length;o++)r[o]===n[i]&&a.push(o);for(var s=-1,l=-1/0,u=0;u<a.length;u++){for(var c=0,h=0;h<a.length;h++)c+=t[a[h]*e+a[u]];c>l&&(s=u,l=c)}n[i]=a[s]}return nK(e,t,n)},nQ=function(e){for(var t,n,r,i,a,o,s,l,u=this.cy(),c=this.nodes(),h=nq(e),p={},f=0;f<c.length;f++)p[c[f].id()]=f;i=Array(r=(n=c.length)*n);for(var g=0;g<r;g++)i[g]=-1/0;for(var v=0;v<n;v++)for(var y=0;y<n;y++)v!==y&&(i[v*n+y]=nW(h.distance,c[v],c[y],h.attributes));a="median"===(t=h.preference)?tp(i):"mean"===t?td(i):"min"===t?tc(i):"max"===t?th(i):t;for(var b=0;b<n;b++)i[b*n+b]=a;o=Array(r);for(var x=0;x<r;x++)o[x]=0;s=Array(r);for(var w=0;w<r;w++)s[w]=0;for(var E=Array(n),T=Array(n),_=Array(n),k=0;k<n;k++)E[k]=0,T[k]=0,_[k]=0;for(var D=Array(n*h.minIterations),C=0;C<D.length;C++)D[C]=0;for(l=0;l<h.maxIterations;l++){for(var A=0;A<n;A++){for(var S=-1/0,N=-1/0,L=-1,I=0,O=0;O<n;O++)E[O]=o[A*n+O],(I=s[A*n+O]+i[A*n+O])>=S?(N=S,S=I,L=O):I>N&&(N=I);for(var M=0;M<n;M++)o[A*n+M]=(1-h.damping)*(i[A*n+M]-S)+h.damping*E[M];o[A*n+L]=(1-h.damping)*(i[A*n+L]-N)+h.damping*E[L]}for(var P=0;P<n;P++){for(var R=0,F=0;F<n;F++)E[F]=s[F*n+P],T[F]=Math.max(0,o[F*n+P]),R+=T[F];R-=T[P],T[P]=o[P*n+P],R+=T[P];for(var B=0;B<n;B++)s[B*n+P]=(1-h.damping)*Math.min(0,R-T[B])+h.damping*E[B];s[P*n+P]=(1-h.damping)*(R-T[P])+h.damping*E[P]}for(var z=0,G=0;G<n;G++){var Y=s[G*n+G]+o[G*n+G]>0?1:0;D[l%h.minIterations*n+G]=Y,z+=Y}if(z>0&&(l>=h.minIterations-1||l==h.maxIterations-1)){for(var V=0,X=0;X<n;X++){_[X]=0;for(var j=0;j<h.minIterations;j++)_[X]+=D[j*n+X];(0===_[X]||_[X]===h.minIterations)&&V++}if(V===n)break}}for(var U=n$(n,o,s),H=nZ(n,i,U),q={},W=0;W<U.length;W++)q[U[W]]=[];for(var $=0;$<c.length;$++){var K=H[p[c[$].id()]];null!=K&&q[K].push(c[$])}for(var Z=Array(U.length),Q=0;Q<U.length;Q++)Z[Q]=u.collection(q[U[Q]]);return Z},nJ=eK({root:void 0,directed:!1}),n0=function(){var e=this,t={},n=0,r=0,i=[],a=[],o={},s=function(n,r){for(var o=a.length-1,s=[],l=e.spawn();a[o].x!=n||a[o].y!=r;)s.push(a.pop().edge),o--;s.push(a.pop().edge),s.forEach(function(n){var r=n.connectedNodes().intersection(e);l.merge(n),r.forEach(function(n){var r=n.id(),i=n.connectedEdges().intersection(e);l.merge(n),t[r].cutVertex?l.merge(i.filter(function(e){return e.isLoop()})):l.merge(i)})}),i.push(l)},l=function l(u,c,h){u===h&&(r+=1),t[c]={id:n,low:n++,cutVertex:!1};var p,f,g,v,y=e.getElementById(c).connectedEdges().intersection(e);0===y.size()?i.push(e.spawn(e.getElementById(c))):y.forEach(function(e){p=e.source().id(),f=e.target().id(),(g=p===c?f:p)!==h&&(o[v=e.id()]||(o[v]=!0,a.push({x:c,y:g,edge:e})),g in t?t[c].low=Math.min(t[c].low,t[g].id):(l(u,g,c),t[c].low=Math.min(t[c].low,t[g].low),t[c].id<=t[g].low&&(t[c].cutVertex=!0,s(c,g))))})};e.forEach(function(e){if(e.isNode()){var n=e.id();n in t||(r=0,l(n,n),t[n].cutVertex=r>1)}});var u=Object.keys(t).filter(function(e){return t[e].cutVertex}).map(function(t){return e.getElementById(t)});return{cut:e.spawn(u),components:i}},n1=function(){var e=this,t={},n=0,r=[],i=[],a=e.spawn(e),o=function o(s){if(i.push(s),t[s]={index:n,low:n++,explored:!1},e.getElementById(s).connectedEdges().intersection(e).forEach(function(e){var n=e.target().id();n!==s&&(n in t||o(n),t[n].explored||(t[s].low=Math.min(t[s].low,t[n].low)))}),t[s].index===t[s].low){for(var l=e.spawn();;){var u=i.pop();if(l.merge(e.getElementById(u)),t[u].low=t[s].index,t[u].explored=!0,u===s)break}var c=l.edgesWith(l),h=l.merge(c);r.push(h),a=a.difference(h)}};return e.forEach(function(e){if(e.isNode()){var n=e.id();n in t||o(n)}}),{cut:a,components:r}},n2={};[e8,{dijkstra:function(e){if(!x(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=te(e),r=n.root,i=n.weight,a=n.directed,o=this,s=v(r)?this.filter(r)[0]:r[0],l={},u={},c={},h=this.byGroup(),p=h.nodes,f=h.edges;f.unmergeBy(function(e){return e.isLoop()});for(var g=function(e){return l[e.id()]},y=new e7(function(e,t){return g(e)-g(t)}),b=0;b<p.length;b++){var w=p[b];l[w.id()]=w.same(s)?0:1/0,y.push(w)}for(;y.size()>0;){var E=y.pop(),T=g(E);if(c[E.id()]=T,T!==1/0)for(var _=E.neighborhood().intersect(p),k=0;k<_.length;k++){var D=_[k],C=D.id(),A=function(e,t){for(var n,r=(a?e.edgesTo(t):e.edgesWith(t)).intersect(f),o=1/0,s=0;s<r.length;s++){var l=r[s],u=i(l);(u<o||!n)&&(o=u,n=l)}return{edge:n,dist:o}}(E,D),S=T+A.dist;S<g(D)&&(l[D.id()]=S,y.updateItem(D),u[C]={node:E,edge:A.edge})}}return{distanceTo:function(e){return c[(v(e)?p.filter(e)[0]:e[0]).id()]},pathTo:function(e){var t=v(e)?p.filter(e)[0]:e[0],n=[],r=t,i=r.id();if(t.length>0)for(n.unshift(t);u[i];){var a=u[i];n.unshift(a.edge),n.unshift(a.node),i=(r=a.node).id()}return o.spawn(n)}}}},{kruskal:function(e){e=e||function(e){return 1};for(var t=this.byGroup(),n=t.nodes,r=t.edges,i=n.length,a=Array(i),o=function(e){for(var t=0;t<a.length;t++)if(a[t].has(e))return t},s=0;s<i;s++)a[s]=this.spawn(n[s]);for(var l=r.sort(function(t,n){return e(t)-e(n)}),u=0;u<l.length;u++){var c=l[u],h=c.source()[0],p=c.target()[0],f=o(h),g=o(p),v=a[f],y=a[g];f!==g&&(n.merge(c),v.merge(y),a.splice(g,1))}return n}},{aStar:function(e){var t=this.cy(),n=tt(e),r=n.root,i=n.goal,a=n.heuristic,o=n.directed,s=n.weight;r=t.collection(r)[0],i=t.collection(i)[0];var l,u,c=r.id(),h=i.id(),p={},f={},g={},v=new e7(function(e,t){return f[e.id()]-f[t.id()]}),y=new e4,b={},x={},w=function(e,t){v.push(e),y.add(t)};w(r,c),p[c]=0,f[c]=a(r);for(var E=0;v.size()>0;){if(u=(l=v.pop()).id(),y.delete(u),E++,u===h){for(var T=[],_=i,k=h,D=x[k];T.unshift(_),null!=D&&T.unshift(D),null!=(_=b[k]);)D=x[k=_.id()];return{found:!0,distance:p[u],path:this.spawn(T),steps:E}}g[u]=!0;for(var C=l._private.edges,A=0;A<C.length;A++){var S=C[A];if(this.hasElementWithId(S.id())&&!(o&&S.data("source")!==u)){var N=S.source(),L=S.target(),I=N.id()!==u?N:L,O=I.id();if(this.hasElementWithId(O)&&!g[O]){var M=p[u]+s(S);if(!y.has(O)){p[O]=M,f[O]=M+a(I),w(I,O),b[O]=l,x[O]=S;continue}M<p[O]&&(p[O]=M,f[O]=M+a(I),b[O]=l,x[O]=S)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},{floydWarshall:function(e){for(var t=this.cy(),n=tn(e),r=n.weight,i=n.directed,a=this.byGroup(),o=a.nodes,s=a.edges,l=o.length,u=l*l,c=function(e){return o.indexOf(e)},h=function(e){return o[e]},p=Array(u),f=0;f<u;f++){var g=f%l;(f-g)/l===g?p[f]=0:p[f]=1/0}for(var y=Array(u),b=Array(u),x=0;x<s.length;x++){var w=s[x],E=w.source()[0],T=w.target()[0];if(E!==T){var _=c(E),k=c(T),D=_*l+k,C=r(w);if(p[D]>C&&(p[D]=C,y[D]=k,b[D]=w),!i){var A=k*l+_;!i&&p[A]>C&&(p[A]=C,y[A]=_,b[A]=w)}}}for(var S=0;S<l;S++)for(var N=0;N<l;N++)for(var L=N*l+S,I=0;I<l;I++){var O=N*l+I,M=S*l+I;p[L]+p[M]<p[O]&&(p[O]=p[L]+p[M],y[O]=y[L])}var P=function(e){return c((v(e)?t.filter(e):e)[0])};return{distance:function(e,t){return p[P(e)*l+P(t)]},path:function(e,n){var r=P(e),i=P(n),a=h(r);if(r===i)return a.collection();if(null==y[r*l+i])return t.collection();var o,s=t.collection(),u=r;for(s.merge(a);r!==i;)u=r,r=y[r*l+i],o=b[u*l+r],s.merge(o),s.merge(h(r));return s}}}},{bellmanFord:function(e){var t=this,n=tr(e),r=n.weight,i=n.directed,a=n.root,o=this,s=this.cy(),l=this.byGroup(),u=l.edges,c=l.nodes,h=c.length,p=new e5,f=!1,g=[];a=s.collection(a)[0],u.unmergeBy(function(e){return e.isLoop()});for(var y=u.length,b=function(e){var t=p.get(e.id());return t||(t={},p.set(e.id(),t)),t},x=function(e){return(v(e)?s.$(e):e)[0]},w=0;w<h;w++){var E=c[w],T=b(E);E.same(a)?T.dist=0:T.dist=1/0,T.pred=null,T.edge=null}for(var _=!1,k=function(e,t,n,r,i,a){var o=r.dist+a;o<i.dist&&!n.same(r.edge)&&(i.dist=o,i.pred=e,i.edge=n,_=!0)},D=1;D<h;D++){_=!1;for(var C=0;C<y;C++){var A=u[C],S=A.source(),N=A.target(),L=r(A),I=b(S),O=b(N);k(S,N,A,I,O,L),i||k(N,S,A,O,I,L)}if(!_)break}if(_)for(var M=[],P=0;P<y;P++){var R=u[P],F=R.source(),B=R.target(),z=r(R),G=b(F).dist,Y=b(B).dist;if(G+z<Y||!i&&Y+z<G){if(f||(eU("Graph contains a negative weight cycle for Bellman-Ford"),f=!0),!1!==e.findNegativeWeightCycles){var V=[];G+z<Y&&V.push(F),!i&&Y+z<G&&V.push(B);for(var X=V.length,j=0;j<X;j++){var U=V[j],H=[U];H.push(b(U).edge);for(var q=b(U).pred;-1===H.indexOf(q);)H.push(q),H.push(b(q).edge),q=b(q).pred;H=H.slice(H.indexOf(q));for(var W=H[0].id(),$=0,K=2;K<H.length;K+=2)H[K].id()<W&&(W=H[K].id(),$=K);(H=H.slice($).concat(H.slice(0,$))).push(H[0]);var Z=H.map(function(e){return e.id()}).join(",");-1===M.indexOf(Z)&&(g.push(o.spawn(H)),M.push(Z))}}else break}}return{distanceTo:function(e){return b(x(e)).dist},pathTo:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=x(e),i=[],s=r;;){if(null==s)return t.spawn();var l=b(s),u=l.edge,c=l.pred;if(i.unshift(s[0]),s.same(n)&&i.length>0)break;null!=u&&i.unshift(u),s=c}return o.spawn(i)},hasNegativeWeightCycle:f,negativeWeightCycles:g}}},{kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,r=t.edges;r.unmergeBy(function(e){return e.isLoop()});var i=n.length,a=r.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),s=Math.floor(i/ti);if(i<2){eX("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],u=0;u<a;u++){var c=r[u];l.push([u,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,p=[],f=Array(i),g=Array(i),v=Array(i),y=function(e,t){for(var n=0;n<i;n++)t[n]=e[n]},b=0;b<=o;b++){for(var x=0;x<i;x++)g[x]=x;var w=to(g,l.slice(),i,s),E=w.slice();y(g,v);var T=to(g,w,s,2),_=to(v,E,s,2);T.length<=_.length&&T.length<h?(h=T.length,p=T,y(g,f)):_.length<=T.length&&_.length<h&&(h=_.length,p=_,y(v,f))}for(var k=this.spawn(p.map(function(e){return r[e[0]]})),D=this.spawn(),C=this.spawn(),A=f[0],S=0;S<f.length;S++){var N=f[S],L=n[S];N===A?D.merge(L):C.merge(L)}var I=function(t){var n=e.spawn();return t.forEach(function(t){n.merge(t),t.connectedEdges().forEach(function(t){e.contains(t)&&!k.contains(t)&&n.merge(t)})}),n};return{cut:k,components:[I(D),I(C)],partition1:D,partition2:C}}},{pageRank:function(e){for(var t=t9(e),n=t.dampingFactor,r=t.precision,i=t.iterations,a=t.weight,o=this._private.cy,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,h=c*c,p=u.length,f=Array(h),g=Array(c),v=(1-n)/c,y=0;y<c;y++){for(var b=0;b<c;b++)f[y*c+b]=0;g[y]=0}for(var x=0;x<p;x++){var w=u[x],E=w.data("source"),T=w.data("target");if(E!==T){var _=l.indexOfId(E),k=l.indexOfId(T),D=a(w),C=k*c+_;f[C]+=D,g[_]+=D}}for(var A=1/c+v,S=0;S<c;S++)if(0===g[S])for(var N=0;N<c;N++)f[N*c+S]=A;else for(var L=0;L<c;L++){var I=L*c+S;f[I]=f[I]/g[S]+v}for(var O,M=Array(c),P=Array(c),R=0;R<c;R++)M[R]=1;for(var F=0;F<i;F++){for(var B=0;B<c;B++)P[B]=0;for(var z=0;z<c;z++)for(var G=0;G<c;G++){var Y=z*c+G;P[z]+=f[Y]*M[G]}tb(P),O=M,M=P,P=O;for(var V=0,X=0;X<c;X++){var j=O[X]-M[X];V+=j*j}if(V<r)break}return{rank:function(e){return e=o.collection(e)[0],M[l.indexOf(e)]}}}},t8,ne,nn,{markovClustering:nf,mcl:nf},{kMeans:function(t){var n,r=this.cy(),i=this.nodes(),a=null,o=nk(t),s=Array(o.k),l={};o.testMode?"number"==typeof o.testCentroids?(o.testCentroids,n=nC(i,o.k,o.attributes)):n="object"===e(o.testCentroids)?o.testCentroids:nC(i,o.k,o.attributes):n=nC(i,o.k,o.attributes);for(var u=!0,c=0;u&&c<o.maxIterations;){for(var h=0;h<i.length;h++)l[(a=i[h]).id()]=nA(a,n,o.distance,o.attributes,"kMeans");u=!1;for(var p=0;p<o.k;p++){var f=nS(p,i,l);if(0!==f.length){for(var g=o.attributes.length,v=n[p],y=Array(g),b=Array(g),x=0;x<g;x++){b[x]=0;for(var w,E=0;E<f.length;E++)a=f[E],b[x]+=o.attributes[x](a);y[x]=b[x]/f.length,w=y[x],Math.abs(v[x]-w)<=o.sensitivityThreshold||(u=!0)}n[p]=y,s[p]=r.collection(f)}}c++}return s},kMedoids:function(t){var n,r,i=this.cy(),a=this.nodes(),o=null,s=nk(t),l=Array(s.k),u={},c=Array(s.k);s.testMode?"number"==typeof s.testCentroids||(n="object"===e(s.testCentroids)?s.testCentroids:nI(a,s.k)):n=nI(a,s.k);for(var h=!0,p=0;h&&p<s.maxIterations;){for(var f=0;f<a.length;f++)u[(o=a[f]).id()]=nA(o,n,s.distance,s.attributes,"kMedoids");h=!1;for(var g=0;g<n.length;g++){var v=nS(g,a,u);if(0!==v.length){c[g]=nO(n[g],v,s.attributes);for(var y=0;y<v.length;y++)(r=nO(v[y],v,s.attributes))<c[g]&&(c[g]=r,n[g]=v[y],h=!0);l[g]=i.collection(v)}}p++}return l},fuzzyCMeans:nF,fcm:nF},{hierarchicalClustering:nU,hca:nU},{affinityPropagation:nQ,ap:nQ},{hierholzer:function(e){if(!x(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n,r,i,a=nJ(e),o=a.root,s=a.directed,l=!1;o&&(i=v(o)?this.filter(o)[0].id():o[0].id());var u={},c={};s?this.forEach(function(e){var t=e.id();if(e.isNode()){var i=e.indegree(!0),a=e.outdegree(!0),o=i-a,s=a-i;1==o?n?l=!0:n=t:1==s?r?l=!0:r=t:(s>1||o>1)&&(l=!0),u[t]=[],e.outgoers().forEach(function(e){e.isEdge()&&u[t].push(e.id())})}else c[t]=[void 0,e.target().id()]}):this.forEach(function(e){var t=e.id();e.isNode()?(e.degree(!0)%2&&(n?r?l=!0:r=t:n=t),u[t]=[],e.connectedEdges().forEach(function(e){return u[t].push(e.id())})):c[t]=[e.source().id(),e.target().id()]});var h={found:!1,trail:void 0};if(l)return h;if(r&&n){if(s){if(i&&r!=i)return h;i=r}else{if(i&&r!=i&&n!=i)return h;i||(i=r)}}else i||(i=this[0].id());var p=function(e){for(var t,n,r,i=e,a=[e];u[i].length;)n=c[t=u[i].shift()][0],i!=(r=c[t][1])?(u[r]=u[r].filter(function(e){return e!=t}),i=r):s||i==n||(u[n]=u[n].filter(function(e){return e!=t}),i=n),a.unshift(t),a.unshift(i);return a},f=[],g=[];for(g=p(i);1!=g.length;)0==u[g[0]].length?(f.unshift(this.getElementById(g.shift())),f.unshift(this.getElementById(g.shift()))):g=p(g.shift()).concat(g);for(var y in f.unshift(this.getElementById(g.shift())),u)if(u[y].length)return h;return h.found=!0,h.trail=this.spawn(f,!0),h}},{hopcroftTarjanBiconnected:n0,htbc:n0,htb:n0,hopcroftTarjanBiconnectedComponents:n0},{tarjanStronglyConnected:n1,tsc:n1,tscc:n1,tarjanStronglyConnectedComponents:n1}].forEach(function(e){Y(n2,e)});var n5=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};n5.prototype={fulfill:function(e){return n3(this,1,"fulfillValue",e)},reject:function(e){return n3(this,2,"rejectReason",e)},then:function(e,t){var n=new n5;return this.onFulfilled.push(n6(e,n,"fulfill")),this.onRejected.push(n6(t,n,"reject")),n4(this),n.proxy}};var n3=function(e,t,n,r){return 0===e.state&&(e.state=t,e[n]=r,n4(e)),e},n4=function(e){1===e.state?n9(e,"onFulfilled",e.fulfillValue):2===e.state&&n9(e,"onRejected",e.rejectReason)},n9=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var i=function(){for(var e=0;e<r.length;e++)r[e](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},n6=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(e){t.reject(e);return}n8(t,i)}}},n8=function t(n,r){if(n===r||n.proxy===r){n.reject(TypeError("cannot resolve promise with itself"));return}if("object"===e(r)&&null!==r||"function"==typeof r)try{i=r.then}catch(e){n.reject(e);return}if("function"==typeof i){var i,a=!1;try{i.call(r,function(e){a||(a=!0,e===r?n.reject(TypeError("circular thenable chain")):t(n,e))},function(e){a||(a=!0,n.reject(e))})}catch(e){a||n.reject(e)}return}n.fulfill(r)};n5.all=function(e){return new n5(function(t,n){for(var r=Array(e.length),i=0,a=function(n,a){r[n]=a,++i===e.length&&t(r)},o=0;o<e.length;o++)(function(t){var r=e[t];null!=r&&null!=r.then?r.then(function(e){a(t,e)},function(e){n(e)}):a(t,r)})(o)})},n5.resolve=function(e){return new n5(function(t,n){t(e)})},n5.reject=function(e){return new n5(function(t,n){n(e)})};var n7="u">typeof Promise?Promise:n5,re=function(e,t,n){var r=D(e),i=this._private=Y({duration:1e3},t,n);if(i.target=e,i.style=i.style||i.css,i.started=!1,i.playing=!1,i.hooked=!1,i.applying=!1,i.progress=0,i.completes=[],i.frames=[],i.complete&&y(i.complete)&&i.completes.push(i.complete),!r){var a=e.position();i.startPosition=i.startPosition||{x:a.x,y:a.y},i.startStyle=i.startStyle||e.cy().style().getAnimationStartStyle(e,i.style)}if(r){var o=e.pan();i.startPan={x:o.x,y:o.y},i.startZoom=e.zoom()}this.length=1,this[0]=this},rt=re.prototype;Y(rt,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),T(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(t,n){var r=e[t];null!=r&&(e[t]=e[n],e[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var i=e.style[r],a=i.name,o=e.startStyle[a];e.startStyle[a]=i,e.style[r]=o}return t&&this.play(),this},promise:function(e){var t,n=this._private;return t="frame"===e?n.frames:n.completes,new n7(function(e,n){t.push(function(){e()})})}}),rt.complete=rt.completed,rt.run=rt.play,rt.running=rt.playing;var rn=Array.isArray,rr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ri=/^\w*$/,ra=function(e,t){if(rn(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||ed(e))||ri.test(e)||!rr.test(e)||null!=t&&e in Object(t)},ro=function(e){if(!W(e))return!1;var t=eh(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},rs=Q["__core-js_shared__"],rl=(iE=/[^.]+$/.exec(rs&&rs.keys&&rs.keys.IE_PROTO||""))?"Symbol(src)_1."+iE:"",ru=Function.prototype.toString,rc=function(e){if(null!=e){try{return ru.call(e)}catch(e){}try{return e+""}catch(e){}}return""},rh=/^\[object .+?Constructor\]$/,rd=Object.prototype,rp=Function.prototype.toString,rf=rd.hasOwnProperty,rg=RegExp("^"+rp.call(rf).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rv=function(e,t){var n,r=null==e?void 0:e[t];return W(n=r)&&(!rl||!(rl in n))&&(ro(n)?rg:rh).test(rc(n))?r:void 0},ry=rv(Object,"create"),rm=Object.prototype.hasOwnProperty,rb=Object.prototype.hasOwnProperty;function rx(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}rx.prototype.clear=function(){this.__data__=ry?ry(null):{},this.size=0},rx.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},rx.prototype.get=function(e){var t=this.__data__;if(ry){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return rm.call(t,e)?t[e]:void 0},rx.prototype.has=function(e){var t=this.__data__;return ry?void 0!==t[e]:rb.call(t,e)},rx.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ry&&void 0===t?"__lodash_hash_undefined__":t,this};var rw=function(e,t){return e===t||e!=e&&t!=t},rE=function(e,t){for(var n=e.length;n--;)if(rw(e[n][0],t))return n;return -1},rT=Array.prototype.splice;function r_(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}r_.prototype.clear=function(){this.__data__=[],this.size=0},r_.prototype.delete=function(e){var t=this.__data__,n=rE(t,e);return!(n<0)&&(n==t.length-1?t.pop():rT.call(t,n,1),--this.size,!0)},r_.prototype.get=function(e){var t=this.__data__,n=rE(t,e);return n<0?void 0:t[n][1]},r_.prototype.has=function(e){return rE(this.__data__,e)>-1},r_.prototype.set=function(e,t){var n=this.__data__,r=rE(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var rk=rv(Q,"Map"),rD=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},rC=function(e,t){var n=e.__data__;return rD(t)?n["string"==typeof t?"string":"hash"]:n.map};function rA(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function rS(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(rS.Cache||rA),n}rA.prototype.clear=function(){this.size=0,this.__data__={hash:new rx,map:new(rk||r_),string:new rx}},rA.prototype.delete=function(e){var t=rC(this,e).delete(e);return this.size-=t?1:0,t},rA.prototype.get=function(e){return rC(this,e).get(e)},rA.prototype.has=function(e){return rC(this,e).has(e)},rA.prototype.set=function(e,t){var n=rC(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},rS.Cache=rA;var rN=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rL=/\\(\\)?/g,rI=(i_=(iT=rS(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rN,function(e,n,r,i){t.push(r?i.replace(rL,"$1"):n||e)}),t},function(e){return 500===i_.size&&i_.clear(),e})).cache,iT),rO=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},rM=1/0,rP=er?er.prototype:void 0,rR=rP?rP.toString:void 0,rF=function e(t){if("string"==typeof t)return t;if(rn(t))return rO(t,e)+"";if(ed(t))return rR?rR.call(t):"";var n=t+"";return"0"==n&&1/t==-rM?"-0":n},rB=function(e){return null==e?"":rF(e)},rz=function(e,t){return rn(e)?e:ra(e,t)?[e]:rI(rB(e))},rG=1/0,rY=function(e){if("string"==typeof e||ed(e))return e;var t=e+"";return"0"==t&&1/e==-rG?"-0":t},rV=function(e,t){t=rz(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[rY(t[n++])];return n&&n==r?e:void 0},rX=function(e,t,n){var r=null==e?void 0:rV(e,t);return void 0===r?n:r},rj=function(){try{var e=rv(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),rU=function(e,t,n){"__proto__"==t&&rj?rj(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},rH=Object.prototype.hasOwnProperty,rq=function(e,t,n){var r=e[t];rH.call(e,t)&&rw(r,n)&&(void 0!==n||t in e)||rU(e,t,n)},rW=/^(?:0|[1-9]\d*)$/,r$=function(e,t){var n=typeof e;return!!(t=null!=t?t:9007199254740991)&&("number"==n||"symbol"!=n&&rW.test(e))&&e>-1&&e%1==0&&e<t},rK=function(e,t,n,r){if(!W(e))return e;t=rz(t,e);for(var i=-1,a=t.length,o=a-1,s=e;null!=s&&++i<a;){var l=rY(t[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)break;if(i!=o){var c=s[l];void 0===(u=r?r(c,l,s):void 0)&&(u=W(c)?c:r$(t[i+1])?[]:{})}rq(s,l,u),s=s[l]}return e},rZ=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},rQ={};[{animated:function(){return function(){var e=void 0!==this.length;if(!(this._private.cy||this).styleEnabled())return!1;var t=(e?this:[this])[0];if(t)return t._private.animation.current.length>0}},clearQueue:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var t=0;t<e.length;t++)e[t]._private.animation.queue=[];return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var n=void 0!==this.length,r=n?this:[this],i=this._private.cy||this,a=!n,o=!a;if(!i.styleEnabled())return this;var s=i.style();if(0===Object.keys(e=Y({},e,t)).length)return new re(r[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(o&&(e.style=s.getPropsList(e.style||e.css),e.css=void 0),o&&null!=e.renderedPosition){var l=e.renderedPosition,u=i.pan(),c=i.zoom();e.position=tl(l,c,u)}if(a&&null!=e.panBy){var h=e.panBy,p=i.pan();e.pan={x:p.x+h.x,y:p.y+h.y}}var f=e.center||e.centre;if(a&&null!=f){var g=i.getCenterPan(f.eles,e.zoom);null!=g&&(e.pan=g)}if(a&&null!=e.fit){var v=e.fit,y=i.getFitViewport(v.eles||v.boundingBox,v.padding);null!=y&&(e.pan=y.pan,e.zoom=y.zoom)}if(a&&x(e.zoom)){var b=i.getZoomedViewport(e.zoom);null!=b?(b.zoomed&&(e.zoom=b.zoom),b.panned&&(e.pan=b.pan)):e.zoom=null}return new re(r[0],e)}},animate:function(){return function(e,t){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=Y({},e,t));for(var r=0;r<n.length;r++){var i=n[r],a=i.animated()&&(void 0===e.queue||e.queue);i.animation(e,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var a=n[i],o=a._private,s=o.animation.current,l=0;l<s.length;l++){var u=s[l]._private;t&&(u.duration=0)}e&&(o.animation.queue=[]),t||(o.animation.current=[])}return r.notify("draw"),this}}},{data:function(e){return e=Y({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}},e),function(t,n){var r,a=e,o=void 0!==this.length,s=o?this:[this],l=o?this[0]:this;if(v(t)){var u,c=-1!==t.indexOf(".")&&(rn(t)?rO(t,rY):ed(t)?[t]:rZ(rI(rB(t))));if(a.allowGetting&&void 0===n)return l&&(a.beforeGet(l),u=c&&void 0===l._private[a.field][t]?rX(l._private[a.field],c):l._private[a.field][t]),u;if(a.allowSetting&&void 0!==n&&!a.immutableKeys[t]){var h=i({},t,n);a.beforeSet(this,h);for(var p=0,f=s.length;p<f;p++){var g,b=s[p];a.canSet(b)&&(c&&void 0===l._private[a.field][t]?null==(g=b._private[a.field])||rK(g,c,n):b._private[a.field][t]=n)}a.updateStyle&&this.updateStyle(),a.onSet(this),a.settingTriggersEvent&&this[a.triggerFnName](a.settingEvent)}}else if(a.allowSetting&&x(t)){var w,E,T=Object.keys(t);a.beforeSet(this,t);for(var _=0;_<T.length;_++)if(E=t[w=T[_]],!a.immutableKeys[w])for(var k=0;k<s.length;k++){var D=s[k];a.canSet(D)&&(D._private[a.field][w]=E)}a.updateStyle&&this.updateStyle(),a.onSet(this),a.settingTriggersEvent&&this[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&y(t))this.on(a.bindingEvent,t);else if(a.allowGetting&&void 0===t)return l&&(a.beforeGet(l),r=l._private[a.field]),r;return this}},removeData:function(e){return e=Y({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var n=e,r=void 0!==this.length?this:[this];if(v(t)){for(var i=t.split(/\s+/),a=i.length,o=0;o<a;o++){var s=i[o];if(!A(s)&&!n.immutableKeys[s])for(var l=0,u=r.length;l<u;l++)r[l]._private[n.field][s]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===t){for(var c=0,h=r.length;c<h;c++)for(var p=r[c]._private[n.field],f=Object.keys(p),g=0;g<f.length;g++){var y=f[g];n.immutableKeys[y]||(p[y]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},{eventAliasesOn:function(e){e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(e,t){var n=this,r=Array.prototype.slice.call(arguments,0);return new n7(function(e,t){var i=r.concat([function(t){n.off.apply(n,a),e(t)}]),a=i.concat([]);n.on.apply(n,i)})}}}].forEach(function(e){Y(rQ,e)});var rJ={animate:rQ.animate(),animation:rQ.animation(),animated:rQ.animated(),clearQueue:rQ.clearQueue(),delay:rQ.delay(),delayAnimation:rQ.delayAnimation(),stop:rQ.stop()},r0={classes:function(e){if(void 0===e){var t=[];return this[0]._private.classes.forEach(function(e){return t.push(e)}),t}b(e)||(e=(e||"").match(/\S+/g)||[]);for(var n=[],r=new e4(e),i=0;i<this.length;i++){for(var a=this[i],o=a._private,s=o.classes,l=!1,u=0;u<e.length;u++){var c=e[u];if(!s.has(c)){l=!0;break}}l||(l=s.size!==e.length),l&&(o.classes=r,n.push(a))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){b(e)||(e=e.match(/\S+/g)||[]);for(var n=void 0===t,r=[],i=0,a=this.length;i<a;i++)for(var o=this[i],s=o._private.classes,l=!1,u=0;u<e.length;u++){var c=e[u],h=s.has(c),p=!1;t||n&&!h?(s.add(c),p=!0):(!t||n&&h)&&(s.delete(c),p=!0),!l&&p&&(r.push(o),l=!0)}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};r0.className=r0.classNames=r0.classes;var r1={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:P,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};r1.variable="(?:[\\w-.]|(?:\\\\"+r1.metaChar+"))+",r1.className="(?:[\\w-]|(?:\\\\"+r1.metaChar+"))+",r1.value=r1.string+"|"+r1.number,r1.id=r1.variable,function(){var e,t,n;for(e=r1.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],r1.comparatorOp+="|@"+t;for(e=r1.comparatorOp.split("|"),n=0;n<e.length;n++)(t=e[n]).indexOf("!")>=0||"="===t||(r1.comparatorOp+="|\\!"+t)}();var r2=function(){return{checks:[]}},r5={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},r3=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return -1*G(e.selector,t.selector)}),r4=function(){for(var e,t={},n=0;n<r3.length;n++)t[(e=r3[n]).selector]=e.matches;return t}(),r9="("+r3.map(function(e){return e.selector}).join("|")+")",r6=function(e){return e.replace(RegExp("\\\\("+r1.metaChar+")","g"),function(e,t){return t})},r8=function(e,t,n){e[e.length-1]=n},r7=[{name:"group",query:!0,regex:"("+r1.group+")",populate:function(e,t,n){var r=a(n,1)[0];t.checks.push({type:r5.GROUP,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:r9,populate:function(e,t,n){var r=a(n,1)[0];t.checks.push({type:r5.STATE,value:r})}},{name:"id",query:!0,regex:"\\#("+r1.id+")",populate:function(e,t,n){var r=a(n,1)[0];t.checks.push({type:r5.ID,value:r6(r)})}},{name:"className",query:!0,regex:"\\.("+r1.className+")",populate:function(e,t,n){var r=a(n,1)[0];t.checks.push({type:r5.CLASS,value:r6(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+r1.variable+")\\s*\\]",populate:function(e,t,n){var r=a(n,1)[0];t.checks.push({type:r5.DATA_EXIST,field:r6(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+r1.variable+")\\s*("+r1.comparatorOp+")\\s*("+r1.value+")\\s*\\]",populate:function(e,t,n){var r=a(n,3),i=r[0],o=r[1],s=r[2];s=null!=RegExp("^"+r1.string+"$").exec(s)?s.substring(1,s.length-1):parseFloat(s),t.checks.push({type:r5.DATA_COMPARE,field:r6(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+r1.boolOp+")\\s*("+r1.variable+")\\s*\\]",populate:function(e,t,n){var r=a(n,2),i=r[0],o=r[1];t.checks.push({type:r5.DATA_BOOL,field:r6(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+r1.meta+")\\s*("+r1.comparatorOp+")\\s*("+r1.number+")\\s*\\]\\]",populate:function(e,t,n){var r=a(n,3),i=r[0],o=r[1],s=r[2];t.checks.push({type:r5.META_COMPARE,field:r6(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:r1.separator,populate:function(e,t){var n=e.currentSubject,r=e.edgeCount,i=e.compoundCount,a=e[e.length-1];return null!=n&&(a.subject=n,e.currentSubject=null),a.edgeCount=r,a.compoundCount=i,e.edgeCount=0,e.compoundCount=0,e[e.length++]=r2()}},{name:"directedEdge",separator:!0,regex:r1.directedEdge,populate:function(e,t){if(null==e.currentSubject){var n=r2(),r=r2();return n.checks.push({type:r5.DIRECTED_EDGE,source:t,target:r}),r8(e,t,n),e.edgeCount++,r}var i=r2(),a=r2();return i.checks.push({type:r5.NODE_SOURCE,source:t,target:a}),r8(e,t,i),e.edgeCount++,a}},{name:"undirectedEdge",separator:!0,regex:r1.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var n=r2(),r=r2();return n.checks.push({type:r5.UNDIRECTED_EDGE,nodes:[t,r]}),r8(e,t,n),e.edgeCount++,r}var i=r2(),a=r2();return i.checks.push({type:r5.NODE_NEIGHBOR,node:t,neighbor:a}),r8(e,t,i),a}},{name:"child",separator:!0,regex:r1.child,populate:function(e,t){if(null==e.currentSubject){var n=r2(),r=r2(),i=e[e.length-1];return n.checks.push({type:r5.CHILD,parent:i,child:r}),r8(e,t,n),e.compoundCount++,r}if(e.currentSubject===t){var a=r2(),o=e[e.length-1],s=r2(),l=r2(),u=r2(),c=r2();return a.checks.push({type:r5.COMPOUND_SPLIT,left:o,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:r5.TRUE}],c.checks.push({type:r5.TRUE}),s.checks.push({type:r5.PARENT,parent:c,child:u}),r8(e,o,a),e.currentSubject=l,e.compoundCount++,u}var h=r2(),p=r2(),f=[{type:r5.PARENT,parent:h,child:p}];return h.checks=t.checks,t.checks=f,e.compoundCount++,p}},{name:"descendant",separator:!0,regex:r1.descendant,populate:function(e,t){if(null==e.currentSubject){var n=r2(),r=r2(),i=e[e.length-1];return n.checks.push({type:r5.DESCENDANT,ancestor:i,descendant:r}),r8(e,t,n),e.compoundCount++,r}if(e.currentSubject===t){var a=r2(),o=e[e.length-1],s=r2(),l=r2(),u=r2(),c=r2();return a.checks.push({type:r5.COMPOUND_SPLIT,left:o,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:r5.TRUE}],c.checks.push({type:r5.TRUE}),s.checks.push({type:r5.ANCESTOR,ancestor:c,descendant:u}),r8(e,o,a),e.currentSubject=l,e.compoundCount++,u}var h=r2(),p=r2(),f=[{type:r5.ANCESTOR,ancestor:h,descendant:p}];return h.checks=t.checks,t.checks=f,e.compoundCount++,p}},{name:"subject",modifier:!0,regex:r1.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return eU("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1].checks[0],r=null==n?null:n.type;r===r5.DIRECTED_EDGE?n.type=r5.NODE_TARGET:r===r5.UNDIRECTED_EDGE&&(n.type=r5.NODE_NEIGHBOR,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];r7.forEach(function(e){return e.regexObj=RegExp("^"+e.regex)});var ie=function(e){for(var t,n,r,i=0;i<r7.length;i++){var a=r7[i],o=a.name,s=e.match(a.regexObj);if(null!=s){n=s,t=a,r=o;var l=s[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:r,remaining:e}},it=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},ir=function(e,t,n){var r,i,a,o=v(e),s=w(e),l=v(n),u=!1,c=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),u=!0),(o||l||u)&&(i=o||s?""+e:"",a=""+n),u&&(e=i=i.toLowerCase(),n=a=a.toLowerCase()),t){case"*=":r=i.indexOf(a)>=0;break;case"$=":r=i.indexOf(a,i.length-a.length)>=0;break;case"^=":r=0===i.indexOf(a);break;case"=":r=e===n;break;case">":h=!0,r=e>n;break;case">=":h=!0,r=e>=n;break;case"<":h=!0,r=e<n;break;case"<=":h=!0,r=e<=n;break;default:r=!1}return c&&(null!=e||!h)&&(r=!r),r},ii=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}},ia=function(e,t){return e.data(t)},io=[],is=function(e,t){return e.checks.every(function(e){return io[e.type](e,t)})};io[r5.GROUP]=function(e,t){var n=e.value;return"*"===n||n===t.group()},io[r5.STATE]=function(e,t){return r4[e.value](t)},io[r5.ID]=function(e,t){var n=e.value;return t.id()===n},io[r5.CLASS]=function(e,t){var n=e.value;return t.hasClass(n)},io[r5.META_COMPARE]=function(e,t){var n=e.field,r=e.operator,i=e.value;return ir(t[n](),r,i)},io[r5.DATA_COMPARE]=function(e,t){var n=e.field,r=e.operator,i=e.value;return ir(ia(t,n),r,i)},io[r5.DATA_BOOL]=function(e,t){var n=e.field,r=e.operator;return ii(ia(t,n),r)},io[r5.DATA_EXIST]=function(e,t){var n=e.field;return e.operator,void 0!==ia(t,n)},io[r5.UNDIRECTED_EDGE]=function(e,t){var n=e.nodes[0],r=e.nodes[1],i=t.source(),a=t.target();return is(n,i)&&is(r,a)||is(r,i)&&is(n,a)},io[r5.NODE_NEIGHBOR]=function(e,t){return is(e.node,t)&&t.neighborhood().some(function(t){return t.isNode()&&is(e.neighbor,t)})},io[r5.DIRECTED_EDGE]=function(e,t){return is(e.source,t.source())&&is(e.target,t.target())},io[r5.NODE_SOURCE]=function(e,t){return is(e.source,t)&&t.outgoers().some(function(t){return t.isNode()&&is(e.target,t)})},io[r5.NODE_TARGET]=function(e,t){return is(e.target,t)&&t.incomers().some(function(t){return t.isNode()&&is(e.source,t)})},io[r5.CHILD]=function(e,t){return is(e.child,t)&&is(e.parent,t.parent())},io[r5.PARENT]=function(e,t){return is(e.parent,t)&&t.children().some(function(t){return is(e.child,t)})},io[r5.DESCENDANT]=function(e,t){return is(e.descendant,t)&&t.ancestors().some(function(t){return is(e.ancestor,t)})},io[r5.ANCESTOR]=function(e,t){return is(e.ancestor,t)&&t.descendants().some(function(t){return is(e.descendant,t)})},io[r5.COMPOUND_SPLIT]=function(e,t){return is(e.subject,t)&&is(e.left,t)&&is(e.right,t)},io[r5.TRUE]=function(){return!0},io[r5.COLLECTION]=function(e,t){return e.value.has(t)},io[r5.FILTER]=function(e,t){return(0,e.value)(t)};var il=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||v(e)&&e.match(/^\s*$/)||(T(e)?this.addQuery({checks:[{type:r5.COLLECTION,value:e.collection()}]}):y(e)?this.addQuery({checks:[{type:r5.FILTER,value:e}]}):v(e)?this.parse(e)||(this.invalid=!0):eX("A selector must be created from a string; found "))},iu=il.prototype;[{parse:function(e){var t=this.inputText=e,n=this[0]=r2();for(this.length=1,t=it(t);;){var r=ie(t);if(null==r.expr)return eU("The selector `"+e+"`is invalid"),!1;var i=r.match.slice(1),a=r.expr.populate(this,n,i);if(!1===a)return!1;if(null!=a&&(n=a),(t=r.remaining).match(/^\s*$/))break}var o=this[this.length-1];null!=this.currentSubject&&(o.subject=this.currentSubject),o.edgeCount=this.edgeCount,o.compoundCount=this.compoundCount;for(var s=0;s<this.length;s++){var l=this[s];if(l.compoundCount>0&&l.edgeCount>0)return eU("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return eU("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&eU("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(e){return null!=e?e:""},t=function(t){return v(t)?'"'+t+'"':e(t)},n=function(e){return" "+e+" "},r=function(r,a){var o=r.type,s=r.value;switch(o){case r5.GROUP:var l=e(s);return l.substring(0,l.length-1);case r5.DATA_COMPARE:return"["+r.field+n(e(r.operator))+t(s)+"]";case r5.DATA_BOOL:var u=r.operator,c=r.field;return"["+e(u)+c+"]";case r5.DATA_EXIST:return"["+r.field+"]";case r5.META_COMPARE:var h=r.operator;return"[["+r.field+n(e(h))+t(s)+"]]";case r5.STATE:return s;case r5.ID:return"#"+s;case r5.CLASS:return"."+s;case r5.PARENT:case r5.CHILD:return i(r.parent,a)+n(">")+i(r.child,a);case r5.ANCESTOR:case r5.DESCENDANT:return i(r.ancestor,a)+" "+i(r.descendant,a);case r5.COMPOUND_SPLIT:var p=i(r.left,a),f=i(r.subject,a),g=i(r.right,a);return p+(p.length>0?" ":"")+f+g;case r5.TRUE:return""}},i=function(e,t){return e.checks.reduce(function(n,i,a){return n+(t===e&&0===a?"$":"")+r(i,t)},"")},a="",o=0;o<this.length;o++){var s=this[o];a+=i(s,s.subject),this.length>1&&o<this.length-1&&(a+=", ")}return this.toStringCache=a,a}},{matches:function(e){for(var t=0;t<this.length;t++)if(is(this[t],e))return!0;return!1},filter:function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===r5.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(e){for(var n=0;n<t.length;n++)if(is(t[n],e))return!0;return!1};return null==t.text()&&(n=function(){return!0}),e.filter(n)}}].forEach(function(e){return Y(iu,e)}),iu.text=function(){return this.inputText},iu.size=function(){return this.length},iu.eq=function(e){return this[e]},iu.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},iu.addQuery=function(e){this[this.length++]=e},iu.selector=iu.toString;var ic={allAre:function(e){var t=new il(e);return this.every(function(e){return t.matches(e)})},is:function(e){var t=new il(e);return this.some(function(e){return t.matches(e)})},some:function(e,t){for(var n=0;n<this.length;n++)if(t?e.apply(t,[this[n],n,this]):e(this[n],n,this))return!0;return!1},every:function(e,t){for(var n=0;n<this.length;n++)if(!(t?e.apply(t,[this[n],n,this]):e(this[n],n,this)))return!1;return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every(function(t){return e.hasElementWithId(t.id())}))},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(e){return t.hasElementWithId(e.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(e){return t.hasElementWithId(e.id())})}};ic.allAreNeighbours=ic.allAreNeighbors,ic.has=ic.contains,ic.equal=ic.equals=ic.same;var ih=function(e,t){return function(n,r,i,a){if(null==n?o="":T(n)&&1===n.length&&(o=n.id()),1!==this.length||!o)return e.call(this,n,r,i,a);var o,s=this[0]._private,l=s.traversalCache=s.traversalCache||{},u=l[t]=l[t]||[],c=eI(o);return u[c]||(u[c]=e.call(this,n,r,i,a))}},id={parent:function(e){var t=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&t.push(i)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n].parents();t=(t=t||r).intersect(r)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isChild()}).filter(e)},children:ih(function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this[n],i=r._private.children,a=0;a<i.length;a++)t.push(i[a]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return function e(n){for(var r=0;r<n.length;r++){var i=n[r];t.push(i),i.children().nonempty()&&e(i.children())}}(this.children()),this.spawn(t,!0).filter(e)}};function ip(e,t,n,r){for(var i=[],a=new e4,o=e.cy(),s=o.hasCompoundNodes(),l=0;l<e.length;l++){var u=e[l];n?i.push(u):s&&r(i,a,u)}for(;i.length>0;){var c=i.shift();t(c),a.add(c.id()),s&&r(i,a,c)}return e}function ig(e,t,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var a=r[i];t.has(a.id())||e.push(a)}}function iv(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}function iy(e,t,n){iv(e,t,n),ig(e,t,n)}id.forEachDown=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return ip(this,e,t,ig)},id.forEachUp=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return ip(this,e,t,iv)},id.forEachUpAndDown=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return ip(this,e,t,iy)},id.ancestors=id.parents,(ik=iD={data:rQ.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:rQ.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:rQ.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:rQ.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:rQ.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:rQ.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}}).attr=ik.data,ik.removeAttr=ik.removeData;var im={};function ib(e){return function(t){if(void 0===t&&(t=!0),0!==this.length&&!(!this.isNode()||this.removed())){for(var n=0,r=this[0],i=r._private.edges,a=0;a<i.length;a++){var o=i[a];!t&&o.isLoop()||(n+=e(r,o))}return n}}}function ix(e,t){return function(n){for(var r,i=this.nodes(),a=0;a<i.length;a++){var o=i[a][e](n);void 0!==o&&(void 0===r||t(o,r))&&(r=o)}return r}}Y(im,{degree:ib(function(e,t){return t.source().same(t.target())?2:1}),indegree:ib(function(e,t){return t.target().same(e)?1:0}),outdegree:ib(function(e,t){return t.source().same(e)?1:0})}),Y(im,{minDegree:ix("degree",function(e,t){return e<t}),maxDegree:ix("degree",function(e,t){return e>t}),minIndegree:ix("indegree",function(e,t){return e<t}),maxIndegree:ix("indegree",function(e,t){return e>t}),minOutdegree:ix("outdegree",function(e,t){return e<t}),maxOutdegree:ix("outdegree",function(e,t){return e>t})}),Y(im,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}});var iw,iE,iT,i_,ik,iD,iC,iA,iS=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(!i.locked()){var a=i._private.position,o={x:null!=t.x?t.x-a.x:0,y:null!=t.y?t.y-a.y:0};i.isParent()&&!(0===o.x&&0===o.y)&&i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},iN={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){iS(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};(iC=iA={position:rQ.data(iN),silentPosition:rQ.data(Y({},iN,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){iS(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(x(e))t?this.silentPosition(e):this.position(e);else if(y(e)){var n=this.cy();n.startBatch();for(var r=0;r<this.length;r++){var i=this[r],a=void 0;(a=e(i,r))&&(t?i.silentPosition(a):i.position(a))}n.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var r;if(x(e)?(r={x:w(e.x)?e.x:0,y:w(e.y)?e.y:0},n=t):v(e)&&w(t)&&((r={x:0,y:0})[e]=t),null!=r){var i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var s=o.position(),l={x:s.x+r.x,y:s.y+r.y};n?o.silentPosition(l):o.position(l)}}i.endBatch()}return this},silentShift:function(e,t){return x(e)?this.shift(e,!0):v(e)&&w(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],r=this.cy(),i=r.zoom(),a=r.pan(),o=x(e)?e:void 0,s=void 0!==o||void 0!==t&&v(e);if(n&&n.isNode()){if(!s)return o=ts(n.position(),i,a),void 0===e?o:o[e];for(var l=0;l<this.length;l++){var u=this[l];void 0!==t?u.position(e,(t-a[e])/i):void 0!==o&&u.position(tl(o,i,a))}}else if(!s)return;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),i=x(e)?e:void 0,a=void 0!==i||void 0!==t&&v(e),o=r.hasCompoundNodes();if(n&&n.isNode()){if(a)for(var s=0;s<this.length;s++){var l=this[s],u=o?l.parent():null,c=u&&u.length>0;c&&(u=u[0]);var h=c?u.position():{x:0,y:0};void 0!==t?l.position(e,t+h[e]):void 0!==i&&l.position({x:i.x+h.x,y:i.y+h.y})}else{var p=n.position(),f=o?n.parent():null,g=f&&f.length>0;g&&(f=f[0]);var y=g?f.position():{x:0,y:0};return i={x:p.x-y.x,y:p.y-y.y},void 0===e?i:i[e]}}else if(!a)return;return this}}).modelPosition=iC.point=iC.position,iC.modelPositions=iC.points=iC.positions,iC.renderedPoint=iC.renderedPosition,iC.relativePoint=iC.relativePosition,or=oi={},oi.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),a=t.x1*r+i.x,o=t.x2*r+i.x,s=t.y1*r+i.y,l=t.y2*r+i.y;return{x1:a,x2:o,y1:s,y2:l,w:o-a,h:l-s}},oi.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()&&this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,e||t.emitAndNotify("bounds")}}),this},oi.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes()||!e&&t.batching())return this;for(var n=0;n<this.length;n++){var r=this[n],i=r._private;(!i.compoundBoundsClean||e)&&(function(e){if(e.isParent()){var t=e._private,n=e.children(),r="include"===e.pstyle("compound-sizing-wrt-labels").value,i={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},a=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),o=t.position;(0===a.w||0===a.h)&&((a={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=o.x-a.w/2,a.x2=o.x+a.w/2,a.y1=o.y-a.h/2,a.y2=o.y+a.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var l=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(l=100*l/i.width.val);var u=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(u=100*u/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var h=b(i.width.val-a.w,s,l),p=h.biasDiff,f=h.biasComplementDiff,g=b(i.height.val-a.h,u,c),v=g.biasDiff,y=g.biasComplementDiff;t.autoPadding=function(e,t,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return e>0?n.pfValue*e:0;case"height":return t>0?n.pfValue*t:0;case"average":return e>0&&t>0?n.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?n.pfValue*t:n.pfValue*e:0;case"max":return e>0&&t>0?e>t?n.pfValue*e:n.pfValue*t:0;default:return 0}}(a.w,a.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(a.w,i.width.val),o.x=(-p+a.x1+a.x2+f)/2,t.autoHeight=Math.max(a.h,i.height.val),o.y=(-v+a.y1+a.y2+y)/2}function b(e,t,n){var r=0,i=0,a=t+n;return e>0&&a>0&&(r=t/a*e,i=n/a*e),{biasDiff:r,biasComplementDiff:i}}}(r),t.batching()||(i.compoundBoundsClean=!0))}return this};var iL=function(e){return e===1/0||e===-1/0?0:e},iI=function(e,t,n,r,i){r-t==0||i-n==0||null==t||null==n||null==r||null==i||(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},iO=function(e,t){return null==t?e:iI(e,t.x1,t.y1,t.x2,t.y2)},iM=function(e,t,n){return e0(e,t,n)},iP=function(e,t,n){if(!t.cy().headless()){var r,i,a=t._private,o=a.rstyle,s=o.arrowWidth/2;if("none"!==t.pstyle(n+"-arrow-shape").value){"source"===n?(r=o.srcX,i=o.srcY):"target"===n?(r=o.tgtX,i=o.tgtY):(r=o.midX,i=o.midY);var l=a.arrowBounds=a.arrowBounds||{},u=l[n]=l[n]||{};u.x1=r-s,u.y1=i-s,u.x2=r+s,u.y2=i+s,u.w=u.x2-u.x1,u.h=u.y2-u.y1,tA(u,1),iI(e,u.x1,u.y1,u.x2,u.y2)}}},iR=function(e,t,n){if(!t.cy().headless()){a=n?n+"-":"";var r=t._private,i=r.rstyle;if(t.pstyle(a+"label").strValue){var a,o,s,l,u,c=t.pstyle("text-halign"),h=t.pstyle("text-valign"),p=iM(i,"labelWidth",n),f=iM(i,"labelHeight",n),g=iM(i,"labelX",n),v=iM(i,"labelY",n),y=t.pstyle(a+"text-margin-x").pfValue,b=t.pstyle(a+"text-margin-y").pfValue,x=t.isEdge(),w=t.pstyle(a+"text-rotation"),E=t.pstyle("text-outline-width").pfValue,T=t.pstyle("text-border-width").pfValue/2,_=t.pstyle("text-background-padding").pfValue,k=p/2,D=f/2;if(x)o=g-k,s=g+k,l=v-D,u=v+D;else{switch(c.value){case"left":o=g-p,s=g;break;case"center":o=g-k,s=g+k;break;case"right":o=g,s=g+p}switch(h.value){case"top":l=v-f,u=v;break;case"center":l=v-D,u=v+D;break;case"bottom":l=v,u=v+f}}o+=y-Math.max(E,T)-_-2,s+=y+Math.max(E,T)+_+2,l+=b-Math.max(E,T)-_-2,u+=b+Math.max(E,T)+_+2;var C=n||"main",A=r.labelBounds,S=A[C]=A[C]||{};S.x1=o,S.y1=l,S.x2=s,S.y2=u,S.w=s-o,S.h=u-l;var N=x&&"autorotate"===w.strValue,L=null!=w.pfValue&&0!==w.pfValue;if(N||L){var I=N?iM(r.rstyle,"labelAngle",n):w.pfValue,O=Math.cos(I),M=Math.sin(I),P=(o+s)/2,R=(l+u)/2;if(!x){switch(c.value){case"left":P=s;break;case"right":P=o}switch(h.value){case"top":R=u;break;case"bottom":R=l}}var F=function(e,t){return{x:(e-=P)*O-(t-=R)*M+P,y:e*M+t*O+R}},B=F(o,l),z=F(o,u),G=F(s,l),Y=F(s,u);o=Math.min(B.x,z.x,G.x,Y.x),s=Math.max(B.x,z.x,G.x,Y.x),l=Math.min(B.y,z.y,G.y,Y.y),u=Math.max(B.y,z.y,G.y,Y.y)}var V=C+"Rot",X=A[V]=A[V]||{};X.x1=o,X.y1=l,X.x2=s,X.y2=u,X.w=s-o,X.h=u-l,iI(e,o,l,s,u),iI(r.labelBounds.all,o,l,s,u)}return e}},iF=function(e,t){var n,r,i,a,o,s,l=e._private.cy,u=l.styleEnabled(),c=l.headless(),h=t_(),p=e._private,f=e.isNode(),g=e.isEdge(),v=p.rstyle,y=f&&u?e.pstyle("bounds-expansion").pfValue:[0],b=function(e){return"none"!==e.pstyle("display").value},x=!u||b(e)&&(!g||b(e.source())&&b(e.target()));if(x){var w=0;u&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(w=e.pstyle("overlay-padding").value);var E=0;u&&t.includeUnderlays&&0!==e.pstyle("underlay-opacity").value&&(E=e.pstyle("underlay-padding").value);var T=Math.max(w,E),_=0;if(u&&(_=e.pstyle("width").pfValue/2),f&&t.includeNodes){var k=e.position();o=k.x,s=k.y;var D=e.outerWidth()/2,C=e.outerHeight()/2;n=o-D,r=o+D,iI(h,n,i=s-C,r,a=s+C)}else if(g&&t.includeEdges){if(u&&!c){var A,S=e.pstyle("curve-style").strValue;if(n=Math.min(v.srcX,v.midX,v.tgtX),r=Math.max(v.srcX,v.midX,v.tgtX),i=Math.min(v.srcY,v.midY,v.tgtY),a=Math.max(v.srcY,v.midY,v.tgtY),n-=_,r+=_,iI(h,n,i-=_,r,a+=_),"haystack"===S){var N=v.haystackPts;if(N&&2===N.length){if(n=N[0].x,i=N[0].y,r=N[1].x,a=N[1].y,n>r){var L=n;n=r,r=L}if(i>a){var I=i;i=a,a=I}iI(h,n-_,i-_,r+_,a+_)}}else if("bezier"===S||"unbundled-bezier"===S||"segments"===S||"taxi"===S){switch(S){case"bezier":case"unbundled-bezier":A=v.bezierPts;break;case"segments":case"taxi":A=v.linePts}if(null!=A)for(var O=0;O<A.length;O++){var M=A[O];n=M.x-_,r=M.x+_,iI(h,n,i=M.y-_,r,a=M.y+_)}}}else{var P=e.source().position(),R=e.target().position();if(n=P.x,r=R.x,i=P.y,a=R.y,n>r){var F=n;n=r,r=F}if(i>a){var B=i;i=a,a=B}n-=_,r+=_,iI(h,n,i-=_,r,a+=_)}}if(u&&t.includeEdges&&g&&(iP(h,e,"mid-source"),iP(h,e,"mid-target"),iP(h,e,"source"),iP(h,e,"target")),u&&"yes"===e.pstyle("ghost").value){var z=e.pstyle("ghost-offset-x").pfValue,G=e.pstyle("ghost-offset-y").pfValue;iI(h,h.x1+z,h.y1+G,h.x2+z,h.y2+G)}var Y=p.bodyBounds=p.bodyBounds||{};tN(Y,h),tS(Y,y),tA(Y,1),u&&(n=h.x1,r=h.x2,i=h.y1,a=h.y2,iI(h,n-T,i-T,r+T,a+T));var V=p.overlayBounds=p.overlayBounds||{};tN(V,h),tS(V,y),tA(V,1);var X=p.labelBounds=p.labelBounds||{};null!=X.all?tk(X.all):X.all=t_(),u&&t.includeLabels&&(t.includeMainLabels&&iR(h,e,null),g&&(t.includeSourceLabels&&iR(h,e,"source"),t.includeTargetLabels&&iR(h,e,"target")))}return h.x1=iL(h.x1),h.y1=iL(h.y1),h.x2=iL(h.x2),h.y2=iL(h.y2),h.w=iL(h.x2-h.x1),h.h=iL(h.y2-h.y1),h.w>0&&h.h>0&&x&&(tS(h,y),tA(h,1)),h},iB=function(e){var t=0,n=function(e){return(e?1:0)<<t++};return 0+(n(e.incudeNodes)+n(e.includeEdges)+n(e.includeLabels)+n(e.includeMainLabels)+n(e.includeSourceLabels)+n(e.includeTargetLabels)+n(e.includeOverlays))},iz=function(e){if(!e.isEdge())return 0;var t=e.source().position(),n=e.target().position(),r=function(e){return Math.round(e)};return eL([r(t.x),r(t.y),r(n.x),r(n.y)])},iG=function(e,t){var n,r=e._private,i=e.isEdge(),a=null==t?iV:iB(t),o=iz(e),s=r.bbCachePosKey===o,l=t.useCache&&s,u=function(e){return null==e._private.bbCache||e._private.styleDirty};if(!l||u(e)||i&&u(e.source())||u(e.target())?(s||e.recalculateRenderedStyle(l),n=iF(e,iY),r.bbCache=n,r.bbCachePosKey=o):n=r.bbCache,a!==iV){var c=e.isNode();n=t_(),(t.includeNodes&&c||t.includeEdges&&!c)&&(t.includeOverlays?iO(n,r.overlayBounds):iO(n,r.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?iO(n,r.labelBounds.all):(t.includeMainLabels&&iO(n,r.labelBounds.mainRot),t.includeSourceLabels&&iO(n,r.labelBounds.sourceRot),t.includeTargetLabels&&iO(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},iY={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},iV=iB(iY),iX=eK(iY);oi.boundingBox=function(e){var t;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==e&&void 0!==e.useCache&&!0!==e.useCache){t=t_();var n=iX(e=e||iY);if(this.cy().styleEnabled())for(var r=0;r<this.length;r++){var i=this[r],a=i._private,o=iz(i),s=a.bbCachePosKey===o,l=n.useCache&&s&&!a.styleDirty;i.recalculateRenderedStyle(l)}this.updateCompoundBounds(!e.useCache);for(var u=0;u<this.length;u++)iO(t,iG(this[u],n))}else e=void 0===e?iY:iX(e),t=iG(this[0],e);return t.x1=iL(t.x1),t.y1=iL(t.y1),t.x2=iL(t.x2),t.y2=iL(t.y2),t.w=iL(t.x2-t.x1),t.h=iL(t.y2-t.y1),t},oi.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},oi.boundingBoxAt=function(e){var t,n=this.nodes(),r=this.cy(),i=r.hasCompoundNodes(),a=r.collection();if(i&&(a=n.filter(function(e){return e.isParent()}),n=n.not(a)),x(e)){var o=e;e=function(){return o}}r.startBatch(),n.forEach(function(t,n){return t._private.bbAtOldPos=e(t,n)}).silentPositions(e),i&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var s={x1:(t=this.boundingBox({useCache:!1})).x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h};return n.silentPositions(function(e){return e._private.bbAtOldPos}),i&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),s},or.boundingbox=or.bb=or.boundingBox,or.renderedBoundingbox=or.renderedBoundingBox,oa=oo={};var ij=function(e){e.uppercaseName=M(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=M(e.outerName),oa[e.name]=function(){var t=this[0],n=t._private,r=n.cy._private.styleEnabled;if(t){if(!r)return 1;if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var i=t.pstyle(e.name);return"label"===i.strValue?(t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0):i.pfValue}},oa["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private.cy._private.styleEnabled;if(t)return n?t[e.name]()+t.pstyle("border-width").pfValue+2*t.padding():1},oa["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},oa["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};ij({name:"width"}),ij({name:"height"}),oo.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},oo.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},oo.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var iU=function(e,t){if(e.isEdge())return t(e)},iH=function(e,t){if(e.isEdge()){var n=e.cy();return ts(t(e),n.zoom(),n.pan())}},iq=function(e,t){if(e.isEdge()){var n=e.cy(),r=n.pan(),i=n.zoom();return t(e).map(function(e){return ts(e,i,r)})}},iW={controlPoints:{get:function(e){return e.renderer().getControlPoints(e)},mult:!0},segmentPoints:{get:function(e){return e.renderer().getSegmentPoints(e)},mult:!0},sourceEndpoint:{get:function(e){return e.renderer().getSourceEndpoint(e)}},targetEndpoint:{get:function(e){return e.renderer().getTargetEndpoint(e)}},midpoint:{get:function(e){return e.renderer().getEdgeMidpoint(e)}}},i$=Y({},iA,oi,oo,Object.keys(iW).reduce(function(e,t){var n=iW[t],r="rendered"+t[0].toUpperCase()+t.substr(1);return e[t]=function(){return iU(this,n.get)},n.mult?e[r]=function(){return iq(this,n.get)}:e[r]=function(){return iH(this,n.get)},e},{})),iK=function(e,t){this.recycle(e,t)};function iZ(){return!1}function iQ(){return!0}iK.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=iZ,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?iQ:iZ):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=iQ;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=iQ;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=iQ,this.stopPropagation()},isDefaultPrevented:iZ,isPropagationStopped:iZ,isImmediatePropagationStopped:iZ};var iJ=/^([^.]+)(\.(?:[^.]+))?$/,i0={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},i1=Object.keys(i0),i2={};function i5(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i2,t=arguments.length>1?arguments[1]:void 0,n=0;n<i1.length;n++){var r=i1[n];this[r]=e[r]||i0[r]}this.context=t||this.context,this.listeners=[],this.emitting=0}var i3=i5.prototype,i4=function(e,t,n,r,i,a,o){y(r)&&(i=r,r=null),o&&(a=null==a?o:Y({},a,o));for(var s=b(n)?n:n.split(/\s+/),l=0;l<s.length;l++){var u=s[l];if(!A(u)){var c=u.match(iJ);if(c&&!1===t(e,u,c[1],c[2]?c[2]:null,r,i,a))break}}},i9=function(e,t){return e.addEventFields(e.context,t),new iK(t.type,t)},i6=function(e,t,n){if("event"===g(n)){t(e,n);return}if(x(n)){t(e,i9(e,n));return}for(var r=b(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var a=r[i];if(!A(a)){var o=a.match(iJ);if(o){var s=i9(e,{type:o[1],namespace:o[2]?o[2]:null,target:e.context});t(e,s)}}}};i3.on=i3.addListener=function(e,t,n,r,i){return i4(this,function(e,t,n,r,i,a,o){y(a)&&e.listeners.push({event:t,callback:a,type:n,namespace:r,qualifier:i,conf:o})},e,t,n,r,i),this},i3.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})},i3.removeListener=i3.off=function(e,t,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var a=this.listeners,o=function(o){var s=a[o];i4(i,function(t,n,r,i,l,u){if((s.type===r||"*"===e)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!l||t.qualifierCompare(s.qualifier,l))&&(!u||s.callback===u))return a.splice(o,1),!1},e,t,n,r)},s=a.length-1;s>=0;s--)o(s);return this},i3.removeAllListeners=function(){return this.removeListener("*")},i3.emit=i3.trigger=function(e,t,n){var r=this.listeners,i=r.length;return this.emitting++,b(t)||(t=[t]),i6(this,function(e,a){null!=n&&(i=(r=[{event:a.event,type:a.type,namespace:a.namespace,callback:n}]).length);for(var o=0;o<i;o++)(function(n){var i=r[n];if(i.type===a.type&&(!i.namespace||i.namespace===a.namespace||".*"===i.namespace)&&e.eventMatches(e.context,i,a)){var o=[a];null!=t&&eJ(o,t),e.beforeEmit(e.context,i,a),i.conf&&i.conf.one&&(e.listeners=e.listeners.filter(function(e){return e!==i}));var s=e.callbackContext(e.context,i,a),l=i.callback.apply(s,o);e.afterEmit(e.context,i,a),!1===l&&(a.stopPropagation(),a.preventDefault())}})(o);e.bubble(e.context)&&!a.isPropagationStopped()&&e.parent(e.context).emit(a,t)},e),this.emitting--,this};var i8={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&_(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},i7=function(e){return v(e)?new il(e):e},ae={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new i5(i8,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var r=i7(t),i=0;i<this.length;i++)this[i].emitter().on(e,r,n);return this},removeListener:function(e,t,n){for(var r=i7(t),i=0;i<this.length;i++)this[i].emitter().removeListener(e,r,n);return this},removeAllListeners:function(){for(var e=0;e<this.length;e++)this[e].emitter().removeAllListeners();return this},one:function(e,t,n){for(var r=i7(t),i=0;i<this.length;i++)this[i].emitter().one(e,r,n);return this},once:function(e,t,n){for(var r=i7(t),i=0;i<this.length;i++)this[i].emitter().on(e,r,n,{once:!0,onceCollection:this})},emit:function(e,t){for(var n=0;n<this.length;n++)this[n].emitter().emit(e,t);return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};rQ.eventAliasesOn(ae);var at={nodes:function(e){return this.filter(function(e){return e.isNode()}).filter(e)},edges:function(e){return this.filter(function(e){return e.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?e.push(r):t.push(r)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(v(e)||T(e))return new il(e).filter(this);if(y(e)){for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r];(t?e.apply(t,[i,r,this]):e(i,r,this))&&n.push(i)}return n}return this.spawn()},not:function(e){if(!e)return this;v(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var r=this[n];e.has(r)||t.push(r)}return t},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(v(e))return this.filter(e);for(var t=this.spawn(),n=this.length<e.length,r=n?this:e,i=n?e:this,a=0;a<r.length;a++){var o=r[a];i.has(o)&&t.push(o)}return t},xor:function(e){var t=this._private.cy;v(e)&&(e=t.$(e));var n=this.spawn(),r=e,i=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=i._private.data.id;t.hasElementWithId(a)||n.push(i)}};return i(this,r),i(r,this),n},diff:function(e){var t=this._private.cy;v(e)&&(e=t.$(e));var n=this.spawn(),r=this.spawn(),i=this.spawn(),a=e,o=function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r],o=a._private.data.id;t.hasElementWithId(o)?i.merge(a):n.push(a)}};return o(this,a,n),o(a,this,r),{left:n,right:r,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(v(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=this.spawnSelf(),i=0;i<e.length;i++){var a=e[i];this.has(a)||r.push(a)}return r},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&v(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=t.map,a=0;a<e.length;a++){var o=e[a],s=o._private.data.id;if(!i.has(s)){var l=this.length++;this[l]=o,i.set(s,{ele:o,index:l})}}return this},unmergeAt:function(e){var t=this[e].id(),n=this._private.map;this[e]=void 0,n.delete(t);var r=e===this.length-1;if(this.length>1&&!r){var i=this.length-1,a=this[i],o=a._private.data.id;this[i]=void 0,this[e]=a,n.set(o,{ele:a,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,r=t.map.get(n);if(!r)return this;var i=r.index;return this.unmergeAt(i),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&v(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--)e(this[t])&&this.unmergeAt(t);return this},map:function(e,t){for(var n=[],r=0;r<this.length;r++){var i=this[r],a=t?e.apply(t,[i,r,this]):e(i,r,this);n.push(a)}return n},reduce:function(e,t){for(var n=t,r=0;r<this.length;r++)n=e(n,this[r],r,this);return n},max:function(e,t){for(var n,r=-1/0,i=0;i<this.length;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);o>r&&(r=o,n=a)}return{value:r,ele:n}},min:function(e,t){for(var n,r=1/0,i=0;i<this.length;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);o<r&&(r=o,n=a)}return{value:r,ele:n}}};at.u=at["|"]=at["+"]=at.union=at.or=at.add,at["\\"]=at["!"]=at["-"]=at.difference=at.relativeComplement=at.subtract=at.not,at.n=at["&"]=at["."]=at.and=at.intersection=at.intersect,at["^"]=at["(+)"]=at["(-)"]=at.symmetricDifference=at.symdiff=at.xor,at.fnFilter=at.filterFn=at.stdFilter=at.filter,at.complement=at.abscomp=at.absoluteComplement;var an=function(e,t){var n=e.cy().hasCompoundNodes();function r(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?n?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?eB:0}var i=r(e)-r(t);if(0!==i)return i;function a(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}var o=a(e)-a(t);if(0!==o)return o;var s=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==s?s:e.poolIndex()-t.poolIndex()},ar={forEach:function(e,t){if(y(e))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(t?e.apply(t,[i,r,this]):e(i,r,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;null==t&&(t=r),null==e&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var i=e;i>=0&&i<t&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!y(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(an)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var n=t.data.parent?e.parents().size():0;return e.isParent()?n:eB-1}var r=t.source,i=t.target;return Math.max(r.zDepth(),i.zDepth(),0)}}};ar.each=ar.forEach,os="undefined",(typeof Symbol>"u"?"undefined":e(Symbol))!=os&&e(Symbol.iterator)!=os&&(ar[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},n=0,r=this.length;return i({next:function(){return n<r?t.value=e[n++]:(t.value=void 0,t.done=!0),t}},Symbol.iterator,function(){return this})});var ai=eK({nodeDimensionsIncludeLabels:!1}),aa={layoutDimensions:function(e){if(e=ai(e),this.takesUpSpace()){if(e.nodeDimensionsIncludeLabels){var t,n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()}}else t={w:0,h:0};return(0===t.w||0===t.h)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var r=this.nodes().filter(function(e){return!e.isParent()}),i=this.cy(),a=t.eles,o=function(e){return e.id()},s=N(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(e,t,n){var r={x:t.x1+t.w/2,y:t.y1+t.h/2},i={x:(n.x-r.x)*e,y:(n.y-r.y)*e};return{x:r.x+i.x,y:r.y+i.y}},u=t.spacingFactor&&1!==t.spacingFactor,c=function(){if(!u)return null;for(var e=t_(),t=0;t<r.length;t++){var n=s(r[t],t);tC(e,n.x,n.y)}return e}(),h=N(function(e,n){var r=s(e,n);return u&&(r=l(Math.abs(t.spacingFactor),c,r)),null!=t.transform&&(r=t.transform(e,r)),r},o);if(t.animate){for(var p=0;p<r.length;p++){var f=r[p],g=h(f,p);if(null==t.animateFilter||t.animateFilter(f,p)){var v=f.animation({position:g,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(v)}else f.position(g)}if(t.fit){var y=i.animation({fit:{boundingBox:a.boundingBoxAt(h),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}else if(void 0!==t.zoom&&void 0!==t.pan){var b=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(b)}e.animations.forEach(function(e){return e.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),n7.all(e.animations.map(function(e){return e.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else r.positions(h),t.fit&&i.fit(t.eles,t.padding),null!=t.zoom&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(Y({},e,{eles:this}))}};function ao(e,t,n){var r,i=n._private,a=i.styleCache=i.styleCache||[];return null!=(r=a[e])||(r=a[e]=t(n)),r}function as(e,t){return e=eI(e),function(n){return ao(e,t,n)}}function al(e,t){e=eI(e);var n=function(e){return t.call(e)};return function(){var t=this[0];if(t)return ao(e,n,t)}}aa.createLayout=aa.makeLayout=aa.layout;var au={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,t=this.cy(),n=function(e){return e._private.styleCache=null};return t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(n)):this.forEach(function(e){n(e),e.connectedEdges().forEach(n)}),this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var n=t.hasCompoundNodes(),r=this;e=!!(e||void 0===e),n&&(r=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var i=r;return e?i.emitAndNotify("style"):i.emit("style"),r.forEach(function(e){return e._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[e];return null!=i?i:t?r.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(x(e))r.applyBypass(this,e,!1),this.emitAndNotify("style");else if(v(e)){if(void 0===t){var i=this[0];return i?r.getStylePropertyValue(i,e):void 0}r.applyBypass(this,e,t,!1),this.emitAndNotify("style")}else if(void 0===e){var a=this[0];return a?r.getRawStyle(a):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=t.style();if(void 0===e)for(var r=0;r<this.length;r++){var i=this[r];n.removeAllBypasses(i,!1)}else{e=e.split(/\s+/);for(var a=0;a<this.length;a++){var o=this[a];n.removeBypasses(o,e,!1)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!t)return i;var a=r.data.parent?n.parents():null;if(a)for(var o=0;o<a.length;o++)i*=a[o].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();if(e)return t?0===e.effectiveOpacity():0===e.pstyle("opacity").value},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function ac(e,t){var n=e._private.data.parent?e.parents():null;if(n){for(var r=0;r<n.length;r++)if(!t(n[r]))return!1}return!0}function ah(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var i=this[0],a=e.hasCompoundNodes();if(i){var o=i._private;if(!t(i))return!1;if(i.isNode())return!a||ac(i,r);var s=o.source,l=o.target;return n(s)&&(!a||ac(s,n))&&(s===l||n(l)&&(!a||ac(l,n)))}}}var ad=as("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});au.takesUpSpace=al("takesUpSpace",ah({ok:ad}));var ap=as("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&ad(e)}),af=as("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&ad(e)});au.interactive=al("interactive",ah({ok:ap,parentOk:af,edgeOkViaNode:ad})),au.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var ag=as("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&ad(e)});au.visible=al("visible",ah({ok:ag,edgeOkViaNode:ad})),au.hidden=function(){var e=this[0];if(e)return!e.visible()},au.isBundledBezier=al("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),au.bypass=au.css=au.style,au.renderedCss=au.renderedStyle,au.removeBypass=au.removeCss=au.removeStyle,au.pstyle=au.parsedStyle;var av={};function ay(e){return function(){var t=arguments,n=[];if(2===t.length){var r=t[0],i=t[1];this.on(e.event,r,i)}else if(1===t.length&&y(t[0])){var a=t[0];this.on(e.event,a)}else if(0===t.length||1===t.length&&b(t[0])){for(var o=1===t.length?t[0]:null,s=0;s<this.length;s++){var l=this[s],u=!e.ableField||l._private[e.ableField],c=l._private[e.field]!=e.value;if(e.overrideAble){var h=e.overrideAble(l);if(void 0!==h&&(u=h,!h))return this}u&&(l._private[e.field]=e.value,c&&n.push(l))}var p=this.spawn(n);p.updateStyle(),p.emit(e.event),o&&p.emit(o)}return this}}function am(e){av[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},av[e.on]=ay({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),av[e.off]=ay({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}am({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),am({field:"grabbable",overrideField:function(e){return!(e.cy().autoungrabify()||e.pannable())&&void 0},on:"grabify",off:"ungrabify"}),am({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),am({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),av.deselect=av.unselect,av.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},am({field:"active",on:"activate",off:"unactivate"}),am({field:"pannable",on:"panify",off:"unpanify"}),av.inactive=function(){var e=this[0];if(e)return!e._private.active};var ab={},ax=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var a=!1,o=i.connectedEdges(),s=0;s<o.length;s++){var l=o[s],u=l.source(),c=l.target();if(e.noIncomingEdges&&c===i&&u!==i||e.noOutgoingEdges&&u===i&&c!==i){a=!0;break}}a||n.push(i)}}return this.spawn(n,!0).filter(t)}},aw=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target();e.outgoing&&l===i?(n.push(s),n.push(u)):e.incoming&&u===i&&(n.push(s),n.push(l))}}return this.spawn(n,!0).filter(t)}},aE=function(e){return function(t){for(var n=this,r=[],i={};;){var a=e.outgoing?n.outgoers():n.incomers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var l=a[s],u=l.id();i[u]||(i[u]=!0,r.push(l),o=!0)}if(!o)break;n=a}return this.spawn(r,!0).filter(t)}};function aT(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[e.attr];i&&n.push(i)}return this.spawn(n,!0).filter(t)}}function a_(e){return function(t){var n=[],r=this._private.cy,i=e||{};v(t)&&(t=r.$(t));for(var a=0;a<t.length;a++)for(var o=t[a]._private.edges,s=0;s<o.length;s++){var l=o[s],u=l._private.data,c=this.hasElementWithId(u.source)&&t.hasElementWithId(u.target),h=t.hasElementWithId(u.source)&&this.hasElementWithId(u.target);(c||h)&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}function ak(e){return e=Y({},{codirected:!1},e),function(t){for(var n=[],r=this.edges(),i=e,a=0;a<r.length;a++)for(var o=r[a],s=o._private,l=s.source,u=l._private.data.id,c=s.data.target,h=l._private.edges,p=0;p<h.length;p++){var f=h[p],g=f._private.data,v=g.target,y=g.source,b=v===c&&y===u,x=u===v&&c===y;(i.codirected&&b||!i.codirected&&(b||x))&&n.push(f)}return this.spawn(n,!0).filter(t)}}ab.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},Y(ab,{roots:ax({noIncomingEdges:!0}),leaves:ax({noOutgoingEdges:!0}),outgoers:ih(aw({outgoing:!0}),"outgoers"),successors:aE({outgoing:!0}),incomers:ih(aw({incoming:!0}),"incomers"),predecessors:aE({incoming:!0})}),Y(ab,{neighborhood:ih(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),ab.neighbourhood=ab.neighborhood,ab.closedNeighbourhood=ab.closedNeighborhood,ab.openNeighbourhood=ab.openNeighborhood,Y(ab,{source:ih(function(e){var t,n=this[0];return n&&(t=n._private.source||n.cy().collection()),t&&e?t.filter(e):t},"source"),target:ih(function(e){var t,n=this[0];return n&&(t=n._private.target||n.cy().collection()),t&&e?t.filter(e):t},"target"),sources:aT({attr:"source"}),targets:aT({attr:"target"})}),Y(ab,{edgesWith:ih(a_(),"edgesWith"),edgesTo:ih(a_({thisIsSrc:!0}),"edgesTo")}),Y(ab,{connectedEdges:ih(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,a=0;a<i.length;a++){var o=i[a];t.push(o)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:ih(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(t.push(r.source()[0]),t.push(r.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:ih(ak(),"parallelEdges"),codirectedEdges:ih(ak({codirected:!0}),"codirectedEdges")}),Y(ab,{components:function(e){var t=this,n=t.cy(),r=n.collection(),i=null==e?t.nodes():e.nodes(),a=[];null!=e&&i.empty()&&(i=e.sources());var o=function(e,t){r.merge(e),i.unmerge(e),t.merge(e)};if(i.empty())return t.spawn();do(function(){var e=n.collection();a.push(e);var r=i[0];o(r,e),t.bfs({directed:!1,roots:r,visit:function(t){return o(t,e)}}),e.forEach(function(n){n.connectedEdges().forEach(function(n){t.has(n)&&e.has(n.source())&&e.has(n.target())&&e.merge(n)})})})();while(i.length>0)return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),ab.componentsOf=ab.components;var aD=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0===e){eX("A collection must have a reference to the core");return}var i=new e5,a=!1;if(t){if(t.length>0&&x(t[0])&&!_(t[0])){a=!0;for(var o=[],s=new e4,l=0,u=t.length;l<u;l++){var c=t[l];null==c.data&&(c.data={});var h=c.data;if(null==h.id)h.id=eq();else if(e.hasElementWithId(h.id)||s.has(h.id))continue;var p=new e9(e,c,!1);o.push(p),s.add(h.id)}t=o}}else t=[];this.length=0;for(var f=0,g=t.length;f<g;f++){var v=t[f][0];if(null!=v){var y=v._private.data.id;(!n||!i.has(y))&&(n&&i.set(y,{index:this.length,ele:v}),this[this.length]=v,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var e=this.lazyMap=new e5,t=this.eles,n=0;n<t.length;n++){var r=t[n];e.set(r.id(),{index:n,ele:r})}}},n&&(this._private.map=i),a&&!r&&this.restore()},aC=e9.prototype=aD.prototype=Object.create(Array.prototype);aC.instanceString=function(){return"collection"},aC.spawn=function(e,t){return new aD(this.cy(),e,t)},aC.spawnSelf=function(){return this.spawn(this)},aC.cy=function(){return this._private.cy},aC.renderer=function(){return this._private.cy.renderer()},aC.element=function(){return this[0]},aC.collection=function(){return k(this)?this:new aD(this._private.cy,[this])},aC.unique=function(){return new aD(this._private.cy,this,!0)},aC.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},aC.getElementById=function(e){e=""+e;var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new aD(t)},aC.$id=aC.getElementById,aC.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},aC.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},aC.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},aC.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null!=t){var r=t._private;if(x(e)){if(n.startBatch(),e.data){t.data(e.data);var i=r.data;if(t.isEdge()){var a=!1,o={},s=e.data.source,l=e.data.target;null!=s&&s!=i.source&&(o.source=""+s,a=!0),null!=l&&l!=i.target&&(o.target=""+l,a=!0),a&&(t=t.move(o))}else{var u="parent"in e.data,c=e.data.parent;u&&(null!=c||null!=i.parent)&&c!=i.parent&&(void 0===c&&(c=null),null!=c&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var h=function(n,i,a){var o=e[n];null!=o&&o!==r[n]&&(o?t[i]():t[a]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var p={data:eH(r.data),position:eH(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};p.classes="";var f=0;return r.classes.forEach(function(e){return p.classes+=0==f++?e:" "+e}),p}}},aC.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].json();e.push(n)}return e},aC.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n].json(),i=new e9(e,r,!1);t.push(i)}return new aD(e,t)},aC.copy=aC.clone,aC.restore=function(){for(var e,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=this.cy(),i=r._private,a=[],o=[],s=0,l=this.length;s<l;s++){var u=this[s];n&&!u.removed()||(u.isNode()?a.push(u):o.push(u))}e=a.concat(o);var c,h=function(){e.splice(c,1),c--};for(c=0;c<e.length;c++){var p=e[c],f=p._private,g=f.data;if(p.clearTraversalCache(),!(!n&&!f.removed)){if(void 0===g.id)g.id=eq();else if(w(g.id))g.id=""+g.id;else if(A(g.id)||!v(g.id)){eX("Can not create element with invalid string ID `"+g.id+"`"),h();continue}else if(r.hasElementWithId(g.id)){eX("Can not create second element with ID `"+g.id+"`"),h();continue}}var y=g.id;if(p.isNode()){var b=f.position;null==b.x&&(b.x=0),null==b.y&&(b.y=0)}if(p.isEdge()){for(var x=["source","target"],E=x.length,T=!1,_=0;_<E;_++){var k=x[_],D=g[k];w(D)&&(D=g[k]=""+g[k]),null==D||""===D?(eX("Can not create edge `"+y+"` with unspecified "+k),T=!0):r.hasElementWithId(D)||(eX("Can not create edge `"+y+"` with nonexistant "+k+" `"+D+"`"),T=!0)}if(T){h();continue}var C=r.getElementById(g.source),S=r.getElementById(g.target);C.same(S)?C._private.edges.push(p):(C._private.edges.push(p),S._private.edges.push(p)),p._private.source=C,p._private.target=S}f.map=new e5,f.map.set(y,{ele:p,index:0}),f.removed=!1,n&&r.addToPool(p)}for(var N=0;N<a.length;N++){var L=a[N],I=L._private.data;w(I.parent)&&(I.parent=""+I.parent);var O=I.parent;if(null!=O||L._private.parent){var M=L._private.parent?r.collection().merge(L._private.parent):r.getElementById(O);if(M.empty())I.parent=void 0;else if(M[0].removed())eU("Node added with missing parent, reference to parent removed"),I.parent=void 0,L._private.parent=null;else{for(var P=!1,R=M;!R.empty();){if(L.same(R)){P=!0,I.parent=void 0;break}R=R.parent()}P||(M[0]._private.children.push(L),L._private.parent=M[0],i.hasCompoundNodes=!0)}}}if(e.length>0){for(var F=e.length===this.length?this:new aD(r,e),B=0;B<F.length;B++){var z=F[B];z.isNode()||(z.parallelEdges().clearTraversalCache(),z.source().clearTraversalCache(),z.target().clearTraversalCache())}(i.hasCompoundNodes?r.collection().merge(F).merge(F.connectedNodes()).merge(F.parent()):F).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?F.emitAndNotify("add"):n&&F.emit("add")}return this},aC.removed=function(){var e=this[0];return e&&e._private.removed},aC.inside=function(){var e=this[0];return e&&!e._private.removed},aC.remove=function(){for(var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=[],r={},i=this._private.cy,a=0,o=this.length;a<o;a++)(function e(i){var a=r[i.id()];t&&i.removed()||a||(r[i.id()]=!0,i.isNode()?(n.push(i),function(t){for(var n=t._private.edges,r=0;r<n.length;r++)e(n[r])}(i),function(t){for(var n=t._private.children,r=0;r<n.length;r++)e(n[r])}(i)):n.unshift(i))})(this[a]);function s(e,t){eZ(e._private.edges,t),e.clearTraversalCache()}var l=[];l.ids={},this.dirtyCompoundBoundsCache(),t&&i.removeFromPool(n);for(var u=0;u<n.length;u++){var c=n[u];if(c.isEdge()){var h=c.source()[0],p=c.target()[0];s(h,c),s(p,c);for(var f=c.parallelEdges(),g=0;g<f.length;g++){var v=f[g];(function(e){e.clearTraversalCache()})(v),v.isBundledBezier()&&v.dirtyBoundingBoxCache()}}else{var y=c.parent();0!==y.length&&function(e,t){t=t[0];var n=(e=e[0])._private.children,r=e.id();eZ(n,t),t._private.parent=null,l.ids[r]||(l.ids[r]=!0,l.push(e))}(y,c)}t&&(c._private.removed=!0)}var b=i._private.elements;i._private.hasCompoundNodes=!1;for(var x=0;x<b.length;x++)if(b[x].isParent()){i._private.hasCompoundNodes=!0;break}var w=new aD(this.cy(),n);w.size()>0&&(e?w.emitAndNotify("remove"):t&&w.emit("remove"));for(var E=0;E<l.length;E++){var T=l[E];t&&T.removed()||T.updateStyle()}return w},aC.move=function(e){var t=this._private.cy,n=this,r=function(e){return null==e?e:""+e};if(void 0!==e.source||void 0!==e.target){var i=r(e.source),a=r(e.target),o=null!=i&&t.hasElementWithId(i),s=null!=a&&t.hasElementWithId(a);(o||s)&&(t.batch(function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var t=n[e],r=t._private.data;t.isEdge()&&(o&&(r.source=i),s&&(r.target=a))}n.restore(!1,!1)}),n.emitAndNotify("move"))}else if(void 0!==e.parent){var l=r(e.parent);if(null===l||t.hasElementWithId(l)){var u=null===l?void 0:l;t.batch(function(){var e=n.remove(!1,!1);e.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var r=n[t],i=r._private.data;r.isNode()&&(i.parent=u)}e.restore(!1,!1)}),n.emitAndNotify("move")}}return this},[n2,rJ,r0,ic,id,iD,im,i$,ae,at,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},ar,aa,au,av,ab].forEach(function(e){Y(aC,e)});var aA=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}return function n(r,i,a){var o,s,l,u,c,h,p,f,g,v={x:-1,v:0,tension:null,friction:null},y=[0],b=0,x=1/1e4;for(r=parseFloat(r)||500,i=parseFloat(i)||20,a=a||null,v.tension=r,v.friction=i,g=(f=null!==a)?(b=n(r,i))/a*.016:.016;s={dx:(o=d||v).v,dv:e(o)},l=t(o,.5*g,s),u=t(o,.5*g,l),c=t(o,g,u),h=1/6*(s.dx+2*(l.dx+u.dx)+c.dx),p=1/6*(s.dv+2*(l.dv+u.dv)+c.dv),o.x=o.x+h*g,o.v=o.v+p*g,y.push(1+o.x),b+=16,Math.abs(o.x)>x&&Math.abs(o.v)>x;);return f?function(e){return y[e*(y.length-1)|0]}:b}}(),aS=function(e,t,n,r){var i=function(e,t,n,r){var i="u">typeof Float32Array;if(4!=arguments.length)return!1;for(var a=0;a<4;++a)if("number"!=typeof arguments[a]||isNaN(arguments[a])||!isFinite(arguments[a]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var o=i?new Float32Array(11):Array(11);function s(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}function l(e,t,n){return 3*(1-3*n+3*t)*e*e+2*(3*n-6*t)*e+3*t}var u=!1,c=function(i){return u||(u=!0,(e!==t||n!==r)&&function(){for(var t=0;t<11;++t)o[t]=s(.1*t,e,n)}()),e===t&&n===r?i:0===i?0:1===i?1:s(function(t){for(var r=0,i=1;10!==i&&o[i]<=t;++i)r+=.1;var a=r+(t-o[--i])/(o[i+1]-o[i])*.1,u=l(a,e,n);return u>=.001?function(t,r){for(var i=0;i<4;++i){var a=l(r,e,n);if(0===a)break;var o=s(r,e,n)-t;r-=o/a}return r}(t,a):0===u?a:function(t,r,i){var a,o,l=0;do(a=s(o=r+(i-r)/2,e,n)-t)>0?i=o:r=o;while(Math.abs(a)>1e-7&&++l<10)return o}(t,r,r+.1)}(i),t,r)};c.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var h="generateBezier("+[e,t,n,r]+")";return c.toString=function(){return h},c}(e,t,n,r);return function(e,t,n){return e+(t-e)*i(n)}},aN={linear:function(e,t,n){return e+(t-e)*n},ease:aS(.25,.1,.25,1),"ease-in":aS(.42,0,1,1),"ease-out":aS(0,0,.58,1),"ease-in-out":aS(.42,0,.58,1),"ease-in-sine":aS(.47,0,.745,.715),"ease-out-sine":aS(.39,.575,.565,1),"ease-in-out-sine":aS(.445,.05,.55,.95),"ease-in-quad":aS(.55,.085,.68,.53),"ease-out-quad":aS(.25,.46,.45,.94),"ease-in-out-quad":aS(.455,.03,.515,.955),"ease-in-cubic":aS(.55,.055,.675,.19),"ease-out-cubic":aS(.215,.61,.355,1),"ease-in-out-cubic":aS(.645,.045,.355,1),"ease-in-quart":aS(.895,.03,.685,.22),"ease-out-quart":aS(.165,.84,.44,1),"ease-in-out-quart":aS(.77,0,.175,1),"ease-in-quint":aS(.755,.05,.855,.06),"ease-out-quint":aS(.23,1,.32,1),"ease-in-out-quint":aS(.86,0,.07,1),"ease-in-expo":aS(.95,.05,.795,.035),"ease-out-expo":aS(.19,1,.22,1),"ease-in-out-expo":aS(1,0,0,1),"ease-in-circ":aS(.6,.04,.98,.335),"ease-out-circ":aS(.075,.82,.165,1),"ease-in-out-circ":aS(.785,.135,.15,.86),spring:function(e,t,n){if(0===n)return aN.linear;var r=aA(e,t,n);return function(e,t,n){return e+(t-e)*r(n)}},"cubic-bezier":aS};function aL(e,t,n,r,i){if(1===r||t===n)return n;var a=i(t,n,r);return null==e||((e.roundValue||e.color)&&(a=Math.round(a)),void 0!==e.min&&(a=Math.max(a,e.min)),void 0!==e.max&&(a=Math.min(a,e.max))),a}function aI(e,t){return null!=e.pfValue||null!=e.value?null!=e.pfValue&&(null==t||"%"!==t.type.units)?e.pfValue:e.value:e}function aO(e,t,n,r,i){var a=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var o=aI(e,i),s=aI(t,i);if(w(o)&&w(s))return aL(a,o,s,n,r);if(b(o)&&b(s)){for(var l=[],u=0;u<s.length;u++){var c=o[u],h=s[u];if(null!=c&&null!=h){var p=aL(a,c,h,n,r);l.push(p)}else l.push(h)}return l}}function aM(e,t){return null!=e&&null!=t&&(!!(w(e)&&w(t))||!!(e&&t))}function aP(e,t){var n=t._private.aniEles,r=[];function i(t,n){var i=t._private,a=i.animation.current,o=i.animation.queue,s=!1;if(0===a.length){var l=o.shift();l&&a.push(l)}for(var u=function(e){for(var t=e.length-1;t>=0;t--)(0,e[t])();e.splice(0,e.length)},c=a.length-1;c>=0;c--){var h=a[c],p=h._private;if(p.stopped){a.splice(c,1),p.hooked=!1,p.playing=!1,p.started=!1,u(p.frames);continue}(p.playing||p.applying)&&(p.playing&&p.applying&&(p.applying=!1),p.started||function(e,t,n,r){var i=t._private;i.started=!0,i.startTime=n-i.progress*i.duration}(0,h,e),function(e,t,n,r){var i=!r,a=e._private,o=t._private,s=o.easing,l=o.startTime,u=(r?e:e.cy()).style();o.easingImpl||(null==s?o.easingImpl=aN.linear:(c=v(s)?u.parse("transition-timing-function",s).value:s,v(c)?(h=c,p=[]):(h=c[1],p=c.slice(2).map(function(e){return+e})),p.length>0?("spring"===h&&p.push(o.duration),o.easingImpl=aN[h].apply(null,p)):o.easingImpl=aN[h]));var c,h,p,f,g=o.easingImpl;if(f=0===o.duration?1:(n-l)/o.duration,o.applying&&(f=o.progress),f<0?f=0:f>1&&(f=1),null==o.delay){var y=o.startPosition,b=o.position;if(b&&i&&!e.locked()){var x={};aM(y.x,b.x)&&(x.x=aO(y.x,b.x,f,g)),aM(y.y,b.y)&&(x.y=aO(y.y,b.y,f,g)),e.position(x)}var w=o.startPan,E=o.pan,T=a.pan,_=null!=E&&r;_&&(aM(w.x,E.x)&&(T.x=aO(w.x,E.x,f,g)),aM(w.y,E.y)&&(T.y=aO(w.y,E.y,f,g)),e.emit("pan"));var k=o.startZoom,D=o.zoom,C=null!=D&&r;C&&(aM(k,D)&&(a.zoom=tT(a.minZoom,aO(k,D,f,g),a.maxZoom)),e.emit("zoom")),(_||C)&&e.emit("viewport");var A=o.style;if(A&&A.length>0&&i){for(var S=0;S<A.length;S++){var N=A[S],L=N.name,I=o.startStyle[L],O=u.properties[I.name],M=aO(I,N,f,g,O);u.overrideBypass(e,L,M)}e.emit("style")}}o.progress=f}(t,h,e,n),p.applying&&(p.applying=!1),u(p.frames),null!=p.step&&p.step(e),h.completed()&&(a.splice(c,1),p.hooked=!1,p.playing=!1,p.started=!1,u(p.completes)),s=!0)}return n||0!==a.length||0!==o.length||r.push(t),s}for(var a=!1,o=0;o<n.length;o++){var s=i(n[o]);a=a||s}var l=i(t,!0);(a||l)&&(n.length>0?t.notify("draw",n):t.notify("draw")),n.unmerge(r),t.emit("step")}var aR={animate:rQ.animate(),animation:rQ.animation(),animated:rQ.animated(),clearQueue:rQ.clearQueue(),delay:rQ.delay(),delayAnimation:rQ.delayAnimation(),stop:rQ.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender(function(t,n){aP(n,e)},t.beforeRenderPriorities.animations):function t(){e._private.animationsRunning&&ek(function(n){aP(n,e),t()})}()}}},aF={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&_(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e}},aB=function(e){return v(e)?new il(e):e},az={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new i5(aF,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,aB(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,aB(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,aB(t),n),this},once:function(e,t,n){return this.emitter().one(e,aB(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};rQ.eventAliasesOn(az);var aG={png:function(e){return e=e||{},this._private.renderer.png(e)},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};aG.jpeg=aG.jpg;var aY={layout:function(e){if(null==e){eX("Layout options must be specified to make a layout");return}if(null==e.name){eX("A `name` must be specified to make a layout");return}var t,n=e.name,r=this.extension("layout",n);if(null==r){eX("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}return t=v(e.eles)?this.$(e.eles):null!=e.eles?e.eles:this.$(),new r(Y({},e,{cy:this,eles:t}))}};aY.createLayout=aY.makeLayout=aY.layout;var aV=eK({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),aX={renderTo:function(e,t,n,r){return this._private.renderer.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this.extension("renderer",e.name);if(null==t){eX("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}void 0!==e.wheelSensitivity&&eU("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=aV(e);n.cy=this,this._private.renderer=new t(n),this.notify("init")},destroyRenderer:function(){this.notify("destroy");var e=this.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};aX.invalidateDimensions=aX.resize;var aj={collection:function(e,t){return v(e)?this.$(e):T(e)?e.collection():b(e)?(t||(t={}),new aD(this,e,t.unique,t.removed)):new aD(this)},nodes:function(e){var t=this.$(function(e){return e.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(e){return e.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};aj.elements=aj.filter=aj.$;var aU={};aU.apply=function(e){for(var t=this._private,n=t.cy,r=n.collection(),i=0;i<e.length;i++){var a=e[i],o=this.getContextMeta(a);if(!o.empty){var s=this.getContextStyle(o),l=this.applyContextStyle(o,s,a);a._private.appliedInitStyle?this.updateTransitions(a,l.diffProps):a._private.appliedInitStyle=!0,this.updateStyleHints(a)&&r.push(a)}}return r},aU.getPropertiesDiff=function(e,t){var n=this._private.propDiffs=this._private.propDiffs||{},r=e+"-"+t,i=n[r];if(i)return i;for(var a=[],o={},s=0;s<this.length;s++){var l=this[s],u="t"===e[s],c="t"===t[s],h=u!==c,p=l.mappedProperties.length>0;if(h||c&&p){var f=void 0;h&&p||h?f=l.properties:p&&(f=l.mappedProperties);for(var g=0;g<f.length;g++){for(var v=f[g],y=v.name,b=!1,x=s+1;x<this.length;x++){var w=this[x];if("t"===t[x]&&(b=null!=w.properties[v.name]))break}o[y]||b||(o[y]=!0,a.push(y))}}}return n[r]=a,a},aU.getContextMeta=function(e){for(var t,n="",r=e._private.styleCxtKey||"",i=0;i<this.length;i++){var a=this[i];a.selector&&a.selector.matches(e)?n+="t":n+="f"}return t=this.getPropertiesDiff(r,n),e._private.styleCxtKey=n,{key:n,diffPropNames:t,empty:0===t.length}},aU.getContextStyle=function(e){var t=e.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[t])return n[t];for(var r={_private:{key:t}},i=0;i<this.length;i++){var a=this[i];if("t"===t[i])for(var o=0;o<a.properties.length;o++){var s=a.properties[o];r[s.name]=s}}return n[t]=r,r},aU.applyContextStyle=function(e,t,n){for(var r=e.diffPropNames,i={},a=this.types,o=0;o<r.length;o++){var s=r[o],l=t[s],u=n.pstyle(s);if(!l){if(!u)continue;l=u.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(u!==l){if(l.mapped===a.fn&&null!=u&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(n))===c.prevFnValue)continue}var h=i[s]={prev:u};this.applyParsedProperty(n,l),h.next=n.pstyle(s),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}},aU.updateStyleHints=function(e){var t=e._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,a=function(e,t,r){return n.getPropertiesHash(e,t,r)},o=t.styleKey;if(e.removed())return!1;var s="nodes"===t.group,l=e._private.style;r=Object.keys(l);for(var u=0;u<i.length;u++){var c=i[u];t.styleKeys[c]=[9261,5381]}for(var h=function(e,n){return t.styleKeys[n][0]=eC(e,t.styleKeys[n][0])},p=function(e,n){return t.styleKeys[n][1]=eA(e,t.styleKeys[n][1])},f=function(e,t){for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);h(r,t),p(r,t)}},g=0;g<r.length;g++){var v=r[g],y=l[v];if(null!=y){var b,x,w=this.properties[v],E=w.type,T=w.groupKey,_=void 0;null!=w.hashOverride?_=w.hashOverride(e,y):null!=y.pfValue&&(_=y.pfValue);var k=null==w.enums?y.value:null,D=null!=_,C=null!=k,A=D||C,S=y.units;E.number&&A&&!E.multiple?(h(x=-128<(b=D?_:k)&&b<128&&Math.floor(b)!==b?2e9-(1024*b|0):b,T),p(x,T),D||null==S||f(S,T)):f(y.strValue,T)}}for(var N=[9261,5381],L=0;L<i.length;L++){var I=i[L],O=t.styleKeys[I];N[0]=eC(O[0],N[0]),N[1]=eA(O[1],N[1])}t.styleKey=2097152*N[0]+N[1];var M=t.styleKeys;t.labelDimsKey=eS(M.labelDimensions);var P=a(e,["label"],M.labelDimensions);if(t.labelKey=eS(P),t.labelStyleKey=eS(eN(M.commonLabel,P)),!s){var R=a(e,["source-label"],M.labelDimensions);t.sourceLabelKey=eS(R),t.sourceLabelStyleKey=eS(eN(M.commonLabel,R));var F=a(e,["target-label"],M.labelDimensions);t.targetLabelKey=eS(F),t.targetLabelStyleKey=eS(eN(M.commonLabel,F))}if(s){var B=t.styleKeys,z=B.nodeBody,G=B.nodeBorder,Y=B.backgroundImage,V=B.compound,X=B.pie,j=[z,G,Y,V,X].filter(function(e){return null!=e}).reduce(eN,[9261,5381]);t.nodeKey=eS(j),t.hasPie=null!=X&&9261!==X[0]&&5381!==X[1]}return o!==t.styleKey},aU.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},aU.applyParsedProperty=function(e,t){var n,r=this,i=t,a=e._private.style,o=r.types,s=r.properties[i.name].type,l=i.bypass,u=a[i.name],c=u&&u.bypass,h=e._private,p="mapping",f=function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},g=function(){var t=f(u),n=f(i);r.checkTriggers(e,i.name,t,n)};if(i&&"pie"===i.name.substr(0,3)&&eU("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(i=t=this.parse(t.name,"bezier",l)),i.delete)return a[i.name]=void 0,g(),!0;if(i.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,g(),!0):(g(),!0);if(i.deleteBypass)return u?!!u.bypass&&(a[i.name]=u.bypassed,g(),!0):(g(),!0);var v=function(){eU("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case o.mapData:for(var y,b=i.field.split("."),x=h.data,E=0;E<b.length&&x;E++)x=x[b[E]];if(null==x)return v(),!1;if(!w(x))return eU("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+x+"` for `"+e.id()+"` is non-numeric)"),!1;var T=i.fieldMax-i.fieldMin;if((y=0===T?0:(x-i.fieldMin)/T)<0?y=0:y>1&&(y=1),s.color){var _=i.valueMin[0],k=i.valueMax[0],D=i.valueMin[1],C=i.valueMax[1],A=i.valueMin[2],S=i.valueMax[2],N=null==i.valueMin[3]?1:i.valueMin[3],L=[Math.round(_+(k-_)*y),Math.round(D+(C-D)*y),Math.round(A+(S-A)*y),Math.round(N+((null==i.valueMax[3]?1:i.valueMax[3])-N)*y)];n={bypass:i.bypass,name:i.name,value:L,strValue:"rgb("+L[0]+", "+L[1]+", "+L[2]+")"}}else{if(!s.number)return!1;var I=i.valueMin+(i.valueMax-i.valueMin)*y;n=this.parse(i.name,I,i.bypass,p)}if(!n)return v(),!1;n.mapping=i,i=n;break;case o.data:for(var O=i.field.split("."),M=h.data,P=0;P<O.length&&M;P++)M=M[O[P]];if(null!=M&&(n=this.parse(i.name,M,i.bypass,p)),!n)return v(),!1;n.mapping=i,i=n;break;case o.fn:var R=i.value,F=null!=i.fnValue?i.fnValue:R(e);if(i.prevFnValue=F,null==F)return eU("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(n=this.parse(i.name,F,i.bypass,p)))return eU("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+e.id()+"` is invalid)"),!1;n.mapping=eH(i),i=n;break;case void 0:break;default:return!1}return l?(c?i.bypassed=u.bypassed:i.bypassed=u,a[i.name]=i):c?u.bypassed=i:a[i.name]=i,g(),!0},aU.cleanElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),t)for(var i=r._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],l=i[s];null!=l&&(l.bypass?l.bypassed=null:i[s]=null)}else r._private.style={}}},aU.update=function(){this._private.cy.mutableElements().updateStyle()},aU.updateTransitions=function(e,t){var n=this,r=e._private,i=e.pstyle("transition-property").value,a=e.pstyle("transition-duration").pfValue,o=e.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],h=e.pstyle(c),p=t[c];if(p){var f=p.prev,g=null!=p.next?p.next:h,v=!1,y=void 0;f&&(w(f.pfValue)&&w(g.pfValue)?(v=g.pfValue-f.pfValue,y=f.pfValue+1e-6*v):w(f.value)&&w(g.value)?(v=g.value-f.value,y=f.value+1e-6*v):b(f.value)&&b(g.value)&&(v=f.value[0]!==g.value[0]||f.value[1]!==g.value[1]||f.value[2]!==g.value[2],y=f.strValue),v&&(s[c]=g.strValue,this.applyBypass(e,c,y),l=!0))}}if(!l)return;r.transitioning=!0,new n7(function(t){o>0?e.delayAnimation(o).play().promise().then(t):t()}).then(function(){return e.animation({style:s,duration:a,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1)},aU.checkTrigger=function(e,t,n,r,i,a){var o=this.properties[t],s=i(o);null!=s&&s(n,r)&&a(o)},aU.checkZOrderTrigger=function(e,t,n,r){var i=this;this.checkTrigger(e,t,n,r,function(e){return e.triggersZOrder},function(){i._private.cy.notify("zorder",e)})},aU.checkBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(e){return e.triggersBounds},function(i){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),i.triggersBoundsOfParallelBeziers&&("curve-style"===t&&("bezier"===n||"bezier"===r)||"display"===t&&("none"===n||"none"===r))&&e.parallelEdges().forEach(function(e){e.isBundledBezier()&&e.dirtyBoundingBoxCache()})})},aU.checkTriggers=function(e,t,n,r){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,r),this.checkBoundsTrigger(e,t,n,r)};var aH={};aH.applyBypass=function(e,t,n,r){var i=[];if("*"===t||"**"===t){if(void 0!==n)for(var a=0;a<this.properties.length;a++){var o=this.properties[a].name,s=this.parse(o,n,!0);s&&i.push(s)}}else if(v(t)){var l=this.parse(t,n,!0);l&&i.push(l)}else{if(!x(t))return!1;r=n;for(var u=Object.keys(t),c=0;c<u.length;c++){var h=u[c],p=t[h];if(void 0===p&&(p=t[I(h)]),void 0!==p){var f=this.parse(h,p,!0);f&&i.push(f)}}}if(0===i.length)return!1;for(var g=!1,y=0;y<e.length;y++){for(var b=e[y],w={},E=void 0,T=0;T<i.length;T++){var _=i[T];if(r){var k=b.pstyle(_.name);E=w[_.name]={prev:k}}g=this.applyParsedProperty(b,eH(_))||g,r&&(E.next=b.pstyle(_.name))}g&&this.updateStyleHints(b),r&&this.updateTransitions(b,w,!0)}return g},aH.overrideBypass=function(e,t,n){t=L(t);for(var r=0;r<e.length;r++){var i=e[r],a=i._private.style[t],o=this.properties[t].type,s=o.color,l=o.mutiple,u=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=n,null!=a.pfValue&&(a.pfValue=n),s?a.strValue="rgb("+n.join(",")+")":l?a.strValue=n.join(" "):a.strValue=""+n,this.updateStyleHints(i)):this.applyBypass(i,t,n),this.checkTriggers(i,t,u,n)}},aH.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)},aH.removeBypasses=function(e,t,n){for(var r=0;r<e.length;r++){for(var i=e[r],a={},o=0;o<t.length;o++){var s=t[o],l=this.properties[s],u=i.pstyle(l.name);if(!(!u||!u.bypass)){var c=this.parse(s,"",!0),h=a[l.name]={prev:u};this.applyParsedProperty(i,c),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,a,!0)}};var aq={};aq.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},aq.containerCss=function(e){var t=this._private.cy.container();if(s&&t&&s.getComputedStyle)return s.getComputedStyle(t).getPropertyValue(e)};var aW={};aW.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},aW.getRawStyle=function(e,t){if(e=e[0]){for(var n={},r=0;r<this.properties.length;r++){var i=this.properties[r],a=this.getStylePropertyValue(e,i.name,t);null!=a&&(n[i.name]=a,n[I(i.name)]=a)}return n}},aW.getIndexedStyle=function(e,t,n,r){var i=e.pstyle(t)[n][r];return null!=i?i:e.cy().style().getDefaultProperty(t)[n][0]},aW.getStylePropertyValue=function(e,t,n){if(e=e[0]){var r=this.properties[t];r.alias&&(r=r.pointsTo);var i=r.type,a=e.pstyle(r.name);if(a){var o=a.value,s=a.units,l=a.strValue;if(n&&i.number&&null!=o&&w(o)){var u=e.cy().zoom(),c=function(e){return e*u},h=function(e,t){return c(e)+t},p=b(o);return(p?s.every(function(e){return null!=e}):null!=s)?p?o.map(function(e,t){return h(e,s[t])}).join(" "):h(o,s):p?o.map(function(e){return v(e)?e:""+c(e)}).join(" "):""+c(o)}if(null!=l)return l}return null}},aW.getAnimationStartStyle=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r].name,a=e.pstyle(i);void 0!==a&&(a=x(a)?this.parse(i,a.strValue):this.parse(i,a)),a&&(n[i]=a)}return n},aW.getPropsList=function(e){var t=[],n=this.properties;if(e)for(var r=Object.keys(e),i=0;i<r.length;i++){var a=r[i],o=e[a],s=n[a]||n[L(a)],l=this.parse(s.name,o);l&&t.push(l)}return t},aW.getNonDefaultPropertiesHash=function(e,t,n){var r,i,a,o,s,l,u=n.slice();for(s=0;s<t.length;s++)if(r=t[s],null!=(i=e.pstyle(r,!1))){if(null!=i.pfValue)u[0]=eC(o,u[0]),u[1]=eA(o,u[1]);else for(a=i.strValue,l=0;l<a.length;l++)o=a.charCodeAt(l),u[0]=eC(o,u[0]),u[1]=eA(o,u[1])}return u},aW.getPropertiesHash=aW.getNonDefaultPropertiesHash;var a$={};a$.appendFromJson=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.selector,i=n.style||n.css,a=Object.keys(i);this.selector(r);for(var o=0;o<a.length;o++){var s=a[o],l=i[s];this.css(s,l)}}return this},a$.fromJson=function(e){return this.resetToDefault(),this.appendFromJson(e),this},a$.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}e.push({selector:r?r.toString():"core",style:a})}return e};var aK={};aK.appendFromString=function(e){var t,n,r,i=""+e;function a(){i=i.length>t.length?i.substr(t.length):""}function o(){n=n.length>r.length?n.substr(r.length):""}for(i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");!i.match(/^\s*$/);){var s=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!s){eU("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}t=s[0];var l=s[1];if("core"!==l&&new il(l).invalid){eU("Skipping parsing of block: Invalid selector found in string stylesheet: "+l),a();continue}var u=s[2],c=!1;n=u;for(var h=[];!n.match(/^\s*$/);){var p=n.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!p){eU("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+u),c=!0;break}r=p[0];var f=p[1],g=p[2];if(!this.properties[f]){eU("Skipping property: Invalid property name in: "+r),o();continue}if(!this.parse(f,g)){eU("Skipping property: Invalid property definition in: "+r),o();continue}h.push({name:f,val:g}),o()}if(c){a();break}this.selector(l);for(var v=0;v<h.length;v++){var y=h[v];this.css(y.name,y.val)}a()}return this},aK.fromString=function(e){return this.resetToDefault(),this.appendFromString(e),this};var aZ={};(function(){var e=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},t=function(e){var t=P+"|\\w+|"+F+"|"+z+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+P+")\\s*\\,\\s*("+P+")\\s*,\\s*("+t+")\\s*\\,\\s*("+t+")\\)$"},n=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];aZ.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:t("mapData")},mapLayoutData:{mapping:!0,regex:t("mapLayoutData")},mapScratch:{mapping:!0,regex:t("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:n,singleRegexMatchValue:!0},urls:{regexes:n,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return v(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+P+")\\s*,\\s*("+P+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+P+")\\s*,\\s*("+P+")\\s*,\\s*("+P+")\\s*,\\s*("+P+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(e){var t=e.length;return 1===t||2===t||4===t}}};var r={zeroNonZero:function(e,t){return(null==e||null==t)&&e!==t||0==e&&0!=t||0!=e&&0==t},any:function(e,t){return e!=t},emptyNonEmpty:function(e,t){var n=A(e),r=A(t);return n&&!r||!n&&r}},i=aZ.types,a=[{name:"label",type:i.text,triggersBounds:r.any,triggersZOrder:r.emptyNonEmpty},{name:"text-rotation",type:i.textRotation,triggersBounds:r.any},{name:"text-margin-x",type:i.bidirectionalSize,triggersBounds:r.any},{name:"text-margin-y",type:i.bidirectionalSize,triggersBounds:r.any}],o=[{name:"source-label",type:i.text,triggersBounds:r.any},{name:"source-text-rotation",type:i.textRotation,triggersBounds:r.any},{name:"source-text-margin-x",type:i.bidirectionalSize,triggersBounds:r.any},{name:"source-text-margin-y",type:i.bidirectionalSize,triggersBounds:r.any},{name:"source-text-offset",type:i.size,triggersBounds:r.any}],s=[{name:"target-label",type:i.text,triggersBounds:r.any},{name:"target-text-rotation",type:i.textRotation,triggersBounds:r.any},{name:"target-text-margin-x",type:i.bidirectionalSize,triggersBounds:r.any},{name:"target-text-margin-y",type:i.bidirectionalSize,triggersBounds:r.any},{name:"target-text-offset",type:i.size,triggersBounds:r.any}],l=[{name:"font-family",type:i.fontFamily,triggersBounds:r.any},{name:"font-style",type:i.fontStyle,triggersBounds:r.any},{name:"font-weight",type:i.fontWeight,triggersBounds:r.any},{name:"font-size",type:i.size,triggersBounds:r.any},{name:"text-transform",type:i.textTransform,triggersBounds:r.any},{name:"text-wrap",type:i.textWrap,triggersBounds:r.any},{name:"text-overflow-wrap",type:i.textOverflowWrap,triggersBounds:r.any},{name:"text-max-width",type:i.size,triggersBounds:r.any},{name:"text-outline-width",type:i.size,triggersBounds:r.any},{name:"line-height",type:i.positiveNumber,triggersBounds:r.any}],u=[{name:"text-valign",type:i.valign,triggersBounds:r.any},{name:"text-halign",type:i.halign,triggersBounds:r.any},{name:"color",type:i.color},{name:"text-outline-color",type:i.color},{name:"text-outline-opacity",type:i.zeroOneNumber},{name:"text-background-color",type:i.color},{name:"text-background-opacity",type:i.zeroOneNumber},{name:"text-background-padding",type:i.size,triggersBounds:r.any},{name:"text-border-opacity",type:i.zeroOneNumber},{name:"text-border-color",type:i.color},{name:"text-border-width",type:i.size,triggersBounds:r.any},{name:"text-border-style",type:i.borderStyle,triggersBounds:r.any},{name:"text-background-shape",type:i.textBackgroundShape,triggersBounds:r.any},{name:"text-justification",type:i.justification}],c=[{name:"events",type:i.bool},{name:"text-events",type:i.bool}],h=[{name:"display",type:i.display,triggersZOrder:r.any,triggersBounds:r.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:i.visibility,triggersZOrder:r.any},{name:"opacity",type:i.zeroOneNumber,triggersZOrder:r.zeroNonZero},{name:"text-opacity",type:i.zeroOneNumber},{name:"min-zoomed-font-size",type:i.size},{name:"z-compound-depth",type:i.zCompoundDepth,triggersZOrder:r.any},{name:"z-index-compare",type:i.zIndexCompare,triggersZOrder:r.any},{name:"z-index",type:i.nonNegativeInt,triggersZOrder:r.any}],p=[{name:"overlay-padding",type:i.size,triggersBounds:r.any},{name:"overlay-color",type:i.color},{name:"overlay-opacity",type:i.zeroOneNumber,triggersBounds:r.zeroNonZero},{name:"overlay-shape",type:i.overlayShape,triggersBounds:r.any}],f=[{name:"underlay-padding",type:i.size,triggersBounds:r.any},{name:"underlay-color",type:i.color},{name:"underlay-opacity",type:i.zeroOneNumber,triggersBounds:r.zeroNonZero},{name:"underlay-shape",type:i.overlayShape,triggersBounds:r.any}],g=[{name:"transition-property",type:i.propList},{name:"transition-duration",type:i.time},{name:"transition-delay",type:i.time},{name:"transition-timing-function",type:i.easing}],y=function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue},b=[{name:"height",type:i.nodeSize,triggersBounds:r.any,hashOverride:y},{name:"width",type:i.nodeSize,triggersBounds:r.any,hashOverride:y},{name:"shape",type:i.nodeShape,triggersBounds:r.any},{name:"shape-polygon-points",type:i.polygonPointList,triggersBounds:r.any},{name:"background-color",type:i.color},{name:"background-fill",type:i.fill},{name:"background-opacity",type:i.zeroOneNumber},{name:"background-blacken",type:i.nOneOneNumber},{name:"background-gradient-stop-colors",type:i.colors},{name:"background-gradient-stop-positions",type:i.percentages},{name:"background-gradient-direction",type:i.gradientDirection},{name:"padding",type:i.sizeMaybePercent,triggersBounds:r.any},{name:"padding-relative-to",type:i.paddingRelativeTo,triggersBounds:r.any},{name:"bounds-expansion",type:i.boundsExpansion,triggersBounds:r.any}],x=[{name:"border-color",type:i.color},{name:"border-opacity",type:i.zeroOneNumber},{name:"border-width",type:i.size,triggersBounds:r.any},{name:"border-style",type:i.borderStyle}],w=[{name:"background-image",type:i.urls},{name:"background-image-crossorigin",type:i.bgCrossOrigin},{name:"background-image-opacity",type:i.zeroOneNumbers},{name:"background-image-containment",type:i.bgContainment},{name:"background-image-smoothing",type:i.bools},{name:"background-position-x",type:i.bgPos},{name:"background-position-y",type:i.bgPos},{name:"background-width-relative-to",type:i.bgRelativeTo},{name:"background-height-relative-to",type:i.bgRelativeTo},{name:"background-repeat",type:i.bgRepeat},{name:"background-fit",type:i.bgFit},{name:"background-clip",type:i.bgClip},{name:"background-width",type:i.bgWH},{name:"background-height",type:i.bgWH},{name:"background-offset-x",type:i.bgPos},{name:"background-offset-y",type:i.bgPos}],E=[{name:"position",type:i.position,triggersBounds:r.any},{name:"compound-sizing-wrt-labels",type:i.compoundIncludeLabels,triggersBounds:r.any},{name:"min-width",type:i.size,triggersBounds:r.any},{name:"min-width-bias-left",type:i.sizeMaybePercent,triggersBounds:r.any},{name:"min-width-bias-right",type:i.sizeMaybePercent,triggersBounds:r.any},{name:"min-height",type:i.size,triggersBounds:r.any},{name:"min-height-bias-top",type:i.sizeMaybePercent,triggersBounds:r.any},{name:"min-height-bias-bottom",type:i.sizeMaybePercent,triggersBounds:r.any}],T=[{name:"line-style",type:i.lineStyle},{name:"line-color",type:i.color},{name:"line-fill",type:i.fill},{name:"line-cap",type:i.lineCap},{name:"line-opacity",type:i.zeroOneNumber},{name:"line-dash-pattern",type:i.numbers},{name:"line-dash-offset",type:i.number},{name:"line-gradient-stop-colors",type:i.colors},{name:"line-gradient-stop-positions",type:i.percentages},{name:"curve-style",type:i.curveStyle,triggersBounds:r.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:i.zeroOneNumber,triggersBounds:r.any},{name:"source-endpoint",type:i.edgeEndpoint,triggersBounds:r.any},{name:"target-endpoint",type:i.edgeEndpoint,triggersBounds:r.any},{name:"control-point-step-size",type:i.size,triggersBounds:r.any},{name:"control-point-distances",type:i.bidirectionalSizes,triggersBounds:r.any},{name:"control-point-weights",type:i.numbers,triggersBounds:r.any},{name:"segment-distances",type:i.bidirectionalSizes,triggersBounds:r.any},{name:"segment-weights",type:i.numbers,triggersBounds:r.any},{name:"taxi-turn",type:i.bidirectionalSizeMaybePercent,triggersBounds:r.any},{name:"taxi-turn-min-distance",type:i.size,triggersBounds:r.any},{name:"taxi-direction",type:i.axisDirection,triggersBounds:r.any},{name:"edge-distances",type:i.edgeDistances,triggersBounds:r.any},{name:"arrow-scale",type:i.positiveNumber,triggersBounds:r.any},{name:"loop-direction",type:i.angle,triggersBounds:r.any},{name:"loop-sweep",type:i.angle,triggersBounds:r.any},{name:"source-distance-from-node",type:i.size,triggersBounds:r.any},{name:"target-distance-from-node",type:i.size,triggersBounds:r.any}],_=[{name:"ghost",type:i.bool,triggersBounds:r.any},{name:"ghost-offset-x",type:i.bidirectionalSize,triggersBounds:r.any},{name:"ghost-offset-y",type:i.bidirectionalSize,triggersBounds:r.any},{name:"ghost-opacity",type:i.zeroOneNumber}],k=[{name:"selection-box-color",type:i.color},{name:"selection-box-opacity",type:i.zeroOneNumber},{name:"selection-box-border-color",type:i.color},{name:"selection-box-border-width",type:i.size},{name:"active-bg-color",type:i.color},{name:"active-bg-opacity",type:i.zeroOneNumber},{name:"active-bg-size",type:i.size},{name:"outside-texture-bg-color",type:i.color},{name:"outside-texture-bg-opacity",type:i.zeroOneNumber}],D=[];aZ.pieBackgroundN=16,D.push({name:"pie-size",type:i.sizeMaybePercent});for(var C=1;C<=aZ.pieBackgroundN;C++)D.push({name:"pie-"+C+"-background-color",type:i.color}),D.push({name:"pie-"+C+"-background-size",type:i.percent}),D.push({name:"pie-"+C+"-background-opacity",type:i.zeroOneNumber});var S=[],N=aZ.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:i.arrowShape,triggersBounds:r.any},{name:"arrow-color",type:i.color},{name:"arrow-fill",type:i.arrowFill}].forEach(function(e){N.forEach(function(t){var n=t+"-"+e.name,r=e.type,i=e.triggersBounds;S.push({name:n,type:r,triggersBounds:i})})},{});var L=aZ.properties=[].concat(c,g,h,p,f,_,u,l,a,o,s,b,x,w,D,E,T,S,k),I=aZ.propertyGroups={behavior:c,transition:g,visibility:h,overlay:p,underlay:f,ghost:_,commonLabel:u,labelDimensions:l,mainLabel:a,sourceLabel:o,targetLabel:s,nodeBody:b,nodeBorder:x,backgroundImage:w,pie:D,compound:E,edgeLine:T,edgeArrow:S,core:k},O=aZ.propertyGroupNames={};(aZ.propertyGroupKeys=Object.keys(I)).forEach(function(e){O[e]=I[e].map(function(e){return e.name}),I[e].forEach(function(t){return t.groupKey=e})});var M=aZ.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];aZ.propertyNames=L.map(function(e){return e.name});for(var R=0;R<L.length;R++){var B=L[R];L[B.name]=B}for(var G=0;G<M.length;G++){var Y=M[G],V=L[Y.pointsTo],X={name:Y.name,alias:!0,pointsTo:V};L.push(X),L[Y.name]=X}})(),aZ.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},aZ.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=Y({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=aZ.pieBackgroundN;n++){var r=t.name.replace("{{i}}",n),i=t.value;e[r]=i}return e},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(e,t){return aZ.arrowPrefixes.forEach(function(n){var r=n+"-"+t.name,i=t.value;e[r]=i}),e},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var a=i.name,o=t[a],s=this.parse(a,o);n[a]=s}}return e.defaultProperties=n,e.defaultProperties},aZ.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var aQ={};aQ.parse=function(e,t,n,r){if(y(t))return this.parseImplWarn(e,t,n,r);var i,a=eO(e,""+t,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),o=this.propCache=this.propCache||[];return(i=o[a])||(i=o[a]=this.parseImplWarn(e,t,n,r)),(n||"mapping"===r)&&(i=eH(i))&&(i.value=eH(i.value)),i},aQ.parseImplWarn=function(e,t,n,r){var i=this.parseImpl(e,t,n,r);return i||null==t||eU("The style property `".concat(e,": ").concat(t,"` is invalid")),i&&("width"===i.name||"height"===i.name)&&"label"===t&&eU("The style value of `label` is deprecated for `"+i.name+"`"),i},aQ.parseImpl=function(e,t,n,r){e=L(e);var i=this.properties[e],a=t,o=this.types;if(!i||void 0===t)return null;i.alias&&(e=(i=i.pointsTo).name);var s=v(t);s&&(t=t.trim());var l=i.type;if(!l)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(y(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:n};if(!(!s||r||t.length<7||"a"!==t[1])){if(t.length>=7&&"d"===t[0]&&(N=new RegExp(o.data.regex).exec(t))){if(n)return!1;var u=o.data;return{name:e,value:N,strValue:""+t,mapped:u,field:N[1],bypass:n}}if(t.length>=10&&"m"===t[0]&&(I=new RegExp(o.mapData.regex).exec(t))){if(n||l.multiple)return!1;var c=o.mapData;if(!(l.color||l.number))return!1;var h=this.parse(e,I[4]);if(!h||h.mapped)return!1;var p=this.parse(e,I[5]);if(!p||p.mapped)return!1;if(h.pfValue===p.pfValue||h.strValue===p.strValue)return eU("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+h.strValue+"`"),this.parse(e,h.strValue);if(l.color){var f=h.value,g=p.value;if(f[0]===g[0]&&f[1]===g[1]&&f[2]===g[2]&&(f[3]===g[3]||(null==f[3]||1===f[3])&&(null==g[3]||1===g[3])))return!1}return{name:e,value:I,strValue:""+t,mapped:c,field:I[1],fieldMin:parseFloat(I[2]),fieldMax:parseFloat(I[3]),valueMin:h.value,valueMax:p.value,bypass:n}}}if(l.multiple&&"multiple"!==r){if(O=s?t.split(/\s+/):b(t)?t:[t],l.evenMultiple&&O.length%2!=0)return null;for(var x=[],E=[],T=[],_="",k=!1,D=0;D<O.length;D++){var C=this.parse(e,O[D],n,"multiple");k=k||v(C.value),x.push(C.value),T.push(null!=C.pfValue?C.pfValue:C.value),E.push(C.units),_+=(D>0?" ":"")+C.strValue}return l.validate&&!l.validate(x,E)?null:l.singleEnum&&k?1===x.length&&v(x[0])?{name:e,value:x[0],strValue:x[0],bypass:n}:null:{name:e,value:x,pfValue:T,strValue:_,bypass:n,units:E}}var A=function(){for(var r=0;r<l.enums.length;r++)if(l.enums[r]===t)return{name:e,value:t,strValue:""+t,bypass:n};return null};if(l.number){var S,N,I,O,M,R="px";if(l.units&&(M=l.units),l.implicitUnits&&(R=l.implicitUnits),!l.unitless){if(s){var F="px|em"+(l.allowPercent?"|\\%":"");M&&(F=M);var B=t.match("^("+P+")("+F+")?$");B&&(t=B[1],M=B[2]||R)}else(!M||l.implicitUnits)&&(M=R)}if(isNaN(t=parseFloat(t))&&void 0===l.enums)return null;if(isNaN(t)&&void 0!==l.enums)return t=a,A();if(l.integer&&!(w(S=t)&&Math.floor(S)===S)||void 0!==l.min&&(t<l.min||l.strictMin&&t===l.min)||void 0!==l.max&&(t>l.max||l.strictMax&&t===l.max))return null;var z={name:e,value:t,strValue:""+t+(M||""),units:M,bypass:n};return l.unitless||"px"!==M&&"em"!==M?z.pfValue=t:z.pfValue="px"!==M&&M?this.getEmSizeInPixels()*t:t,("ms"===M||"s"===M)&&(z.pfValue="ms"===M?t:1e3*t),("deg"===M||"rad"===M)&&(z.pfValue="rad"===M?t:Math.PI*t/180),"%"===M&&(z.pfValue=t/100),z}if(l.propList){var G=[],Y=""+t;if("none"!==Y){for(var H=Y.split(/\s*,\s*|\s+/),q=0;q<H.length;q++){var W=H[q].trim();this.properties[W]?G.push(W):eU("`"+W+"` is not a valid property name")}if(0===G.length)return null}return{name:e,value:G,strValue:0===G.length?"none":G.join(" "),bypass:n}}if(l.color){var $,K=(b($=t)?$:null)||U[$.toLowerCase()]||V($)||j($)||X($);return K?{name:e,value:K,pfValue:K,strValue:"rgb("+K[0]+","+K[1]+","+K[2]+")",bypass:n}:null}if(!l.regex&&!l.regexes)return l.string?{name:e,value:""+t,strValue:""+t,bypass:n}:l.enums?A():null;if(l.enums){var Z=A();if(Z)return Z}for(var Q=l.regexes?l.regexes:[l.regex],J=0;J<Q.length;J++){var ee=new RegExp(Q[J]).exec(t);if(ee)return{name:e,value:l.singleRegexMatchValue?ee[1]:ee,strValue:""+t,bypass:n}}return null};var aJ=function e(t){if(!(this instanceof e))return new e(t);if(!D(t)){eX("A style must have a core reference");return}this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()},a0=aJ.prototype;a0.instanceString=function(){return"style"},a0.clear=function(){for(var e=this._private,t=e.cy,n=t.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(n,!0),n.forEach(function(e){var t=e[0]._private;t.styleDirty=!0,t.appliedInitStyle=!1}),this},a0.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},a0.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},a0.selector=function(e){var t="core"===e?null:new il(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},a0.css=function(){var e=arguments;if(1===e.length)for(var t=e[0],n=0;n<this.properties.length;n++){var r=this.properties[n],i=t[r.name];void 0===i&&(i=t[I(r.name)]),void 0!==i&&this.cssRule(r.name,i)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},a0.style=a0.css,a0.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),this[r].selector||(this._private.coreStyle[n.name]=n)}return this},a0.append=function(e){return C(e)?e.appendToStyle(this):b(e)?this.appendFromJson(e):v(e)&&this.appendFromString(e),this},aJ.fromJson=function(e,t){var n=new aJ(e);return n.fromJson(t),n},aJ.fromString=function(e,t){return new aJ(e).fromString(t)},[aU,aH,aq,aW,a$,aK,aZ,aQ].forEach(function(e){Y(a0,e)}),aJ.types=a0.types,aJ.properties=a0.properties,aJ.propertyGroups=a0.propertyGroups,aJ.propertyGroupNames=a0.propertyGroupNames,aJ.propertyGroupKeys=a0.propertyGroupKeys;var a1={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return(null==t.selectionType&&(t.selectionType="single"),void 0===e)?t.selectionType:(("additive"===e||"single"===e)&&(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,t,n,r,i,a=arguments,o=this._private.pan;switch(a.length){case 0:return o;case 1:if(v(a[0]))return o[e=a[0]];if(x(a[0])){if(!this._private.panningEnabled)return this;r=(n=a[0]).x,i=n.y,w(r)&&(o.x=r),w(i)&&(o.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=a[0],t=a[1],("x"===e||"y"===e)&&w(t)&&(o[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var n,r,i,a=arguments,o=this._private.pan;if(!this._private.panningEnabled)return this;switch(a.length){case 1:x(e)&&(r=(n=a[0]).x,i=n.y,w(r)&&(o.x+=r),w(i)&&(o.y+=i),this.emit("pan viewport"));break;case 2:("x"===e||"y"===e)&&w(t)&&(o[e]+=t),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(w(e)&&void 0===t&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){if(v(e)){var n=e;e=this.$(n)}else if(x(a=e)&&w(a.x1)&&w(a.x2)&&w(a.y1)&&w(a.y2)){var r=e;(i={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2}).w=i.x2-i.x1,i.h=i.y2-i.y1}else T(e)||(e=this.mutableElements());if(!(T(e)&&e.empty())){i=i||e.boundingBox();var i,a,o,s=this.width(),l=this.height();if(t=w(t)?t:0,!isNaN(s)&&!isNaN(l)&&s>0&&l>0&&!isNaN(i.w)&&!isNaN(i.h)&&i.w>0&&i.h>0){o=(o=(o=Math.min((s-2*t)/i.w,(l-2*t)/i.h))>this._private.maxZoom?this._private.maxZoom:o)<this._private.minZoom?this._private.minZoom:o;var u={x:(s-o*(i.x1+i.x2))/2,y:(l-o*(i.y1+i.y2))/2};return{zoom:o,pan:u}}}}},zoomRange:function(e,t){var n=this._private;if(null==t){var r=e;e=r.min,t=r.max}return w(e)&&w(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):w(e)&&void 0===t&&e<=n.maxZoom?n.minZoom=e:w(t)&&void 0===e&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,n,r=this._private,i=r.pan,a=r.zoom,o=!1;if(r.zoomingEnabled||(o=!0),w(e)?n=e:x(e)&&(n=e.level,null!=e.position?t=ts(e.position,a,i):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||r.panningEnabled||(o=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,o||!w(n)||n===a||null!=t&&(!w(t.x)||!w(t.y)))return null;if(null==t)return{zoomed:!0,panned:!1,zoom:n,pan:i};var s=n,l={x:-s/a*(t.x-i.x)+t.x,y:-s/a*(t.y-i.y)+t.y};return{zoomed:!0,panned:!0,zoom:s,pan:l}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return null!=t&&t.zoomed&&(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport")),this},viewport:function(e){var t=this._private,n=!0,r=!0,i=[],a=!1,o=!1;if(!e||(w(e.zoom)||(n=!1),x(e.pan)||(r=!1),!n&&!r))return this;if(n){var s=e.zoom;s<t.minZoom||s>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=s,i.push("zoom"))}if(r&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;w(l.x)&&(t.pan.x=l.x,o=!1),w(l.y)&&(t.pan.y=l.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(v(e)){var n=e;e=this.mutableElements().filter(n)}else T(e)||(e=this.mutableElements());if(0!==e.length){var r=e.boundingBox(),i=this.width(),a=this.height();return{x:(i-(t=void 0===t?this._private.zoom:t)*(r.x1+r.x2))/2,y:(a-t*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled&&this.viewport({pan:{x:0,y:0},zoom:1}),this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(e=s.getComputedStyle(r),t=function(t){return parseFloat(e.getPropertyValue(t))},{width:r.clientWidth-t("padding-left")-t("padding-right"),height:r.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}};a1.centre=a1.center,a1.autolockNodes=a1.autolock,a1.autoungrabifyNodes=a1.autoungrabify;var a2={data:rQ.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:rQ.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:rQ.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:rQ.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};a2.attr=a2.data,a2.removeAttr=a2.removeData;var a5=function(e){var t=this,n=(e=Y({},e)).container;n&&!E(n)&&E(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{}).cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=t;var a=void 0!==s&&void 0!==n&&!e.headless,o=e;o.layout=Y({name:a?"grid":"null"},o.layout),o.renderer=Y({name:a?"canvas":"null"},o.renderer);var l=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},u=this._private={container:n,ready:!1,options:o,elements:new aD(this),listeners:[],aniEles:new aD(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?a:o.styleEnabled,zoom:w(o.zoom)?o.zoom:1,pan:{x:x(o.pan)&&w(o.pan.x)?o.pan.x:0,y:x(o.pan)&&w(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom}),u.styleEnabled&&t.setStyle([]);var c=Y({},o,o.renderer);t.initRenderer(c);var h=function(e,n,r){t.notifications(!1);var i=t.mutableElements();i.length>0&&i.remove(),null!=e&&(x(e)||b(e))&&t.add(e),t.one("layoutready",function(e){t.notifications(!0),t.emit(e),t.one("load",n),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",r),t.emit("done")});var a=Y({},t._private.options.layout);a.eles=t.elements(),t.layout(a).run()};!function(e,t){if(e.some(S))return n7.all(e).then(t);t(e)}([o.style,o.elements],function(e){var n=e[0],a=e[1];u.styleEnabled&&t.style().append(n),h(a,function(){t.startAnimationLoop(),u.ready=!0,y(o.ready)&&t.on("ready",o.ready);for(var e=0;e<i.length;e++){var n=i[e];t.on("ready",n)}r&&(r.readies=[]),t.emit("ready")},o.done)})},a3=a5.prototype;Y(a3,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){if(!this.destroyed())return this.stopAnimationLoop(),this.destroyRenderer(),this.emit("destroy"),this._private.destroyed=!0,this},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(null!=e){var t=this._private,n=t.options;return!E(e)&&E(e[0])&&(e=e[0]),this.stopAnimationLoop(),this.destroyRenderer(),t.container=e,t.styleEnabled=!0,this.invalidateSize(),this.initRenderer(Y({},n,n.renderer,{name:"null"===n.renderer.name?"canvas":n.renderer.name})),this.startAnimationLoop(),this.style(n.style),this.emit("mount"),this}},unmount:function(){return this.stopAnimationLoop(),this.destroyRenderer(),this.initRenderer({name:"null"}),this.emit("unmount"),this},options:function(){return eH(this._private.options)},json:function(e){var t=this,n=t._private,r=t.mutableElements();if(x(e)){if(t.startBatch(),e.elements){var i={},a=function(e,n){for(var r=[],a=[],o=0;o<e.length;o++){var s=e[o];if(!s.data.id){eU("cy.json() cannot handle elements without an ID attribute");continue}var l=""+s.data.id,u=t.getElementById(l);i[l]=!0,0!==u.length?a.push({ele:u,json:s}):(n&&(s.group=n),r.push(s))}t.add(r);for(var c=0;c<a.length;c++){var h=a[c],p=h.ele,f=h.json;p.json(f)}};if(b(e.elements))a(e.elements);else for(var o=["nodes","edges"],s=0;s<o.length;s++){var l=o[s],u=e.elements[l];b(u)&&a(u,l)}var c=t.collection();r.filter(function(e){return!i[e.id()]}).forEach(function(e){e.isParent()?c.merge(e):e.remove()}),c.forEach(function(e){return e.children().move({parent:null})}),c.forEach(function(e){return t.getElementById(e.id()).remove()})}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<h.length;p++){var f=h[p];null!=e[f]&&t[f](e[f])}return t.endBatch(),this}var g={};e?g.elements=this.elements().map(function(e){return e.json()}):(g.elements={},r.forEach(function(e){var t=e.group();g.elements[t]||(g.elements[t]=[]),g.elements[t].push(e.json())})),this._private.styleEnabled&&(g.style=t.style().json()),g.data=eH(t.data());var v=n.options;return g.zoomingEnabled=n.zoomingEnabled,g.userZoomingEnabled=n.userZoomingEnabled,g.zoom=n.zoom,g.minZoom=n.minZoom,g.maxZoom=n.maxZoom,g.panningEnabled=n.panningEnabled,g.userPanningEnabled=n.userPanningEnabled,g.pan=eH(n.pan),g.boxSelectionEnabled=n.boxSelectionEnabled,g.renderer=eH(v.renderer),g.hideEdgesOnViewport=v.hideEdgesOnViewport,g.textureOnViewport=v.textureOnViewport,g.wheelSensitivity=v.wheelSensitivity,g.motionBlur=v.motionBlur,g.multiClickDebounceTime=v.multiClickDebounceTime,g}}),a3.$id=a3.getElementById,[{add:function(e){var t;if(T(e)){if(e._private.cy===this)t=e.restore();else{for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(i.json())}t=new aD(this,n)}}else if(b(e))t=new aD(this,e);else if(x(e)&&(b(e.nodes)||b(e.edges))){for(var a=[],o=["nodes","edges"],s=0,l=o.length;s<l;s++){var u=o[s],c=e[u];if(b(c))for(var h=0,p=c.length;h<p;h++){var f=Y({group:u},c[h]);a.push(f)}}t=new aD(this,a)}else t=new e9(this,e).collection();return t},remove:function(e){if(!T(e)&&v(e)){var t=e;e=this.$(t)}return e.remove()}},aR,az,aG,aY,{notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();null!=t&&r.merge(t);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var r=e.batchNotifications[n];r.empty()?t.notify(n):t.notify(n,r)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],a=e[i];t.getElementById(i).data(a)}})}},aX,aj,{style:function(e){return e&&this.setStyle(e).update(),this._private.style},setStyle:function(e){var t=this._private;return C(e)?t.style=e.generateStyle(this):b(e)?t.style=aJ.fromJson(this,e):v(e)?t.style=aJ.fromString(this,e):t.style=aJ(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},a1,a2].forEach(function(e){Y(a3,e)});var a4={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},a9=function(e){return e.scratch("breadthfirst")},a6=function(e,t){return e.scratch("breadthfirst",t)};function a8(e){this.options=Y({},a4,e)}a8.prototype.run=function(){var e,t=this.options,n=t.cy,r=t.eles,i=r.nodes().filter(function(e){return!e.isParent()}),a=t.directed,o=t.maximal||t.maximalAdjustments>0,s=t_(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(T(t.roots))e=t.roots;else if(b(t.roots)){for(var l=[],u=0;u<t.roots.length;u++){var c=t.roots[u],h=n.getElementById(c);l.push(h)}e=n.collection(l)}else if(v(t.roots))e=n.$(t.roots);else if(a)e=i.roots();else{var p=r.components();e=n.collection();for(var f=0;f<p.length;f++)!function(t){var n=p[t],r=n.maxDegree(!1),i=n.filter(function(e){return e.degree(!1)===r});e=e.add(i)}(f)}var g=[],y={},x=function(e,t){null==g[t]&&(g[t]=[]);var n=g[t].length;g[t].push(e),a6(e,{index:n,depth:t})},w=function(e,t){var n=a9(e),r=n.depth,i=n.index;g[r][i]=null,x(e,t)};r.bfs({roots:e,directed:t.directed,visit:function(e,t,n,r,i){var a=e[0],o=a.id();x(a,i),y[o]=!0}});for(var E=[],_=0;_<i.length;_++){var k=i[_];y[k.id()]||E.push(k)}var D=function(e){for(var t=g[e],n=0;n<t.length;n++){var r=t[n];if(null==r){t.splice(n,1),n--;continue}a6(r,{depth:e,index:n})}},C=function(){for(var e=0;e<g.length;e++)D(e)};if(a&&o){var A=[],S={},N=function(e){return A.push(e)};for(i.forEach(function(e){return A.push(e)});A.length>0;){var L=A.shift(),I=function(e,t){for(var n=a9(e),i=e.incomers().filter(function(e){return e.isNode()&&r.has(e)}),a=-1,o=e.id(),s=0;s<i.length;s++)a=Math.max(a,a9(i[s]).depth);return n.depth<=a&&(t[o]?null:(w(e,a+1),t[o]=!0,!0))}(L,S);if(I)L.outgoers().filter(function(e){return e.isNode()&&r.has(e)}).forEach(N);else if(null===I){eU("Detected double maximal shift for node `"+L.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}C();var O=0;if(t.avoidOverlap)for(var M=0;M<i.length;M++){var P=i[M].layoutDimensions(t),R=P.w,F=P.h;O=Math.max(O,R,F)}var B={},z=function(e){if(B[e.id()])return B[e.id()];for(var t=a9(e).depth,n=e.neighborhood(),r=0,a=0,o=0;o<n.length;o++){var s=n[o];if(!(s.isEdge()||s.isParent()||!i.has(s))){var l=a9(s);if(null!=l){var u=l.index,c=l.depth;if(!(null==u||null==c)){var h=g[c].length;c<t&&(r+=u/h,a++)}}}}return r/=a=Math.max(1,a),0===a&&(r=0),B[e.id()]=r,r},Y=function(e,t){var n=z(e)-z(t);return 0===n?G(e.id(),t.id()):n};void 0!==t.depthSort&&(Y=t.depthSort);for(var V=0;V<g.length;V++)g[V].sort(Y),D(V);for(var X=[],j=0;j<E.length;j++)X.push(E[j]);g.unshift(X),C();for(var U=0,H=0;H<g.length;H++)U=Math.max(g[H].length,U);var q={x:s.x1+s.w/2,y:s.x1+s.h/2},W=g.reduce(function(e,t){return Math.max(e,t.length)},0);return r.nodes().layoutPositions(this,t,function(e){var n=a9(e),r=n.depth,i=n.index,a=g[r].length,o=Math.max(s.w/((t.grid?W:a)+1),O),l=Math.max(s.h/(g.length+1),O),u=Math.min(s.w/2/g.length,s.h/2/g.length);if(u=Math.max(u,O),!t.circle)return{x:q.x+(i+1-(a+1)/2)*o,y:(r+1)*l};var c=u*r+u-(g.length>0&&g[0].length<=3?u/2:0),h=2*Math.PI/g[r].length*i;return 0===r&&1===g[0].length&&(c=1),{x:q.x+c*Math.cos(h),y:q.y+c*Math.sin(h)}}),this};var a7={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function oe(e){this.options=Y({},a7,e)}oe.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var a,o=t_(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=void 0===e.sweep?2*Math.PI-2*Math.PI/i.length:e.sweep,u=l/Math.max(1,i.length-1),c=0,h=0;h<i.length;h++){var p=i[h].layoutDimensions(e);c=Math.max(c,p.w,p.h)}if(a=w(e.radius)?e.radius:i.length<=1?0:Math.min(o.h,o.w)/2-c,i.length>1&&e.avoidOverlap){var f=Math.cos(u)-1,g=Math.sin(u)-0;a=Math.max(Math.sqrt((c*=1.75)*c/(f*f+g*g)),a)}return n.nodes().layoutPositions(this,e,function(t,n){var i=e.startAngle+n*u*(r?1:-1),o=a*Math.cos(i),l=a*Math.sin(i);return{x:s.x+o,y:s.y+l}}),this};var ot={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function on(e){this.options=Y({},ot,e)}on.prototype.run=function(){for(var e=this.options,t=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,n=e.cy,r=e.eles,i=r.nodes().not(":parent"),a=t_(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:a.x1+a.w/2,y:a.y1+a.h/2},s=[],l=0,u=0;u<i.length;u++){var c=i[u],h=void 0;h=e.concentric(c),s.push({value:h,node:c}),c._private.scratch.concentric=h}i.updateStyle();for(var p=0;p<i.length;p++){var f=i[p].layoutDimensions(e);l=Math.max(l,f.w,f.h)}s.sort(function(e,t){return t.value-e.value});for(var g=e.levelWidth(i),v=[[]],y=v[0],b=0;b<s.length;b++){var x=s[b];y.length>0&&Math.abs(y[0].value-x.value)>=g&&(y=[],v.push(y)),y.push(x)}var w=l+e.minNodeSpacing;if(!e.avoidOverlap){var E=v.length>0&&v[0].length>1,T=(Math.min(a.w,a.h)/2-w)/(v.length+E?1:0);w=Math.min(w,T)}for(var _=0,k=0;k<v.length;k++){var D=v[k],C=void 0===e.sweep?2*Math.PI-2*Math.PI/D.length:e.sweep,A=D.dTheta=C/Math.max(1,D.length-1);if(D.length>1&&e.avoidOverlap){var S=Math.cos(A)-1,N=Math.sin(A)-0;_=Math.max(Math.sqrt(w*w/(S*S+N*N)),_)}D.r=_,_+=w}if(e.equidistant){for(var L=0,I=0,O=0;O<v.length;O++)L=Math.max(L,v[O].r-I);I=0;for(var M=0;M<v.length;M++){var P=v[M];0===M&&(I=P.r),P.r=I,I+=L}}for(var R={},F=0;F<v.length;F++)for(var B=v[F],z=B.dTheta,G=B.r,Y=0;Y<B.length;Y++){var V=B[Y],X=e.startAngle+(t?1:-1)*z*Y,j={x:o.x+G*Math.cos(X),y:o.y+G*Math.sin(X)};R[V.node.id()]=j}return r.nodes().layoutPositions(this,e,function(e){return R[e.id()]}),this};var or,oi,oa,oo,os,ol,ou={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function oc(e){this.options=Y({},ou,e),this.options.layout=this}oc.prototype.run=function(){var e=this.options,t=e.cy,n=this;n.stopped=!1,(!0===e.animate||!1===e.animate)&&n.emit({type:"layoutstart",layout:n}),ol=!0===e.debug;var r=od(t,n,e);ol&&oh(r),e.randomize&&og(r);var i=eT(),a=function(){oy(r,t,e),!0===e.fit&&t.fit(e.padding)},o=function(t){return!(n.stopped||t>=e.numIter||(om(r,e),r.temperature=r.temperature*e.coolingFactor,r.temperature<e.minTemp))},s=function(){if(!0===e.animate||!1===e.animate)a(),n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n});else{var t=e.eles.nodes(),i=ov(r,e,t);t.layoutPositions(n,e,i)}},l=0,u=!0;if(!0===e.animate)(function t(){for(var n=0;u&&n<e.refresh;)u=o(l),l++,n++;u?(eT()-i>=e.animationThreshold&&a(),ek(t)):(oN(r,e),s())})();else{for(;u;)u=o(l),l++;oN(r,e),s()}return this},oc.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},oc.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var oh,od=function(e,t,n){for(var r=n.eles.edges(),i=n.eles.nodes(),a={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:t_(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},o=n.eles.components(),s={},l=0;l<o.length;l++)for(var u=o[l],c=0;c<u.length;c++){var h=u[c];s[h.id()]=l}for(var l=0;l<a.nodeSize;l++){var p=i[l],f=p.layoutDimensions(n),g={};g.isLocked=p.locked(),g.id=p.data("id"),g.parentId=p.data("parent"),g.cmptId=s[p.id()],g.children=[],g.positionX=p.position("x"),g.positionY=p.position("y"),g.offsetX=0,g.offsetY=0,g.height=f.w,g.width=f.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(p.style("padding")),g.padRight=parseFloat(p.style("padding")),g.padTop=parseFloat(p.style("padding")),g.padBottom=parseFloat(p.style("padding")),g.nodeRepulsion=y(n.nodeRepulsion)?n.nodeRepulsion(p):n.nodeRepulsion,a.layoutNodes.push(g),a.idToIndex[g.id]=l}for(var v=[],b=0,x=-1,w=[],l=0;l<a.nodeSize;l++){var p=a.layoutNodes[l],E=p.parentId;null!=E?a.layoutNodes[a.idToIndex[E]].children.push(p.id):(v[++x]=p.id,w.push(p.id))}for(a.graphSet.push(w);b<=x;){var T=v[b++],_=a.idToIndex[T],h=a.layoutNodes[_],k=h.children;if(k.length>0){a.graphSet.push(k);for(var l=0;l<k.length;l++)v[++x]=k[l]}}for(var l=0;l<a.graphSet.length;l++)for(var D=a.graphSet[l],c=0;c<D.length;c++){var C=a.idToIndex[D[c]];a.indexToGraph[C]=l}for(var l=0;l<a.edgeSize;l++){var A=r[l],S={};S.id=A.data("id"),S.sourceId=A.data("source"),S.targetId=A.data("target");var N=y(n.idealEdgeLength)?n.idealEdgeLength(A):n.idealEdgeLength,L=y(n.edgeElasticity)?n.edgeElasticity(A):n.edgeElasticity,I=a.idToIndex[S.sourceId],O=a.idToIndex[S.targetId];if(a.indexToGraph[I]!=a.indexToGraph[O]){for(var M=op(S.sourceId,S.targetId,a),P=a.graphSet[M],R=0,g=a.layoutNodes[I];-1===P.indexOf(g.id);)g=a.layoutNodes[a.idToIndex[g.parentId]],R++;for(g=a.layoutNodes[O];-1===P.indexOf(g.id);)g=a.layoutNodes[a.idToIndex[g.parentId]],R++;N*=R*n.nestingFactor}S.idealLength=N,S.elasticity=L,a.layoutEdges.push(S)}return a},op=function(e,t,n){var r=of(e,t,0,n);return 2>r.count?0:r.graph},of=function e(t,n,r,i){var a=i.graphSet[r];if(-1<a.indexOf(t)&&-1<a.indexOf(n))return{count:2,graph:r};for(var o=0,s=0;s<a.length;s++){var l=a[s],u=i.idToIndex[l],c=i.layoutNodes[u].children;if(0!==c.length){var h=e(t,n,i.indexToGraph[i.idToIndex[c[0]]],i);if(0!==h.count){if(1!==h.count)return h;if(2==++o)break}}}return{count:o,graph:r}},og=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,i=0;i<e.nodeSize;i++){var a=e.layoutNodes[i];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*n,a.positionY=Math.random()*r)}},ov=function(e,t,n){var r=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];i.x1=Math.min(i.x1,n.positionX),i.x2=Math.max(i.x2,n.positionX),i.y1=Math.min(i.y1,n.positionY),i.y2=Math.max(i.y2,n.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(n,a){var o=e.layoutNodes[e.idToIndex[n.data("id")]];if(!t.boundingBox)return{x:o.positionX,y:o.positionY};var s=(o.positionX-i.x1)/i.w,l=(o.positionY-i.y1)/i.h;return{x:r.x1+s*r.w,y:r.y1+l*r.h}}},oy=function(e,t,n){var r=n.layout,i=n.eles.nodes(),a=ov(e,n,i);i.positions(a),!0!==e.ready&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},om=function(e,t,n){ob(e,t),o_(e),ok(e,t),oD(e),oC(e)},ob=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],i=r.length,a=0;a<i;a++)for(var o=e.layoutNodes[e.idToIndex[r[a]]],s=a+1;s<i;s++)ow(o,e.layoutNodes[e.idToIndex[r[s]]],e,t)},ox=function(e){return-e+2*e*Math.random()},ow=function(e,t,n,r){if(!(e.cmptId!==t.cmptId&&!n.isCompound)){var i=t.positionX-e.positionX,a=t.positionY-e.positionY;0===i&&0===a&&(i=ox(1),a=ox(1));var o=oE(e,t,i,a);if(o>0)var s=r.nodeOverlap*o,l=Math.sqrt(i*i+a*a),u=s*i/l,c=s*a/l;else var h=oT(e,i,a),p=oT(t,-1*i,-1*a),f=p.x-h.x,g=p.y-h.y,v=f*f+g*g,l=Math.sqrt(v),s=(e.nodeRepulsion+t.nodeRepulsion)/v,u=s*f/l,c=s*g/l;e.isLocked||(e.offsetX-=u,e.offsetY-=c),t.isLocked||(t.offsetX+=u,t.offsetY+=c)}},oE=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(r>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},oT=function(e,t,n){var r=e.positionX,i=e.positionY,a=e.height||1,o=e.width||1,s=n/t,l=a/o,u={};return 0===t&&0<n||0===t&&0>n?(u.x=r,u.y=i+a/2):0<t&&-1*l<=s&&s<=l?(u.x=r+o/2,u.y=i+o*n/2/t):0>t&&-1*l<=s&&s<=l?(u.x=r-o/2,u.y=i-o*n/2/t):0<n&&(s<=-1*l||s>=l)?(u.x=r+a*t/2/n,u.y=i+a/2):0>n&&(s<=-1*l||s>=l)&&(u.x=r-a*t/2/n,u.y=i-a/2),u},o_=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],i=e.idToIndex[r.sourceId],a=e.layoutNodes[i],o=e.idToIndex[r.targetId],s=e.layoutNodes[o],l=s.positionX-a.positionX,u=s.positionY-a.positionY;if(!(0===l&&0===u)){var c=oT(a,l,u),h=oT(s,-1*l,-1*u),p=h.x-c.x,f=h.y-c.y,g=Math.sqrt(p*p+f*f),v=Math.pow(r.idealLength-g,2)/r.elasticity;if(0!==g)var y=v*p/g,b=v*f/g;else var y=0,b=0;a.isLocked||(a.offsetX+=y,a.offsetY+=b),s.isLocked||(s.offsetX-=y,s.offsetY-=b)}}},ok=function(e,t){if(0!==t.gravity)for(var n=0;n<e.graphSet.length;n++){var r=e.graphSet[n],i=r.length;if(0===n)var a=e.clientHeight/2,o=e.clientWidth/2;else var s=e.layoutNodes[e.idToIndex[r[0]]],l=e.layoutNodes[e.idToIndex[s.parentId]],a=l.positionX,o=l.positionY;for(var u=0;u<i;u++){var c=e.layoutNodes[e.idToIndex[r[u]]];if(!c.isLocked){var h=a-c.positionX,p=o-c.positionY,f=Math.sqrt(h*h+p*p);if(f>1){var g=t.gravity*h/f,v=t.gravity*p/f;c.offsetX+=g,c.offsetY+=v}}}}},oD=function(e,t){var n=[],r=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;r<=i;){var a=n[r++],o=e.idToIndex[a],s=e.layoutNodes[o],l=s.children;if(0<l.length&&!s.isLocked){for(var u=s.offsetX,c=s.offsetY,h=0;h<l.length;h++){var p=e.layoutNodes[e.idToIndex[l[h]]];p.offsetX+=u,p.offsetY+=c,n[++i]=l[h]}s.offsetX=0,s.offsetY=0}}},oC=function(e,t){for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var i=oA(r.offsetX,r.offsetY,e.temperature);r.positionX+=i.x,r.positionY+=i.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,oS(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},oA=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var i={x:n*e/r,y:n*t/r};else var i={x:e,y:t};return i},oS=function e(t,n){var r=t.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],a=!1;if((null==i.maxX||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,a=!0),(null==i.minX||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,a=!0),(null==i.maxY||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,a=!0),(null==i.minY||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,a=!0),a)return e(i,n)}},oN=function(e,t){for(var n=e.layoutNodes,r=[],i=0;i<n.length;i++){var a=n[i],o=a.cmptId;(r[o]=r[o]||[]).push(a)}for(var s=0,i=0;i<r.length;i++){var l=r[i];if(l){l.x1=1/0,l.x2=-1/0,l.y1=1/0,l.y2=-1/0;for(var u=0;u<l.length;u++){var c=l[u];l.x1=Math.min(l.x1,c.positionX-c.width/2),l.x2=Math.max(l.x2,c.positionX+c.width/2),l.y1=Math.min(l.y1,c.positionY-c.height/2),l.y2=Math.max(l.y2,c.positionY+c.height/2)}l.w=l.x2-l.x1,l.h=l.y2-l.y1,s+=l.w*l.h}}r.sort(function(e,t){return t.w*t.h-e.w*e.h});for(var h=0,p=0,f=0,g=0,v=Math.sqrt(s)*e.clientWidth/e.clientHeight,i=0;i<r.length;i++){var l=r[i];if(l){for(var u=0;u<l.length;u++){var c=l[u];c.isLocked||(c.positionX+=h-l.x1,c.positionY+=p-l.y1)}h+=l.w+t.componentSpacing,f+=l.w+t.componentSpacing,g=Math.max(g,l.h),f>v&&(p+=g+t.componentSpacing,h=0,f=0,g=0)}}},oL={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function oI(e){this.options=Y({},oL,e)}oI.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=n.nodes().not(":parent");e.sort&&(r=r.sort(e.sort));var i=t_(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(0===i.h||0===i.w)n.nodes().layoutPositions(this,e,function(e){return{x:i.x1,y:i.y1}});else{var a=r.size(),o=Math.sqrt(a*i.h/i.w),s=Math.round(o),l=Math.round(i.w/i.h*o),u=function(e){if(null==e)return Math.min(s,l);Math.min(s,l)==s?s=e:l=e},c=function(e){if(null==e)return Math.max(s,l);Math.max(s,l)==s?s=e:l=e},h=e.rows,p=null!=e.cols?e.cols:e.columns;if(null!=h&&null!=p)s=h,l=p;else if(null!=h&&null==p)l=Math.ceil(a/(s=h));else if(null==h&&null!=p)s=Math.ceil(a/(l=p));else if(l*s>a){var f=u(),g=c();(f-1)*g>=a?u(f-1):(g-1)*f>=a&&c(g-1)}else for(;l*s<a;){var v=u(),y=c();(y+1)*v>=a?c(y+1):u(v+1)}var b=i.w/l,x=i.h/s;if(e.condense&&(b=0,x=0),e.avoidOverlap)for(var w=0;w<r.length;w++){var E=r[w],T=E._private.position;(null==T.x||null==T.y)&&(T.x=0,T.y=0);var _=E.layoutDimensions(e),k=e.avoidOverlapPadding,D=_.w+k,C=_.h+k;b=Math.max(b,D),x=Math.max(x,C)}for(var A={},S=function(e,t){return!!A["c-"+e+"-"+t]},N=function(e,t){A["c-"+e+"-"+t]=!0},L=0,I=0,O=function(){++I>=l&&(I=0,L++)},M={},P=0;P<r.length;P++){var R=r[P],F=e.position(R);if(F&&(void 0!==F.row||void 0!==F.col)){var B={row:F.row,col:F.col};if(void 0===B.col)for(B.col=0;S(B.row,B.col);)B.col++;else if(void 0===B.row)for(B.row=0;S(B.row,B.col);)B.row++;M[R.id()]=B,N(B.row,B.col)}}r.layoutPositions(this,e,function(e,t){if(e.locked()||e.isParent())return!1;var n,r,a=M[e.id()];if(a)n=a.col*b+b/2+i.x1,r=a.row*x+x/2+i.y1;else{for(;S(L,I);)O();n=I*b+b/2+i.x1,r=L*x+x/2+i.y1,N(L,I),O()}return{x:n,y:r}})}return this};var oO={ready:function(){},stop:function(){}};function oM(e){this.options=Y({},oO,e)}oM.prototype.run=function(){var e=this.options,t=e.eles;return e.cy,this.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",e.ready),this.emit("layoutready"),this.one("layoutstop",e.stop),this.emit("layoutstop"),this},oM.prototype.stop=function(){return this};var oP={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function oR(e){this.options=Y({},oP,e)}oR.prototype.run=function(){var e=this.options,t=e.eles.nodes(),n=y(e.positions);return t.layoutPositions(this,e,function(t,r){var i=function(t){if(null==e.positions){var r;return{x:(r=t.position()).x,y:r.y}}if(n)return e.positions(t);var i=e.positions[t._private.data.id];return null!=i?i:null}(t);return!t.locked()&&null!=i&&i}),this};var oF={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function oB(e){this.options=Y({},oF,e)}oB.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=t_(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return n.nodes().layoutPositions(this,e,function(e,t){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this};var oz=[{name:"breadthfirst",impl:a8},{name:"circle",impl:oe},{name:"concentric",impl:on},{name:"cose",impl:oc},{name:"grid",impl:oI},{name:"null",impl:oM},{name:"preset",impl:oR},{name:"random",impl:oB}];function oG(e){this.options=e,this.notifications=0}var oY=function(){},oV=function(){throw Error("A headless instance can not render images")};oG.prototype={recalculateRenderedStyle:oY,notify:function(){this.notifications++},init:oY,isHeadless:function(){return!0},png:oV,jpg:oV};var oX={};oX.arrowShapeWidth=.3,oX.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,n=function(e,t,n,r,i,a,o){var s=i.x-n/2-o,l=i.x+n/2+o,u=i.y-n/2-o,c=i.y+n/2+o;return s<=e&&e<=l&&u<=t&&t<=c},r=function(e,t,n,r,i){return{x:(e*Math.cos(r)-t*Math.sin(r))*n+i.x,y:(e*Math.sin(r)+t*Math.cos(r))*n+i.y}},i=function(e,t,n,i){for(var a=[],o=0;o<e.length;o+=2){var s=e[o],l=e[o+1];a.push(r(s,l,t,n,i))}return a},a=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.x,r.y)}return t},o=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},s=function(r,s){v(s)&&(s=e[s]),e[r]=Y({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,n,r,o,s){return tG(e,t,a(i(this.points,n+2*s,r,o)))},roughCollide:n,draw:function(e,n,r,a){var o=i(this.points,n,r,a);t.arrowShapeImpl("polygon")(e,o)},spacing:function(e){return 0},gap:o},s)};s("none",{collide:eG,roughCollide:eG,draw:eV,spacing:eY,gap:eY}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(e,n,a,o,s){var l=i(this.points,n,a,o),u=this.controlPoint,c=r(u[0],u[1],n,a,o);t.arrowShapeImpl(this.name)(e,l,c)},gap:function(e){return .8*o(e)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,n,r,o,s,l){var u=a(i(this.points,n+2*l,r,o)),c=a(i(this.pointsTee,n+2*l,r,o));return tG(e,t,u)||tG(e,t,c)},draw:function(e,n,r,a,o){var s=i(this.points,n,r,a),l=i(this.pointsTee,n,r,a);t.arrowShapeImpl(this.name)(e,s,l)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(e,t,n,r,o,s,l){var u=Math.pow(o.x-e,2)+Math.pow(o.y-t,2)<=Math.pow((n+2*l)*this.radius,2);return tG(e,t,a(i(this.points,n+2*l,r,o)))||u},draw:function(e,n,r,a,o){var s=i(this.pointsTr,n,r,a);t.arrowShapeImpl(this.name)(e,s,a.x,a.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var n=this.baseCrossLinePts.slice(),r=t/e;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(e,t,n,r,o,s,l){var u=a(i(this.points,n+2*l,r,o)),c=a(i(this.crossLinePts(n,s),n+2*l,r,o));return tG(e,t,u)||tG(e,t,c)},draw:function(e,n,r,a,o){var s=i(this.points,n,r,a),l=i(this.crossLinePts(n,o),n,r,a);t.arrowShapeImpl(this.name)(e,s,l)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return .525*o(e)}}),s("circle",{radius:.15,collide:function(e,t,n,r,i,a,o){return Math.pow(i.x-e,2)+Math.pow(i.y-t,2)<=Math.pow((n+2*o)*this.radius,2)},draw:function(e,n,r,i,a){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(e){return .95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})};var oj={};oj.projectIntoViewport=function(e,t){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],a=r[1],o=r[4],s=n.pan(),l=n.zoom();return[((e-i)/o-s.x)/l,((t-a)/o-s.y)/l]},oj.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=s.getComputedStyle(e),r=function(e){return parseFloat(n.getPropertyValue(e))},i={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},a={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},o=e.clientWidth,l=e.clientHeight,u=i.left+i.right,c=i.top+i.bottom,h=a.left+a.right,p=t.width/(o+h),f=t.left+i.left+a.left,g=t.top+i.top+a.top;return this.containerBB=[f,g,o-u,l-c,p]},oj.invalidateContainerClientCoordsCache=function(){this.containerBB=null},oj.findNearestElement=function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]},oj.findNearestElements=function(e,t,n,r){var i,a,o=this,s=this,l=s.getCachedZSortedEles(),u=[],c=s.cy.zoom(),h=s.cy.hasCompoundNodes(),p=(r?24:8)/c,f=(r?8:2)/c,g=(r?8:2)/c,v=1/0;function y(e,t){if(e.isNode()){if(a)return;a=e,u.push(e)}if(e.isEdge()&&(null==t||t<v)){if(i){if(i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value){for(var n=0;n<u.length;n++)if(u[n].isEdge()){u[n]=e,i=e,v=null!=t?t:v;break}}}else u.push(e),i=e,v=null!=t?t:v}}function b(n){var r=n.outerWidth()+2*f,i=n.outerHeight()+2*f,a=r/2,l=i/2,u=n.position();if(u.x-a<=e&&e<=u.x+a&&u.y-l<=t&&t<=u.y+l&&s.nodeShapes[o.getNodeShape(n)].checkPoint(e,t,0,r,i,u.x,u.y))return y(n,0),!0}function x(n,r){var i,a=n._private;i=r?r+"-":"",n.boundingBox();var o=a.labelBounds[r||"main"],s=n.pstyle(i+"label").value;if(!("yes"!==n.pstyle("text-events").strValue||!s)){var l=e0(a.rscratch,"labelX",r),u=e0(a.rscratch,"labelY",r),c=e0(a.rscratch,"labelAngle",r),h=n.pstyle(i+"text-margin-x").pfValue,p=n.pstyle(i+"text-margin-y").pfValue,f=o.x1-g-h,v=o.x2+g-h,b=o.y1-g-p,x=o.y2+g-p;if(c){var w=Math.cos(c),E=Math.sin(c),T=function(e,t){return{x:(e-=l)*w-(t-=u)*E+l,y:e*E+t*w+u}},_=T(f,b),k=T(f,x),D=T(v,b),C=T(v,x);if(tG(e,t,[_.x+h,_.y+p,D.x+h,D.y+p,C.x+h,C.y+p,k.x+h,k.y+p]))return y(n),!0}else if(tI(o,e,t))return y(n),!0}}n&&(l=l.interactive);for(var w=l.length-1;w>=0;w--){var E=l[w];E.isNode()?b(E)||x(E):function(n){var r,i,a,l,c,f=n._private,g=f.rscratch,v=n.pstyle("width").pfValue,x=n.pstyle("arrow-scale").value,w=v/2+p,E=w*w,T=2*w,_=f.source,k=f.target;if("segments"===g.edgeType||"straight"===g.edgeType||"haystack"===g.edgeType){for(var D=g.allpts,C=0;C+3<D.length;C+=2)if(r=D[C],i=D[C+1],a=D[C+2],l=D[C+3],Math.min(r,a)-T<=e&&e<=Math.max(r,a)+T&&Math.min(i,l)-T<=t&&t<=Math.max(i,l)+T&&E>(c=tz(e,t,D[C],D[C+1],D[C+2],D[C+3])))return y(n,c),!0}else if("bezier"===g.edgeType||"multibezier"===g.edgeType||"self"===g.edgeType||"compound"===g.edgeType){for(var D=g.allpts,C=0;C+5<g.allpts.length;C+=4)if(tP(e,t,D[C],D[C+1],D[C+2],D[C+3],D[C+4],D[C+5],T)&&E>(c=tB(e,t,D[C],D[C+1],D[C+2],D[C+3],D[C+4],D[C+5])))return y(n,c),!0}for(var _=_||f.source,k=k||f.target,A=o.getArrowWidth(v,x),S=[{name:"source",x:g.arrowStartX,y:g.arrowStartY,angle:g.srcArrowAngle},{name:"target",x:g.arrowEndX,y:g.arrowEndY,angle:g.tgtArrowAngle},{name:"mid-source",x:g.midX,y:g.midY,angle:g.midsrcArrowAngle},{name:"mid-target",x:g.midX,y:g.midY,angle:g.midtgtArrowAngle}],C=0;C<S.length;C++){var N=S[C],L=s.arrowShapes[n.pstyle(N.name+"-arrow-shape").value],I=n.pstyle("width").pfValue;if(L.roughCollide(e,t,A,N.angle,{x:N.x,y:N.y},I,p)&&L.collide(e,t,A,N.angle,{x:N.x,y:N.y},I,p))return y(n),!0}h&&u.length>0&&(b(_),b(k))}(E)||x(E)||x(E,"source")||x(E,"target")}return u},oj.getAllInBox=function(e,t,n,r){var i=this.getCachedZSortedEles().interactive,a=[],o=Math.min(e,n),s=Math.max(e,n),l=Math.min(t,r),u=Math.max(t,r);e=o,n=s,t=l,r=u;for(var c=t_({x1:e,y1:t,x2:n,y2:r}),h=0;h<i.length;h++){var p=i[h];if(p.isNode()){var f=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});tL(c,f)&&!tO(f,c)&&a.push(p)}else{var g=p._private,v=g.rscratch;if(null!=v.startX&&null!=v.startY&&!tI(c,v.startX,v.startY)||null!=v.endX&&null!=v.endY&&!tI(c,v.endX,v.endY))continue;if("bezier"===v.edgeType||"multibezier"===v.edgeType||"self"===v.edgeType||"compound"===v.edgeType||"segments"===v.edgeType||"haystack"===v.edgeType){for(var y,b=g.rstyle.bezierPts||g.rstyle.linePts||g.rstyle.haystackPts,x=!0,w=0;w<b.length;w++)if(!tI(c,(y=b[w]).x,y.y)){x=!1;break}x&&a.push(p)}else("haystack"===v.edgeType||"straight"===v.edgeType)&&a.push(p)}}return a};var oU={};oU.calculateArrowAngles=function(e){var t,n,r,i,a,o,s,l,u=e._private.rscratch,c="haystack"===u.edgeType,h="bezier"===u.edgeType,p="multibezier"===u.edgeType,f="segments"===u.edgeType,g="compound"===u.edgeType,v="self"===u.edgeType;if(c?(r=u.haystackPts[0],i=u.haystackPts[1],a=u.haystackPts[2],o=u.haystackPts[3]):(r=u.arrowStartX,i=u.arrowStartY,a=u.arrowEndX,o=u.arrowEndY),s=u.midX,l=u.midY,f)t=r-u.segpts[0],n=i-u.segpts[1];else if(p||g||v||h){var y=u.allpts,b=tx(y[0],y[2],y[4],.1),x=tx(y[1],y[3],y[5],.1);t=r-b,n=i-x}else t=r-s,n=i-l;u.srcArrowAngle=tf(t,n);var s=u.midX,l=u.midY;if(c&&(s=(r+a)/2,l=(i+o)/2),t=a-r,n=o-i,f){var y=u.allpts;if(y.length/2%2==0){var w=y.length/2,E=w-2;t=y[w]-y[E],n=y[w+1]-y[E+1]}else{var w=y.length/2-1,E=w-2,T=w+2;t=y[w]-y[E],n=y[w+1]-y[E+1]}}else if(p||g||v){var _,k,D,C,y=u.allpts;if(u.ctrlpts.length/2%2==0){var A=y.length/2-1,S=A+2,N=S+2;_=tx(y[A],y[S],y[N],0),k=tx(y[A+1],y[S+1],y[N+1],0),D=tx(y[A],y[S],y[N],1e-4),C=tx(y[A+1],y[S+1],y[N+1],1e-4)}else{var S=y.length/2-1,A=S-2,N=S+2;_=tx(y[A],y[S],y[N],.4999),k=tx(y[A+1],y[S+1],y[N+1],.4999),D=tx(y[A],y[S],y[N],.5),C=tx(y[A+1],y[S+1],y[N+1],.5)}t=D-_,n=C-k}if(u.midtgtArrowAngle=tf(t,n),u.midDispX=t,u.midDispY=n,t*=-1,n*=-1,f){var y=u.allpts;if(y.length/2%2!=0){var w=y.length/2-1,T=w+2;t=-(y[T]-y[w]),n=-(y[T+1]-y[w+1])}}if(u.midsrcArrowAngle=tf(t,n),f)t=a-u.segpts[u.segpts.length-2],n=o-u.segpts[u.segpts.length-1];else if(p||g||v||h){var y=u.allpts,L=y.length,b=tx(y[L-6],y[L-4],y[L-2],.9),x=tx(y[L-5],y[L-3],y[L-1],.9);t=a-b,n=o-x}else t=a-s,n=o-l;u.tgtArrowAngle=tf(t,n)},oU.getArrowWidth=oU.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r||(r=Math.max(Math.pow(13.37*e,.9),29)*t,n[e+", "+t]=r,r)};var oH={};function oq(e){var t=[];if(null!=e){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t.push({x:r,y:i})}return t}}oH.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n._private,i=r.rscratch;if(!i.haystack){var a=2*Math.random()*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=2*Math.random()*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=r.source,s=r.target,l=o.position(),u=s.position(),c=o.width(),h=s.width(),p=o.height(),f=s.height(),g=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*g+l.x,i.source.y*p*g+l.y,i.target.x*h*g+u.x,i.target.y*f*g+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},oH.findSegmentsPoints=function(e,t){var n=e._private.rscratch,r=t.posPts,i=t.intersectionPts,a=t.vectorNormInverse,o=e.pstyle("edge-distances").value,s=e.pstyle("segment-weights"),l=e.pstyle("segment-distances"),u=Math.min(s.pfValue.length,l.pfValue.length);n.edgeType="segments",n.segpts=[];for(var c=0;c<u;c++){var h=s.pfValue[c],p=l.pfValue[c],f=1-h,g="node-position"===o?r:i,v={x:g.x1*f+g.x2*h,y:g.y1*f+g.y2*h};n.segpts.push(v.x+a.x*p,v.y+a.y*p)}},oH.findLoopPoints=function(e,t,n,r){var i=e._private.rscratch,a=t.dirCounts,o=t.srcPos,s=e.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,h=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var p=n,f=h;r&&(p=0,f=l);var g=u-Math.PI/2,v=g-c/2,y=g+c/2,b=u+"_"+c;p=void 0===a[b]?a[b]=0:++a[b],i.ctrlpts=[o.x+1.4*Math.cos(v)*f*(p/3+1),o.y+1.4*Math.sin(v)*f*(p/3+1),o.x+1.4*Math.cos(y)*f*(p/3+1),o.y+1.4*Math.sin(y)*f*(p/3+1)]},oH.findCompoundLoopPoints=function(e,t,n,r){var i=e._private.rscratch;i.edgeType="compound";var a=t.srcPos,o=t.tgtPos,s=t.srcW,l=t.srcH,u=t.tgtW,c=t.tgtH,h=e.pstyle("control-point-step-size").pfValue,p=e.pstyle("control-point-distances"),f=p?p.pfValue[0]:void 0,g=n,v=h;r&&(g=0,v=f);var y={x:a.x-s/2,y:a.y-l/2},b={x:o.x-u/2,y:o.y-c/2},x={x:Math.min(y.x,b.x),y:Math.min(y.y,b.y)};i.ctrlpts=[x.x,x.y-1.7995514309304248*v*(g/3+1)*Math.max(.5,Math.log(.01*s)),x.x-1.7995514309304248*v*(g/3+1)*Math.max(.5,Math.log(.01*u)),x.y]},oH.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},oH.findBezierPoints=function(e,t,n,r,i){var a=e._private.rscratch,o=t.vectorNormInverse,s=t.posPts,l=t.intersectionPts,u=e.pstyle("edge-distances").value,c=e.pstyle("control-point-step-size").pfValue,h=e.pstyle("control-point-distances"),p=e.pstyle("control-point-weights"),f=h&&p?Math.min(h.value.length,p.value.length):1,g=h?h.pfValue[0]:void 0,v=p.value[0];a.edgeType=r?"multibezier":"bezier",a.ctrlpts=[];for(var y=0;y<f;y++){var b=(.5-t.eles.length/2+n)*c*(i?-1:1),x=void 0,w=tv(b);r&&(g=h?h.pfValue[y]:c,v=p.value[y]);var E=void 0!==(x=r?g:void 0!==g?w*g:void 0)?x:b,T=1-v,_=v,k="node-position"===u?s:l,D={x:k.x1*T+k.x2*_,y:k.y1*T+k.y2*_};a.ctrlpts.push(D.x+o.x*E,D.y+o.y*E)}},oH.findTaxiPoints=function(e,t){var n,r=e._private.rscratch;r.edgeType="segments";var i="vertical",a="horizontal",o="leftward",s="rightward",l="downward",u="upward",c=t.posPts,h=t.srcW,p=t.srcH,f=t.tgtW,g=t.tgtH,v="node-position"!==e.pstyle("edge-distances").value,y=e.pstyle("taxi-direction").value,b=y,x=e.pstyle("taxi-turn"),w="%"===x.units,E=x.pfValue,T=e.pstyle("taxi-turn-min-distance").pfValue,_=c.x2-c.x1,k=c.y2-c.y1,D=function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)},C=D(_,v?(h+f)/2:0),A=D(k,v?(p+g)/2:0),S=!1;"auto"===b?y=Math.abs(C)>Math.abs(A)?a:i:b===u||b===l?(y=i,S=!0):(b===o||b===s)&&(y=a,S=!0);var N=y===i,L=N?A:C,I=N?k:_,O=tv(I),M=!1;!(S&&(w||E<0))&&(b===l&&I<0||b===u&&I>0||b===o&&I>0||b===s&&I<0)&&(O*=-1,L=O*Math.abs(L),M=!0);var P=function(e){return Math.abs(e)<T||Math.abs(e)>=Math.abs(L)},R=P(n=w?(E<0?1+E:E)*L:(E<0?L:0)+E*O),F=P(Math.abs(L)-Math.abs(n));if((R||F)&&!M){if(N){var B=Math.abs(_)<=f/2;if(Math.abs(I)<=p/2){var z=(c.x1+c.x2)/2,G=c.y1,Y=c.y2;r.segpts=[z,G,z,Y]}else if(B){var V=(c.y1+c.y2)/2,X=c.x1,j=c.x2;r.segpts=[X,V,j,V]}else r.segpts=[c.x1,c.y2]}else{var U=Math.abs(k)<=g/2;if(Math.abs(I)<=h/2){var H=(c.y1+c.y2)/2,q=c.x1,W=c.x2;r.segpts=[q,H,W,H]}else if(U){var $=(c.x1+c.x2)/2,K=c.y1,Z=c.y2;r.segpts=[$,K,$,Z]}else r.segpts=[c.x2,c.y1]}}else if(N){var Q=c.y1+n+(v?p/2*O:0),J=c.x1,ee=c.x2;r.segpts=[J,Q,ee,Q]}else{var et=c.x1+n+(v?h/2*O:0),en=c.y1,er=c.y2;r.segpts=[et,en,et,er]}},oH.tryToCorrectInvalidPoints=function(e,t){var n=e._private.rscratch;if("bezier"===n.edgeType){var r=t.srcPos,i=t.tgtPos,a=t.srcW,o=t.srcH,s=t.tgtW,l=t.tgtH,u=t.srcShape,c=t.tgtShape,h=!w(n.startX)||!w(n.startY),p=!w(n.arrowStartX)||!w(n.arrowStartY),f=!w(n.endX)||!w(n.endY),g=!w(n.arrowEndX)||!w(n.arrowEndY),v=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),y=ty({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),b=y<v,x=ty({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),E=x<v,T=!1;if(h||p||b){T=!0;var _={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},k=Math.sqrt(_.x*_.x+_.y*_.y),D={x:_.x/k,y:_.y/k},C=Math.max(a,o),A={x:n.ctrlpts[0]+2*D.x*C,y:n.ctrlpts[1]+2*D.y*C},S=u.intersectLine(r.x,r.y,a,o,A.x,A.y,0);b?(n.ctrlpts[0]=n.ctrlpts[0]+D.x*(v-y),n.ctrlpts[1]=n.ctrlpts[1]+D.y*(v-y)):(n.ctrlpts[0]=S[0]+D.x*v,n.ctrlpts[1]=S[1]+D.y*v)}if(f||g||E){T=!0;var N={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},L=Math.sqrt(N.x*N.x+N.y*N.y),I={x:N.x/L,y:N.y/L},O=Math.max(a,o),M={x:n.ctrlpts[0]+2*I.x*O,y:n.ctrlpts[1]+2*I.y*O},P=c.intersectLine(i.x,i.y,s,l,M.x,M.y,0);E?(n.ctrlpts[0]=n.ctrlpts[0]+I.x*(v-x),n.ctrlpts[1]=n.ctrlpts[1]+I.y*(v-x)):(n.ctrlpts[0]=P[0]+I.x*v,n.ctrlpts[1]=P[1]+I.y*v)}T&&this.findEndpoints(e)}},oH.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n,r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(n=t.allpts.length/2-1,t.midX=t.allpts[n],t.midY=t.allpts[n+1]):(n=t.allpts.length/2-3,t.midX=tx(t.allpts[n],t.allpts[n+2],t.allpts[n+4],.5),t.midY=tx(t.allpts[n+1],t.allpts[n+3],t.allpts[n+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.segpts.length%4==0){var i=t.segpts.length/2,a=i-2;t.midX=(t.segpts[a]+t.segpts[i])/2,t.midY=(t.segpts[a+1]+t.segpts[i+1])/2}else{var o=t.segpts.length/2-1;t.midX=t.segpts[o],t.midY=t.segpts[o+1]}}},oH.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||w(t.startX)&&w(t.startY)&&w(t.endX)&&w(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,eU("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},oH.findEdgeControlPoints=function(e){var t=this;if(!(!e||0===e.length)){for(var n=this,r=n.cy,i=r.hasCompoundNodes(),a={map:new e5,get:function(e){var t=this.map.get(e[0]);return null!=t?t.get(e[1]):null},set:function(e,t){var n=this.map.get(e[0]);null==n&&(n=new e5,this.map.set(e[0],n)),n.set(e[1],t)}},o=[],s=[],l=0;l<e.length;l++){var u=e[l],c=u._private,h=u.pstyle("curve-style").value;if(!(u.removed()||!u.takesUpSpace())){if("haystack"===h){s.push(u);continue}var p="unbundled-bezier"===h||"segments"===h||"straight"===h||"straight-triangle"===h||"taxi"===h,f="unbundled-bezier"===h||"bezier"===h,g=c.source,v=c.target,y=[g.poolIndex(),v.poolIndex()].sort(),b=a.get(y);null==b&&(b={eles:[]},a.set(y,b),o.push(y)),b.eles.push(u),p&&(b.hasUnbundled=!0),f&&(b.hasBezier=!0)}}for(var x=0;x<o.length;x++)(function(e){var r=o[e],s=a.get(r),l=void 0;if(!s.hasUnbundled){var u=s.eles[0].parallelEdges().filter(function(e){return e.isBundledBezier()});eQ(s.eles),u.forEach(function(e){return s.eles.push(e)}),s.eles.sort(function(e,t){return e.poolIndex()-t.poolIndex()})}var c=s.eles[0],h=c.source(),p=c.target();if(h.poolIndex()>p.poolIndex()){var f=h;h=p,p=f}var g=s.srcPos=h.position(),v=s.tgtPos=p.position(),y=s.srcW=h.outerWidth(),b=s.srcH=h.outerHeight(),x=s.tgtW=p.outerWidth(),E=s.tgtH=p.outerHeight(),T=s.srcShape=n.nodeShapes[t.getNodeShape(h)],_=s.tgtShape=n.nodeShapes[t.getNodeShape(p)];s.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var k=0;k<s.eles.length;k++){var D=s.eles[k],C=D[0]._private.rscratch,A=D.pstyle("curve-style").value,S="unbundled-bezier"===A||"segments"===A||"taxi"===A,N=!h.same(D.source());if(!s.calculatedIntersection&&h!==p&&(s.hasBezier||s.hasUnbundled)){s.calculatedIntersection=!0;var L=T.intersectLine(g.x,g.y,y,b,v.x,v.y,0),I=s.srcIntn=L,O=_.intersectLine(v.x,v.y,x,E,g.x,g.y,0),M=s.tgtIntn=O,P=s.intersectionPts={x1:L[0],x2:O[0],y1:L[1],y2:O[1]},R=s.posPts={x1:g.x,x2:v.x,y1:g.y,y2:v.y},F=O[1]-L[1],B=O[0]-L[0],z=Math.sqrt(B*B+F*F),G=s.vector={x:B,y:F},Y=s.vectorNorm={x:G.x/z,y:G.y/z},V={x:-Y.y,y:Y.x};s.nodesOverlap=!w(z)||_.checkPoint(L[0],L[1],0,x,E,v.x,v.y)||T.checkPoint(O[0],O[1],0,y,b,g.x,g.y),s.vectorNormInverse=V,l={nodesOverlap:s.nodesOverlap,dirCounts:s.dirCounts,calculatedIntersection:!0,hasBezier:s.hasBezier,hasUnbundled:s.hasUnbundled,eles:s.eles,srcPos:v,tgtPos:g,srcW:x,srcH:E,tgtW:y,tgtH:b,srcIntn:M,tgtIntn:I,srcShape:_,tgtShape:T,posPts:{x1:R.x2,y1:R.y2,x2:R.x1,y2:R.y1},intersectionPts:{x1:P.x2,y1:P.y2,x2:P.x1,y2:P.y1},vector:{x:-G.x,y:-G.y},vectorNorm:{x:-Y.x,y:-Y.y},vectorNormInverse:{x:-V.x,y:-V.y}}}var X=N?l:s;C.nodesOverlap=X.nodesOverlap,C.srcIntn=X.srcIntn,C.tgtIntn=X.tgtIntn,i&&(h.isParent()||h.isChild()||p.isParent()||p.isChild())&&(h.parents().anySame(p)||p.parents().anySame(h)||h.same(p)&&h.isParent())?t.findCompoundLoopPoints(D,X,k,S):h===p?t.findLoopPoints(D,X,k,S):"segments"===A?t.findSegmentsPoints(D,X):"taxi"===A?t.findTaxiPoints(D,X):"straight"!==A&&(S||s.eles.length%2!=1||k!==Math.floor(s.eles.length/2))?t.findBezierPoints(D,X,k,S,N):t.findStraightEdgePoints(D),t.findEndpoints(D),t.tryToCorrectInvalidPoints(D,X),t.checkForInvalidEdgeWarning(D),t.storeAllpts(D),t.storeEdgeProjections(D),t.calculateArrowAngles(D),t.recalculateEdgeLabelProjections(D),t.calculateLabelAngles(D)}})(x);this.findHaystackPoints(s)}},oH.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if("segments"===t.edgeType)return this.recalculateRenderedStyle(e),oq(t.segpts)},oH.getControlPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(e),oq(t.ctrlpts)},oH.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var oW={};oW.manualEndptToPx=function(e,t){var n=e.position(),r=e.outerWidth(),i=e.outerHeight();if(2===t.value.length){var a=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(a[0]=a[0]*r),"%"===t.units[1]&&(a[1]=a[1]*i),a[0]+=n.x,a[1]+=n.y,a}var o=t.pfValue[0];o=-Math.PI/2+o;var s=2*Math.max(r,i),l=[n.x+Math.cos(o)*s,n.y+Math.sin(o)*s];return this.nodeShapes[this.getNodeShape(e)].intersectLine(n.x,n.y,r,i,l[0],l[1],0)},oW.findEndpoints=function(e){var t,n,r,i,a,o=e.source()[0],s=e.target()[0],l=o.position(),u=s.position(),c=e.pstyle("target-arrow-shape").value,h=e.pstyle("source-arrow-shape").value,p=e.pstyle("target-distance-from-node").pfValue,f=e.pstyle("source-distance-from-node").pfValue,g=e.pstyle("curve-style").value,v=e._private.rscratch,y=v.edgeType,b="self"===y||"compound"===y,x="bezier"===y||"multibezier"===y||b,E="bezier"!==y,T="straight"===y||"segments"===y,_="segments"===y,k=b||"taxi"===g,D=e.pstyle("source-endpoint"),C=k?"outside-to-node":D.value,A=e.pstyle("target-endpoint"),S=k?"outside-to-node":A.value;if(v.srcManEndpt=D,v.tgtManEndpt=A,x){var N=[v.ctrlpts[0],v.ctrlpts[1]];t=E?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:N,n=N}else if(T){var L=_?v.segpts.slice(0,2):[u.x,u.y];t=_?v.segpts.slice(v.segpts.length-2):[l.x,l.y],n=L}if("inside-to-node"===S)a=[u.x,u.y];else if(A.units)a=this.manualEndptToPx(s,A);else if("outside-to-line"===S)a=v.tgtIntn;else if("outside-to-node"===S||"outside-to-node-or-label"===S?r=t:("outside-to-line"===S||"outside-to-line-or-label"===S)&&(r=[l.x,l.y]),a=this.nodeShapes[this.getNodeShape(s)].intersectLine(u.x,u.y,s.outerWidth(),s.outerHeight(),r[0],r[1],0),"outside-to-node-or-label"===S||"outside-to-line-or-label"===S){var I=s._private.rscratch,O=I.labelWidth,M=I.labelHeight,P=I.labelX,R=I.labelY,F=O/2,B=M/2,z=s.pstyle("text-valign").value;"top"===z?R-=B:"bottom"===z&&(R+=B);var G=s.pstyle("text-halign").value;"left"===G?P-=F:"right"===G&&(P+=F);var Y=tK(r[0],r[1],[P-F,R-B,P+F,R-B,P+F,R+B,P-F,R+B],u.x,u.y);if(Y.length>0){var V=tm(l,tu(a)),X=tm(l,tu(Y)),j=V;X<V&&(a=Y,j=X),Y.length>2&&tm(l,{x:Y[2],y:Y[3]})<j&&(a=[Y[2],Y[3]])}}var U=tQ(a,t,this.arrowShapes[c].spacing(e)+p),H=tQ(a,t,this.arrowShapes[c].gap(e)+p);if(v.endX=H[0],v.endY=H[1],v.arrowEndX=U[0],v.arrowEndY=U[1],"inside-to-node"===C)a=[l.x,l.y];else if(D.units)a=this.manualEndptToPx(o,D);else if("outside-to-line"===C)a=v.srcIntn;else if("outside-to-node"===C||"outside-to-node-or-label"===C?i=n:("outside-to-line"===C||"outside-to-line-or-label"===C)&&(i=[u.x,u.y]),a=this.nodeShapes[this.getNodeShape(o)].intersectLine(l.x,l.y,o.outerWidth(),o.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===C||"outside-to-line-or-label"===C){var q=o._private.rscratch,W=q.labelWidth,$=q.labelHeight,K=q.labelX,Z=q.labelY,Q=W/2,J=$/2,ee=o.pstyle("text-valign").value;"top"===ee?Z-=J:"bottom"===ee&&(Z+=J);var et=o.pstyle("text-halign").value;"left"===et?K-=Q:"right"===et&&(K+=Q);var en=tK(i[0],i[1],[K-Q,Z-J,K+Q,Z-J,K+Q,Z+J,K-Q,Z+J],l.x,l.y);if(en.length>0){var er=tm(u,tu(a)),ei=tm(u,tu(en)),ea=er;ei<er&&(a=[en[0],en[1]],ea=ei),en.length>2&&tm(u,{x:en[2],y:en[3]})<ea&&(a=[en[2],en[3]])}}var eo=tQ(a,n,this.arrowShapes[h].spacing(e)+f),es=tQ(a,n,this.arrowShapes[h].gap(e)+f);v.startX=es[0],v.startY=es[1],v.arrowStartX=eo[0],v.arrowStartY=eo[1],(x||E||T)&&(w(v.startX)&&w(v.startY)&&w(v.endX)&&w(v.endY)?v.badLine=!1:v.badLine=!0)},oW.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;return(this.recalculateRenderedStyle(e),"haystack"===t.edgeType)?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},oW.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;return(this.recalculateRenderedStyle(e),"haystack"===t.edgeType)?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}};var o$={};o$.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,r=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){t.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)(function(e,t,n){for(var r=function(e,t,n,r){return tx(e,t,n,r)},i=t._private,a=i.rstyle.bezierPts,o=0;o<e.bezierProjPcts.length;o++){var s=e.bezierProjPcts[o];a.push({x:r(n[0],n[2],n[4],s),y:r(n[1],n[3],n[5],s)})}})(this,e,n.allpts.slice(i,i+6))}else if("segments"===r)for(var a=t.rstyle.linePts=[],i=0;i+1<n.allpts.length;i+=2)a.push({x:n.allpts[i],y:n.allpts[i+1]});else if("haystack"===r){var o=n.haystackPts;t.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},o$.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var oK={};oK.recalculateNodeLabelProjection=function(e){if(!A(e.pstyle("label").strValue)){var t,n,r=e._private,i=e.width(),a=e.height(),o=e.padding(),s=e.position(),l=e.pstyle("text-halign").strValue,u=e.pstyle("text-valign").strValue,c=r.rscratch,h=r.rstyle;switch(l){case"left":t=s.x-i/2-o;break;case"right":t=s.x+i/2+o;break;default:t=s.x}switch(u){case"top":n=s.y-a/2-o;break;case"bottom":n=s.y+a/2+o;break;default:n=s.y}c.labelX=t,c.labelY=n,h.labelX=t,h.labelY=n,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}};var oZ=function(e,t){var n=Math.atan(t/e);return 0===e&&n<0&&(n*=-1),n},oQ=function(e,t){return oZ(t.x-e.x,t.y-e.y)},oJ=function(e,t,n,r){var i=tT(0,r-.001,1),a=tT(0,r+.001,1);return oQ(tw(e,t,n,i),tw(e,t,n,a))};oK.recalculateEdgeLabelProjections=function(e){var t,n=e._private,r=n.rscratch,i=this,a={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(a.mid||a.source||a.target){t={x:r.midX,y:r.midY};var o=function(e,t,r){e1(n.rscratch,e,t,r),e1(n.rstyle,e,t,r)};o("labelX",null,t.x),o("labelY",null,t.y),o("labelAutoAngle",null,oZ(r.midDispX,r.midDispY));var s=function e(){if(e.cache)return e.cache;for(var t=[],a=0;a+5<r.allpts.length;a+=4){var o={x:r.allpts[a],y:r.allpts[a+1]},s={x:r.allpts[a+2],y:r.allpts[a+3]},l={x:r.allpts[a+4],y:r.allpts[a+5]};t.push({p0:o,p1:s,p2:l,startDist:0,length:0,segments:[]})}var u=n.rstyle.bezierPts,c=i.bezierProjPcts.length;function h(e,t,n,r,i){var a=ty(t,n),o=e.segments[e.segments.length-1],s={p0:t,p1:n,t0:r,t1:i,startDist:o?o.startDist+o.length:0,length:a};e.segments.push(s),e.length+=a}for(var p=0;p<t.length;p++){var f=t[p],g=t[p-1];g&&(f.startDist=g.startDist+g.length),h(f,f.p0,u[p*c],0,i.bezierProjPcts[0]);for(var v=0;v<c-1;v++)h(f,u[p*c+v],u[p*c+v+1],i.bezierProjPcts[v],i.bezierProjPcts[v+1]);h(f,u[p*c+c-1],f.p2,i.bezierProjPcts[c-1],1)}return e.cache=t},l=function(n){var i,l="source"===n;if(a[n]){var u=e.pstyle(n+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,h=s(),p=0,f=0,g=0;g<h.length;g++){for(var v=h[l?g:h.length-1-g],y=0;y<v.segments.length;y++){var b=v.segments[l?y:v.segments.length-1-y],x=g===h.length-1&&y===v.segments.length-1;if(p=f,(f+=b.length)>=u||x){c={cp:v,segment:b};break}}if(c)break}var w=c.cp,E=c.segment,T=(u-p)/E.length,_=E.t1-E.t0,k=l?E.t0+_*T:E.t1-_*T;k=tT(0,k,1),t=tw(w.p0,w.p1,w.p2,k),i=oJ(w.p0,w.p1,w.p2,k);break;case"straight":case"segments":case"haystack":for(var D,C,A,S,N=0,L=r.allpts.length,I=0;I+3<L&&(l?(A={x:r.allpts[I],y:r.allpts[I+1]},S={x:r.allpts[I+2],y:r.allpts[I+3]}):(A={x:r.allpts[L-2-I],y:r.allpts[L-1-I]},S={x:r.allpts[L-4-I],y:r.allpts[L-3-I]}),D=ty(A,S),C=N,!((N+=D)>=u));I+=2);var O=(u-C)/D;t=tE(A,S,O=tT(0,O,1)),i=oQ(A,S)}o("labelX",n,t.x),o("labelY",n,t.y),o("labelAutoAngle",n,i)}};l("source"),l("target"),this.applyLabelDimensions(e)}},oK.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},oK.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),i=this.calculateLabelDimensions(e,r),a=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,s=e0(n.rscratch,"labelWrapCachedLines",t)||[],l="wrap"!==o?1:Math.max(s.length,1),u=i.height/l,c=i.width,h=i.height+(l-1)*(a-1)*u;e1(n.rstyle,"labelWidth",t,c),e1(n.rscratch,"labelWidth",t,c),e1(n.rstyle,"labelHeight",t,h),e1(n.rscratch,"labelHeight",t,h),e1(n.rscratch,"labelLineHeight",t,u*a)},oK.getLabelText=function(e,t){var n=e._private,r=t?t+"-":"",i=e.pstyle(r+"label").strValue,a=e.pstyle("text-transform").value,o=function(e,r){return r?(e1(n.rscratch,e,t,r),r):e0(n.rscratch,e,t)};if(!i)return"";"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var s=e.pstyle("text-wrap").value;if("wrap"===s){var l=o("labelKey");if(null!=l&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u=i.split(`
`),c=e.pstyle("text-max-width").pfValue,h=e.pstyle("text-overflow-wrap").value,p="anywhere"===h,f=[],g=/[\s\u200b]+/,v=p?"":" ",y=0;y<u.length;y++){var b=u[y],x=this.calculateLabelDimensions(e,b).width;if(p&&(b=b.split("").join("​")),x>c){for(var w=b.split(g),E="",T=0;T<w.length;T++){var _=w[T],k=0===E.length?_:E+v+_;this.calculateLabelDimensions(e,k).width<=c?E+=_+v:(E&&f.push(E),E=_+v)}E.match(/^[\s\u200b]+$/)||f.push(E)}else f.push(b)}o("labelWrapCachedLines",f),i=o("labelWrapCachedText",f.join(`
`)),o("labelWrapKey",l)}else if("ellipsis"===s){var D=e.pstyle("text-max-width").pfValue,C="",A=!1;if(this.calculateLabelDimensions(e,i).width<D)return i;for(var S=0;S<i.length&&!(this.calculateLabelDimensions(e,C+i[S]+"…").width>D);S++)C+=i[S],S===i.length-1&&(A=!0);return A||(C+="…"),C}return i},oK.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,n=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},oK.calculateLabelDimensions=function(e,t){var n=eI(t,e._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),i=r[n];if(null!=i)return i;var a=e.pstyle("font-style").strValue,o=e.pstyle("font-size").pfValue,s=e.pstyle("font-family").strValue,l=e.pstyle("font-weight").strValue,u=this.labelCalcCanvas,c=this.labelCalcCanvasContext;if(!u){u=this.labelCalcCanvas=document.createElement("canvas"),c=this.labelCalcCanvasContext=u.getContext("2d");var h=u.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}c.font="".concat(a," ").concat(l," ").concat(o,"px ").concat(s);for(var p=0,f=0,g=t.split(`
`),v=0;v<g.length;v++){var y=g[v];p=Math.max(Math.ceil(c.measureText(y).width),p),f+=o}return p+=0,f+=0,r[n]={width:p,height:f}},oK.calculateLabelAngle=function(e,t){var n=e._private.rscratch,r=e.isEdge(),i=e.pstyle((t?t+"-":"")+"text-rotation"),a=i.strValue;return"none"===a?0:r&&"autorotate"===a?n.labelAutoAngle:"autorotate"===a?0:i.pfValue},oK.calculateLabelAngles=function(e){var t=e.isEdge(),n=e._private.rscratch;n.labelAngle=this.calculateLabelAngle(e),t&&(n.sourceLabelAngle=this.calculateLabelAngle(e,"source"),n.targetLabelAngle=this.calculateLabelAngle(e,"target"))};var o0={},o1=!1;o0.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(28>e.width()||28>e.height()))return o1||(eU("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),o1=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"round-rectangle"===t||"cutrectangle"===t||"cut-rectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var n=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return t};var o2={};o2.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),n=this,r=function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(t.merge(e),n)for(var r=0;r<e.length;r++){var i=e[r]._private.rstyle;i.clean=!1,i.cleanConnected=!1}};n.binder(e).on("bounds.* dirty.*",function(e){r(e.target)}).on("style.* background.*",function(e){r(e.target,!1)});var i=function(i){if(i){var a=n.onUpdateEleCalcsFns;t.cleanStyle();for(var o=0;o<t.length;o++){var s=t[o],l=s._private.rstyle;s.isNode()&&!l.cleanConnected&&(r(s.connectedEdges()),l.cleanConnected=!0)}if(a)for(var u=0;u<a.length;u++)(0,a[u])(i,t);n.recalculateRenderedStyle(t),t=e.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},o2.onUpdateEleCalcs=function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},o2.recalculateRenderedStyle=function(e,t){var n=function(e){return e._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){void 0===t&&(t=!0);for(var a=0;a<e.length;a++){var o=e[a],s=o._private,l=s.rstyle;!o.isEdge()||n(o.source())&&n(o.target())||(l.clean=!1),t&&l.clean||o.removed()||"none"===o.pstyle("display").value||("nodes"===s.group?i.push(o):r.push(o),l.clean=!0)}for(var u=0;u<i.length;u++){var c=i[u],h=c._private.rstyle,p=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=p.x,h.nodeY=p.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var f=0;f<r.length;f++){var g=r[f]._private,v=g.rstyle,y=g.rscratch;v.srcX=y.arrowStartX,v.srcY=y.arrowStartY,v.tgtX=y.arrowEndX,v.tgtY=y.arrowEndY,v.midX=y.midX,v.midY=y.midY,v.labelAngle=y.labelAngle,v.sourceLabelAngle=y.sourceLabelAngle,v.targetLabelAngle=y.targetLabelAngle}}};var o5={};o5.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r._private.rscratch;r.grabbed()&&!r.isParent()?t.push(r):i.inDragLayer?e.drag.push(r):e.nondrag.push(r)}for(var n=0;n<t.length;n++){var r=t[n];e.drag.push(r)}}},o5.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null},o5.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(an),t.interactive=t.filter(function(e){return e.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};var o3={};[oj,oU,oH,oW,o$,oK,o0,o2,o5].forEach(function(e){Y(o3,e)});var o4={};o4.getCachedImage=function(e,t,n){var r=this.imageCache=this.imageCache||{},i=r[e];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var a=(i=r[e]=r[e]||{}).image=new Image;a.addEventListener("load",n),a.addEventListener("error",function(){a.error=!0});var o="data:";return e.substring(0,o.length).toLowerCase()===o||(a.crossOrigin=t),a.src=e,a};var o9={};o9.registerBinding=function(e,t,n,r){var i=Array.prototype.slice.apply(arguments,[1]),a=this.binder(e);return a.on.apply(a,i)},o9.binder=function(e){var t=this,n=e===window||e===document||e===document.body||!(typeof HTMLElement>"u")&&e instanceof HTMLElement;if(null==t.supportsPassiveEvents){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});window.addEventListener("test",null,i)}catch(e){}t.supportsPassiveEvents=r}var a=function(r,i,a){var o=Array.prototype.slice.call(arguments);return n&&t.supportsPassiveEvents&&(o[2]={capture:null!=a&&a,passive:!1,once:!1}),t.bindings.push({target:e,args:o}),(e.addEventListener||e.on).apply(e,o),this};return{on:a,addEventListener:a,addListener:a,bind:a}},o9.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},o9.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},o9.load=function(){var e,t,n,r,i,a,o=this,s=function(e){return e.selected()},l=function(e,t,n,r){null==e&&(e=o.cy);for(var i=0;i<t.length;i++){var a=t[i];e.emit({originalEvent:n,type:a,position:r})}},u=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},c=function(e,t){var n=!0;if(o.cy.hasCompoundNodes()&&e&&e.pannable())for(var r=0;t&&r<t.length;r++){var e=t[r];if(e.isNode()&&e.isParent()&&!e.pannable()){n=!1;break}}else n=!0;return n},h=function(e){e[0]._private.grabbed=!0},p=function(e){e[0]._private.grabbed=!1},f=function(e){e[0]._private.rscratch.inDragLayer=!0},g=function(e){e[0]._private.rscratch.inDragLayer=!1},v=function(e){e[0]._private.rscratch.isGrabTarget=!0},y=function(e){e[0]._private.rscratch.isGrabTarget=!1},b=function(e,t){var n=t.addToList;!n.has(e)&&e.grabbable()&&!e.locked()&&(n.merge(e),h(e))},x=function(e,t){if(e.cy().hasCompoundNodes()&&!(null==t.inDragLayer&&null==t.addToList)){var n=e.descendants();t.inDragLayer&&(n.forEach(f),n.connectedEdges().forEach(f)),t.addToList&&b(n,t)}},E=function(e,t){t=t||{};var n=e.cy().hasCompoundNodes();t.inDragLayer&&(e.forEach(f),e.neighborhood().stdFilter(function(e){return!n||e.isEdge()}).forEach(f)),t.addToList&&e.forEach(function(e){b(e,t)}),x(e,t),_(e,{inDragLayer:t.inDragLayer}),o.updateCachedGrabbedEles()},T=function(e){e&&(o.getCachedZSortedEles().forEach(function(e){p(e),g(e),y(e)}),o.updateCachedGrabbedEles())},_=function(e,t){if(!(null==t.inDragLayer&&null==t.addToList)&&e.cy().hasCompoundNodes()){var n=e.ancestors().orphans();if(!n.same(e)){var r=n.descendants().spawnSelf().merge(n).unmerge(e).unmerge(e.descendants()),i=r.connectedEdges();t.inDragLayer&&(i.forEach(f),r.forEach(f)),t.addToList&&r.forEach(function(e){b(e,t)})}}},k=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},D="u">typeof MutationObserver,C="u">typeof ResizeObserver;D?(o.removeObserver=new MutationObserver(function(e){for(var t=0;t<e.length;t++){var n=e[t].removedNodes;if(n){for(var r=0;r<n.length;r++)if(n[r]===o.container){o.destroy();break}}}}),o.container.parentNode&&o.removeObserver.observe(o.container.parentNode,{childList:!0})):o.registerBinding(o.container,"DOMNodeRemoved",function(e){o.destroy()});var A=ew(function(){o.cy.resize()},100);D&&(o.styleObserver=new MutationObserver(A),o.styleObserver.observe(o.container,{attributes:!0})),o.registerBinding(window,"resize",A),C&&(o.resizeObserver=new ResizeObserver(A),o.resizeObserver.observe(o.container));var S=function(){o.invalidateContainerClientCoordsCache()};(function(e,t){for(;null!=e;)t(e),e=e.parentNode})(o.container,function(e){o.registerBinding(e,"transitionend",S),o.registerBinding(e,"animationend",S),o.registerBinding(e,"scroll",S)}),o.registerBinding(o.container,"contextmenu",function(e){e.preventDefault()});var N=function(e){for(var t=o.findContainerClientCoords(),n=t[0],r=t[1],i=t[2],a=t[3],s=e.touches?e.touches:[e],l=!1,u=0;u<s.length;u++){var c=s[u];if(n<=c.clientX&&c.clientX<=n+i&&r<=c.clientY&&c.clientY<=r+a){l=!0;break}}if(!l)return!1;for(var h=o.container,p=e.target,f=p.parentNode,g=!1;f;){if(f===h){g=!0;break}f=f.parentNode}return!!g};o.registerBinding(o.container,"mousedown",function(e){if(N(e)){e.preventDefault(),k(),o.hoverData.capture=!0,o.hoverData.which=e.which;var t=o.cy,n=[e.clientX,e.clientY],r=o.projectIntoViewport(n[0],n[1]),i=o.selection,a=o.findNearestElements(r[0],r[1],!0,!1),s=a[0],u=o.dragData.possibleDragElements;if(o.hoverData.mdownPos=r,o.hoverData.mdownGPos=n,3==e.which){o.hoverData.cxtStarted=!0;var c={originalEvent:e,type:"cxttapstart",position:{x:r[0],y:r[1]}};s?(s.activate(),s.emit(c),o.hoverData.down=s):t.emit(c),o.hoverData.downTime=new Date().getTime(),o.hoverData.cxtDragged=!1}else if(1==e.which){if(s&&s.activate(),null!=s&&o.nodeIsGrabbable(s)){var h=function(t){return{originalEvent:e,type:t,position:{x:r[0],y:r[1]}}};if(v(s),s.selected()){u=o.dragData.possibleDragElements=t.collection();var p=t.$(function(e){return e.isNode()&&e.selected()&&o.nodeIsGrabbable(e)});E(p,{addToList:u}),s.emit(h("grabon")),p.forEach(function(e){e.emit(h("grab"))})}else E(s,{addToList:u=o.dragData.possibleDragElements=t.collection()}),s.emit(h("grabon")).emit(h("grab"));o.redrawHint("eles",!0),o.redrawHint("drag",!0)}o.hoverData.down=s,o.hoverData.downs=a,o.hoverData.downTime=new Date().getTime(),l(s,["mousedown","tapstart","vmousedown"],e,{x:r[0],y:r[1]}),null==s?(i[4]=1,o.data.bgActivePosistion={x:r[0],y:r[1]},o.redrawHint("select",!0),o.redraw()):s.pannable()&&(i[4]=1),o.hoverData.tapholdCancelled=!1,clearTimeout(o.hoverData.tapholdTimeout),o.hoverData.tapholdTimeout=setTimeout(function(){if(!o.hoverData.tapholdCancelled){var n=o.hoverData.down;n?n.emit({originalEvent:e,type:"taphold",position:{x:r[0],y:r[1]}}):t.emit({originalEvent:e,type:"taphold",position:{x:r[0],y:r[1]}})}},o.tapholdDuration)}i[0]=i[2]=r[0],i[1]=i[3]=r[1]}},!1),o.registerBinding(window,"mousemove",function(e){if(!(!o.hoverData.capture&&!N(e))){var t,n=!1,r=o.cy,i=r.zoom(),a=[e.clientX,e.clientY],s=o.projectIntoViewport(a[0],a[1]),h=o.hoverData.mdownPos,p=o.hoverData.mdownGPos,f=o.selection,g=null;o.hoverData.draggingEles||o.hoverData.dragging||o.hoverData.selecting||(g=o.findNearestElement(s[0],s[1],!0,!1));var v,y=o.hoverData.last,b=o.hoverData.down,x=[s[0]-f[2],s[1]-f[3]],_=o.dragData.possibleDragElements;if(p){var k=a[0]-p[0],D=a[1]-p[1];o.hoverData.isOverThresholdDrag=v=k*k+D*D>=o.desktopTapThreshold2}var C=u(e);v&&(o.hoverData.tapholdCancelled=!0),n=!0,l(g,["mousemove","vmousemove","tapdrag"],e,{x:s[0],y:s[1]});var A=function(){o.data.bgActivePosistion=void 0,o.hoverData.selecting||r.emit({originalEvent:e,type:"boxstart",position:{x:s[0],y:s[1]}}),f[4]=1,o.hoverData.selecting=!0,o.redrawHint("select",!0),o.redraw()};if(3===o.hoverData.which){if(v){var S={originalEvent:e,type:"cxtdrag",position:{x:s[0],y:s[1]}};b?b.emit(S):r.emit(S),o.hoverData.cxtDragged=!0,(!o.hoverData.cxtOver||g!==o.hoverData.cxtOver)&&(o.hoverData.cxtOver&&o.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:s[0],y:s[1]}}),o.hoverData.cxtOver=g,g&&g.emit({originalEvent:e,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}}else if(o.hoverData.dragging){if(n=!0,r.panningEnabled()&&r.userPanningEnabled()){if(o.hoverData.justStartedPan){var L=o.hoverData.mdownPos;t={x:(s[0]-L[0])*i,y:(s[1]-L[1])*i},o.hoverData.justStartedPan=!1}else t={x:x[0]*i,y:x[1]*i};r.panBy(t),r.emit("dragpan"),o.hoverData.dragged=!0}s=o.projectIntoViewport(e.clientX,e.clientY)}else if(1==f[4]&&(null==b||b.pannable()))v&&(!o.hoverData.dragging&&r.boxSelectionEnabled()&&(C||!r.panningEnabled()||!r.userPanningEnabled())?A():!o.hoverData.selecting&&r.panningEnabled()&&r.userPanningEnabled()&&c(b,o.hoverData.downs)&&(o.hoverData.dragging=!0,o.hoverData.justStartedPan=!0,f[4]=0,o.data.bgActivePosistion=tu(h),o.redrawHint("select",!0),o.redraw()),b&&b.pannable()&&b.active()&&b.unactivate());else{if(b&&b.pannable()&&b.active()&&b.unactivate(),b&&b.grabbed()||g==y||(y&&l(y,["mouseout","tapdragout"],e,{x:s[0],y:s[1]}),g&&l(g,["mouseover","tapdragover"],e,{x:s[0],y:s[1]}),o.hoverData.last=g),b){if(v){if(r.boxSelectionEnabled()&&C)b&&b.grabbed()&&(T(_),b.emit("freeon"),_.emit("free"),o.dragData.didDrag&&(b.emit("dragfreeon"),_.emit("dragfree"))),A();else if(b&&b.grabbed()&&o.nodeIsDraggable(b)){var I,O=!o.dragData.didDrag;O&&o.redrawHint("eles",!0),o.dragData.didDrag=!0,o.hoverData.draggingEles||E(_,{inDragLayer:!0});var M={x:0,y:0};if(w(x[0])&&w(x[1])&&(M.x+=x[0],M.y+=x[1],O)){var P=o.hoverData.dragDelta;P&&w(P[0])&&w(P[1])&&(M.x+=P[0],M.y+=P[1])}o.hoverData.draggingEles=!0,_.silentShift(M).emit("position drag"),o.redrawHint("drag",!0),o.redraw()}}else 0===(I=o.hoverData.dragDelta=o.hoverData.dragDelta||[]).length?(I.push(x[0]),I.push(x[1])):(I[0]+=x[0],I[1]+=x[1])}n=!0}if(f[2]=s[0],f[3]=s[1],n)return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}},!1),o.registerBinding(window,"mouseup",function(e){if(o.hoverData.capture){o.hoverData.capture=!1;var t=o.cy,n=o.projectIntoViewport(e.clientX,e.clientY),r=o.selection,i=o.findNearestElement(n[0],n[1],!0,!1),a=o.dragData.possibleDragElements,c=o.hoverData.down,h=u(e);if(o.data.bgActivePosistion&&(o.redrawHint("select",!0),o.redraw()),o.hoverData.tapholdCancelled=!0,o.data.bgActivePosistion=void 0,c&&c.unactivate(),3===o.hoverData.which){var p={originalEvent:e,type:"cxttapend",position:{x:n[0],y:n[1]}};if(c?c.emit(p):t.emit(p),!o.hoverData.cxtDragged){var f={originalEvent:e,type:"cxttap",position:{x:n[0],y:n[1]}};c?c.emit(f):t.emit(f)}o.hoverData.cxtDragged=!1,o.hoverData.which=null}else if(1===o.hoverData.which){if(l(i,["mouseup","tapend","vmouseup"],e,{x:n[0],y:n[1]}),o.dragData.didDrag||o.hoverData.dragged||o.hoverData.selecting||o.hoverData.isOverThresholdDrag||(l(c,["click","tap","vclick"],e,{x:n[0],y:n[1]}),O=!1,e.timeStamp-M<=t.multiClickDebounceTime()?(I&&clearTimeout(I),O=!0,M=null,l(c,["dblclick","dbltap","vdblclick"],e,{x:n[0],y:n[1]})):(I=setTimeout(function(){O||l(c,["oneclick","onetap","voneclick"],e,{x:n[0],y:n[1]})},t.multiClickDebounceTime()),M=e.timeStamp)),null!=c||o.dragData.didDrag||o.hoverData.selecting||o.hoverData.dragged||u(e)||(t.$(s).unselect(["tapunselect"]),a.length>0&&o.redrawHint("eles",!0),o.dragData.possibleDragElements=a=t.collection()),i!=c||o.dragData.didDrag||o.hoverData.selecting||null==i||!i._private.selectable||(o.hoverData.dragging||("additive"===t.selectionType()||h?i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]):h||(t.$(s).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"]))),o.redrawHint("eles",!0)),o.hoverData.selecting){var g=t.collection(o.getAllInBox(r[0],r[1],r[2],r[3]));o.redrawHint("select",!0),g.length>0&&o.redrawHint("eles",!0),t.emit({type:"boxend",originalEvent:e,position:{x:n[0],y:n[1]}}),"additive"===t.selectionType()||h||t.$(s).unmerge(g).unselect(),g.emit("box").stdFilter(function(e){return e.selectable()&&!e.selected()}).select().emit("boxselect"),o.redraw()}if(o.hoverData.dragging&&(o.hoverData.dragging=!1,o.redrawHint("select",!0),o.redrawHint("eles",!0),o.redraw()),!r[4]){o.redrawHint("drag",!0),o.redrawHint("eles",!0);var v=c&&c.grabbed();T(a),v&&(c.emit("freeon"),a.emit("free"),o.dragData.didDrag&&(c.emit("dragfreeon"),a.emit("dragfree")))}}r[4]=0,o.hoverData.down=null,o.hoverData.cxtStarted=!1,o.hoverData.draggingEles=!1,o.hoverData.selecting=!1,o.hoverData.isOverThresholdDrag=!1,o.dragData.didDrag=!1,o.hoverData.dragged=!1,o.hoverData.dragDelta=[],o.hoverData.mdownPos=null,o.hoverData.mdownGPos=null}},!1);var L=function(e){if(!o.scrollingPage){var t=o.cy,n=t.zoom(),r=t.pan(),i=o.projectIntoViewport(e.clientX,e.clientY),a=[i[0]*n+r.x,i[1]*n+r.y];if(o.hoverData.draggingEles||o.hoverData.dragging||o.hoverData.cxtStarted||0!==o.selection[4]){e.preventDefault();return}if(t.panningEnabled()&&t.userPanningEnabled()&&t.zoomingEnabled()&&t.userZoomingEnabled()){e.preventDefault(),o.data.wheelZooming=!0,clearTimeout(o.data.wheelTimeout),o.data.wheelTimeout=setTimeout(function(){o.data.wheelZooming=!1,o.redrawHint("eles",!0),o.redraw()},150),s=(null!=e.deltaY?-(e.deltaY/250):null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3)*o.wheelSensitivity,1===e.deltaMode&&(s*=33);var s,l=t.zoom()*Math.pow(10,s);"gesturechange"===e.type&&(l=o.gestureStartZoom*e.scale),t.zoom({level:l,renderedPosition:{x:a[0],y:a[1]}}),t.emit("gesturechange"===e.type?"pinchzoom":"scrollzoom")}}};o.registerBinding(o.container,"wheel",L,!0),o.registerBinding(window,"scroll",function(e){o.scrollingPage=!0,clearTimeout(o.scrollingPageTimeout),o.scrollingPageTimeout=setTimeout(function(){o.scrollingPage=!1},250)},!0),o.registerBinding(o.container,"gesturestart",function(e){o.gestureStartZoom=o.cy.zoom(),o.hasTouchStarted||e.preventDefault()},!0),o.registerBinding(o.container,"gesturechange",function(e){o.hasTouchStarted||L(e)},!0),o.registerBinding(o.container,"mouseout",function(e){var t=o.projectIntoViewport(e.clientX,e.clientY);o.cy.emit({originalEvent:e,type:"mouseout",position:{x:t[0],y:t[1]}})},!1),o.registerBinding(o.container,"mouseover",function(e){var t=o.projectIntoViewport(e.clientX,e.clientY);o.cy.emit({originalEvent:e,type:"mouseover",position:{x:t[0],y:t[1]}})},!1);var I,O,M,P,R,F,B,z,G,Y,V,X,j,U,H,q,W,$=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},K=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)};if(o.registerBinding(o.container,"touchstart",W=function(e){if(o.hasTouchStarted=!0,N(e)){k(),o.touchData.capture=!0,o.data.bgActivePosistion=void 0;var t=o.cy,n=o.touchData.now,r=o.touchData.earlier;if(e.touches[0]){var i=o.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);n[0]=i[0],n[1]=i[1]}if(e.touches[1]){var i=o.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);n[2]=i[0],n[3]=i[1]}if(e.touches[2]){var i=o.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);n[4]=i[0],n[5]=i[1]}if(e.touches[1]){o.touchData.singleTouchMoved=!0,T(o.dragData.touchDragEles);var a=o.findContainerClientCoords();X=a[0],j=a[1],U=a[2],H=a[3],P=e.touches[0].clientX-X,R=e.touches[0].clientY-j,F=e.touches[1].clientX-X,B=e.touches[1].clientY-j,q=0<=P&&P<=U&&0<=F&&F<=U&&0<=R&&R<=H&&0<=B&&B<=H;var s=t.pan(),u=t.zoom();if(z=$(P,R,F,B),G=K(P,R,F,B),V=[((Y=[(P+F)/2,(R+B)/2])[0]-s.x)/u,(Y[1]-s.y)/u],G<4e4&&!e.touches[2]){var c=o.findNearestElement(n[0],n[1],!0,!0),h=o.findNearestElement(n[2],n[3],!0,!0);c&&c.isNode()?(c.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:n[0],y:n[1]}}),o.touchData.start=c):h&&h.isNode()?(h.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:n[0],y:n[1]}}),o.touchData.start=h):t.emit({originalEvent:e,type:"cxttapstart",position:{x:n[0],y:n[1]}}),o.touchData.start&&(o.touchData.start._private.grabbed=!1),o.touchData.cxt=!0,o.touchData.cxtDragged=!1,o.data.bgActivePosistion=void 0,o.redraw();return}}if(e.touches[2])t.boxSelectionEnabled()&&e.preventDefault();else if(!e.touches[1]&&e.touches[0]){var p=o.findNearestElements(n[0],n[1],!0,!0),f=p[0];if(null!=f&&(f.activate(),o.touchData.start=f,o.touchData.starts=p,o.nodeIsGrabbable(f))){var g=o.dragData.touchDragEles=t.collection(),y=null;o.redrawHint("eles",!0),o.redrawHint("drag",!0),f.selected()?E(y=t.$(function(e){return e.selected()&&o.nodeIsGrabbable(e)}),{addToList:g}):E(f,{addToList:g}),v(f);var b=function(t){return{originalEvent:e,type:t,position:{x:n[0],y:n[1]}}};f.emit(b("grabon")),y?y.forEach(function(e){e.emit(b("grab"))}):f.emit(b("grab"))}l(f,["touchstart","tapstart","vmousedown"],e,{x:n[0],y:n[1]}),null==f&&(o.data.bgActivePosistion={x:i[0],y:i[1]},o.redrawHint("select",!0),o.redraw()),o.touchData.singleTouchMoved=!1,o.touchData.singleTouchStartTime=+new Date,clearTimeout(o.touchData.tapholdTimeout),o.touchData.tapholdTimeout=setTimeout(function(){!1!==o.touchData.singleTouchMoved||o.pinching||o.touchData.selecting||l(o.touchData.start,["taphold"],e,{x:n[0],y:n[1]})},o.tapholdDuration)}if(e.touches.length>=1){for(var x=o.touchData.startPosition=[],w=0;w<n.length;w++)x[w]=r[w]=n[w];var _=e.touches[0];o.touchData.startGPosition=[_.clientX,_.clientY]}}},!1),o.registerBinding(window,"touchmove",e=function(e){var t=o.touchData.capture;if(!(!t&&!N(e))){var n=o.selection,r=o.cy,i=o.touchData.now,a=o.touchData.earlier,s=r.zoom();if(e.touches[0]){var u=o.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=u[0],i[1]=u[1]}if(e.touches[1]){var u=o.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);i[2]=u[0],i[3]=u[1]}if(e.touches[2]){var u=o.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);i[4]=u[0],i[5]=u[1]}var h,p=o.touchData.startGPosition;if(t&&e.touches[0]&&p){for(var f=[],g=0;g<i.length;g++)f[g]=i[g]-a[g];var v=e.touches[0].clientX-p[0],y=v*v,b=e.touches[0].clientY-p[1];h=y+b*b>=o.touchTapThreshold2}if(t&&o.touchData.cxt){e.preventDefault();var x=e.touches[0].clientX-X,_=e.touches[0].clientY-j,k=e.touches[1].clientX-X,D=e.touches[1].clientY-j,C=K(x,_,k,D);if(C/G>=2.25||C>=22500){o.touchData.cxt=!1,o.data.bgActivePosistion=void 0,o.redrawHint("select",!0);var A={originalEvent:e,type:"cxttapend",position:{x:i[0],y:i[1]}};o.touchData.start?(o.touchData.start.unactivate().emit(A),o.touchData.start=null):r.emit(A)}}if(t&&o.touchData.cxt){var A={originalEvent:e,type:"cxtdrag",position:{x:i[0],y:i[1]}};o.data.bgActivePosistion=void 0,o.redrawHint("select",!0),o.touchData.start?o.touchData.start.emit(A):r.emit(A),o.touchData.start&&(o.touchData.start._private.grabbed=!1),o.touchData.cxtDragged=!0;var S=o.findNearestElement(i[0],i[1],!0,!0);(!o.touchData.cxtOver||S!==o.touchData.cxtOver)&&(o.touchData.cxtOver&&o.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:i[0],y:i[1]}}),o.touchData.cxtOver=S,S&&S.emit({originalEvent:e,type:"cxtdragover",position:{x:i[0],y:i[1]}}))}else if(t&&e.touches[2]&&r.boxSelectionEnabled())e.preventDefault(),o.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,o.touchData.selecting||r.emit({originalEvent:e,type:"boxstart",position:{x:i[0],y:i[1]}}),o.touchData.selecting=!0,o.touchData.didSelect=!0,n[4]=1,n&&0!==n.length&&void 0!==n[0]?(n[2]=(i[0]+i[2]+i[4])/3,n[3]=(i[1]+i[3]+i[5])/3):(n[0]=(i[0]+i[2]+i[4])/3,n[1]=(i[1]+i[3]+i[5])/3,n[2]=(i[0]+i[2]+i[4])/3+1,n[3]=(i[1]+i[3]+i[5])/3+1),o.redrawHint("select",!0),o.redraw();else if(t&&e.touches[1]&&!o.touchData.didSelect&&r.zoomingEnabled()&&r.panningEnabled()&&r.userZoomingEnabled()&&r.userPanningEnabled()){e.preventDefault(),o.data.bgActivePosistion=void 0,o.redrawHint("select",!0);var L=o.dragData.touchDragEles;if(L){o.redrawHint("drag",!0);for(var I=0;I<L.length;I++){var O=L[I]._private;O.grabbed=!1,O.rscratch.inDragLayer=!1}}var M=o.touchData.start,x=e.touches[0].clientX-X,_=e.touches[0].clientY-j,k=e.touches[1].clientX-X,D=e.touches[1].clientY-j,Y=$(x,_,k,D),U=Y/z;if(q){var H=x-P,W=_-R,Z=k-F,Q=D-B,J=r.zoom(),ee=J*U,et=r.pan(),en=V[0]*J+et.x,er=V[1]*J+et.y,ei={x:-ee/J*(en-et.x-(H+Z)/2)+en,y:-ee/J*(er-et.y-(W+Q)/2)+er};if(M&&M.active()){var L=o.dragData.touchDragEles;T(L),o.redrawHint("drag",!0),o.redrawHint("eles",!0),M.unactivate().emit("freeon"),L.emit("free"),o.dragData.didDrag&&(M.emit("dragfreeon"),L.emit("dragfree"))}r.viewport({zoom:ee,pan:ei,cancelOnFailedZoom:!0}),r.emit("pinchzoom"),z=Y,P=x,R=_,F=k,B=D,o.pinching=!0}if(e.touches[0]){var u=o.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=u[0],i[1]=u[1]}if(e.touches[1]){var u=o.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);i[2]=u[0],i[3]=u[1]}if(e.touches[2]){var u=o.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);i[4]=u[0],i[5]=u[1]}}else if(e.touches[0]&&!o.touchData.didSelect){var S,ea=o.touchData.start,eo=o.touchData.last;if(o.hoverData.draggingEles||o.swipePanning||(S=o.findNearestElement(i[0],i[1],!0,!0)),t&&null!=ea&&e.preventDefault(),t&&null!=ea&&o.nodeIsDraggable(ea)){if(h){var L=o.dragData.touchDragEles,es=!o.dragData.didDrag;es&&E(L,{inDragLayer:!0}),o.dragData.didDrag=!0;var el={x:0,y:0};if(w(f[0])&&w(f[1])&&(el.x+=f[0],el.y+=f[1],es)){o.redrawHint("eles",!0);var eu=o.touchData.dragDelta;eu&&w(eu[0])&&w(eu[1])&&(el.x+=eu[0],el.y+=eu[1])}o.hoverData.draggingEles=!0,L.silentShift(el).emit("position drag"),o.redrawHint("drag",!0),o.touchData.startPosition[0]==a[0]&&o.touchData.startPosition[1]==a[1]&&o.redrawHint("eles",!0),o.redraw()}else{var eu=o.touchData.dragDelta=o.touchData.dragDelta||[];0===eu.length?(eu.push(f[0]),eu.push(f[1])):(eu[0]+=f[0],eu[1]+=f[1])}}if(l(ea||S,["touchmove","tapdrag","vmousemove"],e,{x:i[0],y:i[1]}),ea&&ea.grabbed()||S==eo||(eo&&eo.emit({originalEvent:e,type:"tapdragout",position:{x:i[0],y:i[1]}}),S&&S.emit({originalEvent:e,type:"tapdragover",position:{x:i[0],y:i[1]}})),o.touchData.last=S,t)for(var I=0;I<i.length;I++)i[I]&&o.touchData.startPosition[I]&&h&&(o.touchData.singleTouchMoved=!0);if(t&&(null==ea||ea.pannable())&&r.panningEnabled()&&r.userPanningEnabled()){c(ea,o.touchData.starts)&&(e.preventDefault(),o.data.bgActivePosistion||(o.data.bgActivePosistion=tu(o.touchData.startPosition)),o.swipePanning?(r.panBy({x:f[0]*s,y:f[1]*s}),r.emit("dragpan")):h&&(o.swipePanning=!0,r.panBy({x:v*s,y:b*s}),r.emit("dragpan"),ea&&(ea.unactivate(),o.redrawHint("select",!0),o.touchData.start=null)));var u=o.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=u[0],i[1]=u[1]}}for(var g=0;g<i.length;g++)a[g]=i[g];t&&e.touches.length>0&&!o.hoverData.draggingEles&&!o.swipePanning&&null!=o.data.bgActivePosistion&&(o.data.bgActivePosistion=void 0,o.redrawHint("select",!0),o.redraw())}},!1),o.registerBinding(window,"touchcancel",t=function(e){var t=o.touchData.start;o.touchData.capture=!1,t&&t.unactivate()}),o.registerBinding(window,"touchend",n=function(e){var t,n=o.touchData.start;if(o.touchData.capture){0===e.touches.length&&(o.touchData.capture=!1),e.preventDefault();var u=o.selection;o.swipePanning=!1,o.hoverData.draggingEles=!1;var c=o.cy,h=c.zoom(),p=o.touchData.now,f=o.touchData.earlier;if(e.touches[0]){var g=o.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);p[0]=g[0],p[1]=g[1]}if(e.touches[1]){var g=o.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);p[2]=g[0],p[3]=g[1]}if(e.touches[2]){var g=o.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);p[4]=g[0],p[5]=g[1]}if(n&&n.unactivate(),o.touchData.cxt){if(t={originalEvent:e,type:"cxttapend",position:{x:p[0],y:p[1]}},n?n.emit(t):c.emit(t),!o.touchData.cxtDragged){var v={originalEvent:e,type:"cxttap",position:{x:p[0],y:p[1]}};n?n.emit(v):c.emit(v)}o.touchData.start&&(o.touchData.start._private.grabbed=!1),o.touchData.cxt=!1,o.touchData.start=null,o.redraw();return}if(!e.touches[2]&&c.boxSelectionEnabled()&&o.touchData.selecting){o.touchData.selecting=!1;var y=c.collection(o.getAllInBox(u[0],u[1],u[2],u[3]));u[0]=void 0,u[1]=void 0,u[2]=void 0,u[3]=void 0,u[4]=0,o.redrawHint("select",!0),c.emit({type:"boxend",originalEvent:e,position:{x:p[0],y:p[1]}}),y.emit("box").stdFilter(function(e){return e.selectable()&&!e.selected()}).select().emit("boxselect"),y.nonempty()&&o.redrawHint("eles",!0),o.redraw()}if(null!=n&&n.unactivate(),e.touches[2])o.data.bgActivePosistion=void 0,o.redrawHint("select",!0);else if(!e.touches[1]&&!e.touches[0]&&!e.touches[0]){o.data.bgActivePosistion=void 0,o.redrawHint("select",!0);var b=o.dragData.touchDragEles;if(null!=n){var x=n._private.grabbed;T(b),o.redrawHint("drag",!0),o.redrawHint("eles",!0),x&&(n.emit("freeon"),b.emit("free"),o.dragData.didDrag&&(n.emit("dragfreeon"),b.emit("dragfree"))),l(n,["touchend","tapend","vmouseup","tapdragout"],e,{x:p[0],y:p[1]}),n.unactivate(),o.touchData.start=null}else l(o.findNearestElement(p[0],p[1],!0,!0),["touchend","tapend","vmouseup","tapdragout"],e,{x:p[0],y:p[1]});var w=o.touchData.startPosition[0]-p[0],E=o.touchData.startPosition[1]-p[1];o.touchData.singleTouchMoved||(n||c.$(":selected").unselect(["tapunselect"]),l(n,["tap","vclick"],e,{x:p[0],y:p[1]}),r=!1,e.timeStamp-a<=c.multiClickDebounceTime()?(i&&clearTimeout(i),r=!0,a=null,l(n,["dbltap","vdblclick"],e,{x:p[0],y:p[1]})):(i=setTimeout(function(){r||l(n,["onetap","voneclick"],e,{x:p[0],y:p[1]})},c.multiClickDebounceTime()),a=e.timeStamp)),null!=n&&!o.dragData.didDrag&&n._private.selectable&&(w*w+E*E)*h*h<o.touchTapThreshold2&&!o.pinching&&("single"===c.selectionType()?(c.$(s).unmerge(n).unselect(["tapunselect"]),n.select(["tapselect"])):n.selected()?n.unselect(["tapunselect"]):n.select(["tapselect"]),o.redrawHint("eles",!0)),o.touchData.singleTouchMoved=!0}for(var _=0;_<p.length;_++)f[_]=p[_];o.dragData.didDrag=!1,0===e.touches.length&&(o.touchData.dragDelta=[],o.touchData.startPosition=null,o.touchData.startGPosition=null,o.touchData.didSelect=!1),e.touches.length<2&&(1===e.touches.length&&(o.touchData.startGPosition=[e.touches[0].clientX,e.touches[0].clientY]),o.pinching=!1,o.redrawHint("eles",!0),o.redraw())}},!1),typeof TouchEvent>"u"){var Z=[],Q=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},J=function(e){Z.push({event:e,touch:Q(e)})},ee=function(e){for(var t=0;t<Z.length;t++)if(Z[t].event.pointerId===e.pointerId){Z.splice(t,1);return}},et=function(e){var t=Z.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=Q(e)},en=function(e){e.touches=Z.map(function(e){return e.touch})},er=function(e){return"mouse"===e.pointerType||4===e.pointerType};o.registerBinding(o.container,"pointerdown",function(e){er(e)||(e.preventDefault(),J(e),en(e),W(e))}),o.registerBinding(o.container,"pointerup",function(e){er(e)||(ee(e),en(e),n(e))}),o.registerBinding(o.container,"pointercancel",function(e){er(e)||(ee(e),en(e),t(e))}),o.registerBinding(o.container,"pointermove",function(t){er(t)||(t.preventDefault(),et(t),en(t),e(t))})}};var o6={};o6.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl("polygon",e,t,n,r,i,this.points)},intersectLine:function(e,t,n,r,i,a,o){return tK(i,a,this.points,e,t,n/2,r/2,o)},checkPoint:function(e,t,n,r,i,a,o){return tY(e,t,this.points,a,o,r,i,[0,-1],n)}}},o6.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,a,o){return tU(i,a,e,t,n/2+o,r/2+o)},checkPoint:function(e,t,n,r,i,a,o){return tH(e,t,r,i,a,o,n)}}},o6.generateRoundPolygon=function(e,t){for(var n=Array(2*t.length),r=0;r<t.length/2;r++){var i=2*r,a=void 0;a=r<t.length/2-1?(r+1)*2:0,n[4*r]=t[i],n[4*r+1]=t[i+1];var o=t[a]-t[i],s=t[a+1]-t[i+1],l=Math.sqrt(o*o+s*s);n[4*r+2]=o/l,n[4*r+3]=s/l}return this.nodeShapes[e]={renderer:this,name:e,points:n,draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl("round-polygon",e,t,n,r,i,this.points)},intersectLine:function(e,t,n,r,i,a,o){return tZ(i,a,this.points,e,t,n,r)},checkPoint:function(e,t,n,r,i,a,o){return tV(e,t,this.points,a,o,r,i)}}},o6.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:tJ(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,a,o){return tM(i,a,e,t,n,r,o)},checkPoint:function(e,t,n,r,i,a,o){var s=t2(r,i),l=2*s;return!!(tY(e,t,this.points,a,o,r,i-l,[0,-1],n)||tY(e,t,this.points,a,o,r-l,i,[0,-1],n)||tH(e,t,l,l,a-r/2+s,o-i/2+s,n)||tH(e,t,l,l,a+r/2-s,o-i/2+s,n)||tH(e,t,l,l,a+r/2-s,o+i/2-s,n)||tH(e,t,l,l,a-r/2+s,o+i/2-s,n))}}},o6.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:t3(),points:tJ(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},generateCutTrianglePts:function(e,t,n,r){var i=this.cornerLength,a=t/2,o=e/2,s=n-o,l=n+o,u=r-a,c=r+a;return{topLeft:[s,u+i,s+i,u,s+i,u+i],topRight:[l-i,u,l,u+i,l-i,u+i],bottomRight:[l,c-i,l-i,c,l-i,c-i],bottomLeft:[s+i,c,s,c-i,s+i,c-i]}},intersectLine:function(e,t,n,r,i,a,o){var s=this.generateCutTrianglePts(n+2*o,r+2*o,e,t);return tK(i,a,[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]),e,t)},checkPoint:function(e,t,n,r,i,a,o){if(tY(e,t,this.points,a,o,r,i-2*this.cornerLength,[0,-1],n)||tY(e,t,this.points,a,o,r-2*this.cornerLength,i,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,i,a,o);return tG(e,t,s.topLeft)||tG(e,t,s.topRight)||tG(e,t,s.bottomRight)||tG(e,t,s.bottomLeft)}}},o6.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:tJ(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,a,o){var s=this.generateBarrelBezierPts(n+2*o,r+2*o,e,t),l=function(e){var t=tw({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),n=tw({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),r=tw({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,n.x,n.y,r.x,r.y,e[4],e[5]]};return tK(i,a,[].concat(l(s.topLeft),l(s.topRight),l(s.bottomRight),l(s.bottomLeft)),e,t)},generateBarrelBezierPts:function(e,t,n,r){var i=t/2,a=e/2,o=n-a,s=n+a,l=r-i,u=r+i,c=t4(e,t),h=c.heightOffset,p=c.widthOffset,f=c.ctrlPtOffsetPct*e,g={topLeft:[o,l+h,o+f,l,o+p,l],topRight:[s-p,l,s-f,l,s,l+h],bottomRight:[s,u-h,s-f,u,s-p,u],bottomLeft:[o+p,u,o+f,u,o,u-h]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},checkPoint:function(e,t,n,r,i,a,o){var s=t4(r,i),l=s.heightOffset,u=s.widthOffset;if(tY(e,t,this.points,a,o,r,i-2*l,[0,-1],n)||tY(e,t,this.points,a,o,r-2*u,i,[0,-1],n))return!0;for(var c=this.generateBarrelBezierPts(r,i,a,o),h=Object.keys(c),p=0;p<h.length;p++){var f=c[h[p]],g=function(e,t,n){var r=n[4],i=n[2],a=n[0],o=n[5],s=n[1],l=Math.min(r,a),u=Math.max(r,a);if(l<=e&&e<=u&&Math.min(o,s)<=t&&t<=Math.max(o,s)){var c=[r-2*i+a,2*(i-r),r],h=tR(c[0],c[1],c[2],e).filter(function(e){return 0<=e&&e<=1});if(h.length>0)return h[0]}return null}(e,t,f);if(null!=g){var v=tx(f[5],f[3],f[1],g);if(f.isTop&&v<=t||f.isBottom&&t<=v)return!0}}return!1}}},o6.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:tJ(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,a,o){var s=e-(n/2+o),l=t-(r/2+o),u=e+(n/2+o),c=t$(i,a,e,t,s,l,u,l,!1);return c.length>0?c:tM(i,a,e,t,n,r,o)},checkPoint:function(e,t,n,r,i,a,o){var s=t2(r,i),l=2*s;if(tY(e,t,this.points,a,o,r,i-l,[0,-1],n)||tY(e,t,this.points,a,o,r-l,i,[0,-1],n))return!0;var u=r/2+2*n,c=i/2+2*n;return!!(tG(e,t,[a-u,o-c,a-u,o,a+u,o,a+u,o-c])||tH(e,t,l,l,a+r/2-s,o+i/2-s,n)||tH(e,t,l,l,a-r/2+s,o+i/2-s,n))}}},o6.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",tJ(3,0)),this.generateRoundPolygon("round-triangle",tJ(3,0)),this.generatePolygon("rectangle",tJ(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",tJ(5,0)),this.generateRoundPolygon("round-pentagon",tJ(5,0)),this.generatePolygon("hexagon",tJ(6,0)),this.generateRoundPolygon("round-hexagon",tJ(6,0)),this.generatePolygon("heptagon",tJ(7,0)),this.generateRoundPolygon("round-heptagon",tJ(7,0)),this.generatePolygon("octagon",tJ(8,0)),this.generateRoundPolygon("round-octagon",tJ(8,0));var r=Array(20),i=t1(5,0),a=t1(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[2*s]*=o,a[2*s+1]*=o;for(var s=0;s<5;s++)r[4*s]=i[2*s],r[4*s+1]=i[2*s+1],r[4*s+2]=a[2*s],r[4*s+3]=a[2*s+1];r=t0(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),e.makePolygon=function(e){var n,r="polygon-"+e.join("$");return(n=this[r])?n:t.generatePolygon(r,e)}};var o8={};o8.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},o8.redraw=function(e){e=e||e$(),void 0===this.averageRedrawTime&&(this.averageRedrawTime=0),void 0===this.lastRedrawTime&&(this.lastRedrawTime=0),void 0===this.lastDrawTime&&(this.lastDrawTime=0),this.requestedFrame=!0,this.renderOptions=e},o8.beforeRender=function(e,t){if(!this.destroyed){null==t&&eX("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(e,t){return t.priority-e.priority})}};var o7=function(e,t,n){for(var r=e.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(t,n)};o8.startRenderLoop=function(){var e=this,t=e.cy;e.renderLoopStarted||(e.renderLoopStarted=!0,ek(function n(r){if(!e.destroyed){if(!t.batching()){if(e.requestedFrame&&!e.skipFrame){o7(e,!0,r);var i=eT();e.render(e.renderOptions);var a=e.lastDrawTime=eT();void 0===e.averageRedrawTime&&(e.averageRedrawTime=a-i),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=a-i;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else o7(e,!1,r)}e.skipFrame=!1,ek(n)}}))};var se=function(e){this.init(e)},st=se.prototype;st.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],st.init=function(e){this.options=e,this.cy=e.cy;var t=this.container=e.cy.container();if(s){var n=s.document,r=n.head,i="__________cytoscape_stylesheet",a="__________cytoscape_container",o=null!=n.getElementById(i);if(0>t.className.indexOf(a)&&(t.className=(t.className||"")+" "+a),!o){var l=n.createElement("style");l.id=i,l.innerHTML="."+a+" { position: relative; }",r.insertBefore(l,r.children[0])}"static"===s.getComputedStyle(t).getPropertyValue("position")&&eU("A Cytoscape container has style position:static and so can not use UI extensions properly")}this.selection=[void 0,void 0,void 0,void 0,0],this.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.redraws=0,this.showFps=e.showFps,this.debug=e.debug,this.hideEdgesOnViewport=e.hideEdgesOnViewport,this.textureOnViewport=e.textureOnViewport,this.wheelSensitivity=e.wheelSensitivity,this.motionBlurEnabled=e.motionBlur,this.forcedPixelRatio=w(e.pixelRatio)?e.pixelRatio:null,this.motionBlur=e.motionBlur,this.motionBlurOpacity=e.motionBlurOpacity,this.motionBlurTransparency=1-this.motionBlurOpacity,this.motionBlurPxRatio=1,this.mbPxRBlurry=1,this.minMbLowQualFrames=4,this.fullQualityMb=!1,this.clearedForMotionBlur=[],this.desktopTapThreshold=e.desktopTapThreshold,this.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,this.touchTapThreshold=e.touchTapThreshold,this.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,this.tapholdDuration=500,this.bindings=[],this.beforeRenderCallbacks=[],this.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},this.registerNodeShapes(),this.registerArrowShapes(),this.registerCalculationListeners()},st.notify=function(e,t){var n=this.cy;if(!this.destroyed){if("init"===e){this.load();return}if("destroy"===e){this.destroy();return}("add"===e||"remove"===e||"move"===e&&n.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&this.invalidateCachedZSortedEles(),"viewport"===e&&this.redrawHint("select",!0),("load"===e||"resize"===e||"mount"===e)&&(this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.container)),this.redrawHint("eles",!0),this.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},st.destroy=function(){this.destroyed=!0,this.cy.stopAnimationLoop();for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],n=t.target;(n.off||n.removeEventListener).apply(n,t.args)}if(this.bindings=[],this.beforeRenderCallbacks=[],this.onUpdateEleCalcsFns=[],this.removeObserver&&this.removeObserver.disconnect(),this.styleObserver&&this.styleObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(e){}},st.isHeadless=function(){return!1},[oX,o3,o4,o9,o6,o8].forEach(function(e){Y(st,e)});var sn=1e3/60,sr={setupDequeueing:function(e){return function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var r=ew(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),i=e.priority||eV;n.beforeRender(function(i,a){var o=eT(),s=n.averageRedrawTime,l=n.lastRedrawTime,u=[],c=n.cy.extent(),h=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var p=eT(),f=p-o,g=p-a;if(l<sn){var v=sn-(i?s:0);if(g>=e.deqFastCost*v)break}else if(i){if(f>=e.deqCost*l||f>=e.deqAvgCost*s)break}else if(g>=e.deqNoDrawCost*sn)break;var y=e.deq(t,h,c);if(y.length>0)for(var b=0;b<y.length;b++)u.push(y[b]);else break}u.length>0&&(e.onDeqd(t,u),!i&&e.shouldRedraw(t,u,h,c)&&r())},i(t))}}}},si=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eG;t(this,e),this.idsByKey=new e5,this.keyForId=new e5,this.cachesByLvl=new e5,this.lvls=[],this.getKey=n,this.doesEleInvalidateKey=r}return r(e,[{key:"getIdsFor",value:function(e){null==e&&eX("Can not get id list for null key");var t=this.idsByKey,n=this.idsByKey.get(e);return n||(n=new e4,t.set(e,n)),n}},{key:"addIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).delete(t)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t),r=this.getKey(e);this.deleteIdForKey(n,t),this.addIdForKey(r,t),this.keyForId.set(t,r)}},{key:"deleteKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteIdForKey(n,t),this.keyForId.delete(t)}},{key:"keyHasChangedFor",value:function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var t=this.cachesByLvl,n=this.lvls,r=t.get(e);return r||(r=new e5,t.set(e,r),n.push(e)),r}},{key:"getCache",value:function(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function(e,t){var n=this.getKey(e),r=this.getCache(n,t);return null!=r&&this.updateKeyMappingFor(e),r}},{key:"getForCachedKey",value:function(e,t){var n=this.keyForId.get(e.id());return this.getCache(n,t)}},{key:"hasCache",value:function(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function(e,t){var n=this.getKey(e);return this.hasCache(n,t)}},{key:"setCache",value:function(e,t,n){n.key=e,this.getCachesAt(t).set(e,n)}},{key:"set",value:function(e,t,n){var r=this.getKey(e);this.setCache(r,t,n),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,t){this.getCachesAt(t).delete(e)}},{key:"delete",value:function(e,t){var n=this.getKey(e);this.deleteCache(n,t)}},{key:"invalidateKey",value:function(e){var t=this;this.lvls.forEach(function(n){return t.deleteCache(e,n)})}},{key:"invalidate",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteKeyMappingFor(e);var r=this.doesEleInvalidateKey(e);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),e}(),sa={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},so=eK({getKey:null,doesEleInvalidateKey:eG,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:ez,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ss=function(e,t){this.renderer=e,this.onDequeues=[];var n=so(t);Y(this,n),this.lookup=new si(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},sl=ss.prototype;sl.reasons=sa,sl.getTextureQueue=function(e){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[e]=this.eleImgCaches[e]||[]},sl.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},sl.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new e7(function(e,t){return t.reqs-e.reqs})},sl.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},sl.getElement=function(e,t,n,r,i){var a,o=this,s=this.renderer,l=s.cy.zoom(),u=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!o.allowEdgeTxrCaching&&e.isEdge()||!o.allowParentTxrCaching&&e.isParent())return null;if(null==r&&(r=Math.ceil(tg(l*n))),r<-4)r=-4;else if(l>=7.99||r>3)return null;var c=Math.pow(2,r),h=t.h*c,p=t.w*c,f=s.eleTextBiggerThanMin(e,c);if(!this.isVisible(e,f))return null;var g=u.get(e,r);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;if(x=h<=25?25:h<=50?50:50*Math.ceil(h/50),h>1024||p>1024)return null;var v=o.getTextureQueue(x),y=v[v.length-2],b=function(){return o.recycleTexture(x,p)||o.addTexture(x,p)};y||(y=v[v.length-1]),y||(y=b()),y.width-y.usedWidth<p&&(y=b());for(var x,w,E=function(e){return e&&e.scaledLabelShown===f},T=i&&i===sa.dequeue,_=i&&i===sa.highQuality,k=i&&i===sa.downscale,D=r+1;D<=3;D++){var C=u.get(e,D);if(C){w=C;break}}var A=w&&w.level===r+1?w:null,S=function(){y.context.drawImage(A.texture.canvas,A.x,0,A.width,A.height,y.usedWidth,0,p,h)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,p,x),E(A))S();else if(E(w)){if(!_)return o.queueElement(e,w.level-1),w;for(var N=w.level;N>r;N--)A=o.getElement(e,t,n,N,sa.downscale);S()}else{if(!T&&!_&&!k)for(var L=r-1;L>=-4;L--){var I=u.get(e,L);if(I){a=I;break}}if(E(a))return o.queueElement(e,r),a;y.context.translate(y.usedWidth,0),y.context.scale(c,c),this.drawElement(y.context,e,t,f,!1),y.context.scale(1/c,1/c),y.context.translate(-y.usedWidth,0)}return g={x:y.usedWidth,texture:y,level:r,scale:c,width:p,height:h,scaledLabelShown:f},y.usedWidth+=Math.ceil(p+8),y.eleCaches.push(g),u.set(e,r,g),o.checkTextureFullness(y),g},sl.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},sl.invalidateElement=function(e){var t=this.lookup,n=[];if(t.isInvalid(e)){for(var r=-4;r<=3;r++){var i=t.getForCachedKey(e,r);i&&n.push(i)}if(t.invalidate(e))for(var a=0;a<n.length;a++){var o=n[a],s=o.texture;s.invalidatedWidth+=o.width,o.invalidated=!0,this.checkTextureUtility(s)}this.removeFromQueue(e)}},sl.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},sl.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?eZ(t,e):e.fullnessChecks++},sl.retireTexture=function(e){var t=e.height,n=this.getTextureQueue(t),r=this.lookup;eZ(n,e),e.retired=!0;for(var i=e.eleCaches,a=0;a<i.length;a++){var o=i[a];r.deleteCache(o.key,o.level)}eQ(i),this.getRetiredTextureQueue(t).push(e)},sl.addTexture=function(e,t){var n=this.getTextureQueue(e),r={};return n.push(r),r.eleCaches=[],r.height=e,r.width=Math.max(1024,t),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=this.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r},sl.recycleTexture=function(e,t){for(var n=this.getTextureQueue(e),r=this.getRetiredTextureQueue(e),i=0;i<r.length;i++){var a=r[i];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,eQ(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),eZ(r,a),n.push(a),a}},sl.queueElement=function(e,t){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(e),a=r[i];if(a)a.level=Math.max(a.level,t),a.eles.merge(e),a.reqs++,n.updateItem(a);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:i};n.push(o),r[i]=o}},sl.dequeue=function(e){for(var t=this.getElementQueue(),n=this.getElementKeyToQueue(),r=[],i=this.lookup,a=0;a<1&&t.size()>0;a++){var o=t.pop(),s=o.key,l=o.eles[0],u=i.hasCache(l,o.level);if(n[s]=null,!u){r.push(o);var c=this.getBoundingBox(l);this.getElement(l,c,e,o.level,sa.dequeue)}}return r},sl.removeFromQueue=function(e){var t=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(e),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=eB,t.updateItem(i),t.pop(),n[r]=null):i.eles.unmerge(e))},sl.onDequeue=function(e){this.onDequeues.push(e)},sl.offDequeue=function(e){eZ(this.onDequeues,e)},sl.setupDequeueing=sr.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++)(0,e.onDequeues[n])(t)},shouldRedraw:function(e,t,n,r){for(var i=0;i<t.length;i++)for(var a=t[i].eles,o=0;o<a.length;o++)if(tL(a[o].boundingBox(),r))return!0;return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var su=4e3*4e3,sc=function(e){var t=this,n=t.renderer=e,r=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=eT()-500,t.skipping=!1,t.eleTxrDeqs=r.collection(),t.scheduleElementRefinement=ew(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},50),n.beforeRender(function(e,n){n-t.lastInvalidationTime<=250?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip),t.layersQueue=new e7(function(e,t){return t.reqs-e.reqs}),t.setupDequeueing()},sh=sc.prototype,sd=0;sh.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),i=Math.ceil(e.h*n),a=this.renderer.makeOffscreenCanvas(r,i),o={id:sd=++sd%9007199254740991,bb:e,level:t,width:r,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(n,n),s.translate(l,u),o},sh.getLayers=function(e,t,n){var r=this,i=r.renderer.cy.zoom(),a=r.firstGet;if(r.firstGet=!1,null==n){if((n=Math.ceil(tg(i*t)))<-4)n=-4;else if(i>=3.99||n>2)return null}r.validateLayersElesOrdering(n,e);var o,s,l=r.layersByLevel,u=Math.pow(2,n),c=l[n]=l[n]||[];if(r.levelIsComplete(n,e))return c;(function(){var t=function(t){if(r.validateLayersElesOrdering(t,e),r.levelIsComplete(t,e))return s=l[t],!0},i=function(e){if(!s)for(var r=n+e;-4<=r&&r<=2&&!t(r);r+=e);};i(1),i(-1);for(var a=c.length-1;a>=0;a--){var o=c[a];o.invalid&&eZ(c,o)}})();var h=function(){if(!o){o=t_();for(var t=0;t<e.length;t++)tD(o,e[t].boundingBox())}return o};if(r.skipping&&!a)return null;for(var p=null,f=e.length/1,g=!a,v=0;v<e.length;v++){var y=e[v],b=y._private.rscratch,x=b.imgLayerCaches=b.imgLayerCaches||{},w=x[n];if(w){p=w;continue}if((!p||p.eles.length>=f||!tO(p.bb,y.boundingBox()))&&!(p=function(e){var t=(e=e||{}).after;if(h(),o.w*u*(o.h*u)>su)return null;var i=r.makeLayer(o,n);if(null!=t){var a=c.indexOf(t)+1;c.splice(a,0,i)}else(void 0===e.insert||e.insert)&&c.unshift(i);return i}({insert:!0,after:p})))return null;s||g?r.queueLayer(p,y):r.drawEleInLayer(p,y,n,t),p.eles.push(y),x[n]=p}return s||(g?null:c)},sh.getEleLevelForLayerLevel=function(e,t){return e},sh.drawEleInLayer=function(e,t,n,r){var i=this.renderer,a=e.context,o=t.boundingBox();0!==o.w&&0!==o.h&&t.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(a,!1),i.drawCachedElement(a,t,null,null,n,!0),i.setImgSmoothing(a,!0))},sh.levelIsComplete=function(e,t){var n=this.layersByLevel[e];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var a=n[i];if(a.reqs>0||a.invalid)return!1;r+=a.eles.length}return r===t.length},sh.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],a=-1,o=0;o<t.length;o++)if(i.eles[0]===t[o]){a=o;break}if(a<0){this.invalidateLayer(i);continue}for(var s=a,o=0;o<i.eles.length;o++)if(i.eles[o]!==t[s+o]){this.invalidateLayer(i);break}}},sh.updateElementsInLayers=function(e,t){for(var n=_(e[0]),r=0;r<e.length;r++)for(var i=n?null:e[r],a=n?e[r]:e[r].ele,o=a._private.rscratch,s=o.imgLayerCaches=o.imgLayerCaches||{},l=-4;l<=2;l++){var u=s[l];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||t(u,a,i))}},sh.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var n=this.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e},sh.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=eT(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(e,n,r){t.invalidateLayer(e)}))},sh.invalidateLayer=function(e){if(this.lastInvalidationTime=eT(),!e.invalid){var t=e.level,n=e.eles;eZ(this.layersByLevel[t],e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var r=0;r<n.length;r++){var i=n[r]._private.rscratch.imgLayerCaches;i&&(i[t]=null)}}},sh.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(e,n,r){var i=e.replacement;if(i||((i=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,i.eles=e.eles),!i.reqs)for(var a=0;a<i.eles.length;a++)t.queueLayer(i,i.eles[a])})},sh.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},sh.queueLayer=function(e,t){var n=this.layersQueue,r=e.elesQueue,i=r.hasId=r.hasId||{};if(!e.replacement){if(t){if(i[t.id()])return;r.push(t),i[t.id()]=!0}e.reqs?(e.reqs++,n.updateItem(e)):(e.reqs=1,n.push(e))}},sh.dequeue=function(e){for(var t=this.layersQueue,n=[],r=0;r<1&&0!==t.size();){var i=t.peek();if(i.replacement||i.replaces&&i!==i.replaces.replacement||i.invalid){t.pop();continue}var a=i.elesQueue.shift();a&&(this.drawEleInLayer(i,a,i.level,e),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(t.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}return n},sh.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],n=e.replaces,r=t.indexOf(n);if(!(r<0||n.invalid)){t[r]=e;for(var i=0;i<e.eles.length;i++){var a=e.eles[i]._private,o=a.imgLayerCaches=a.imgLayerCaches||{};o&&(o[e.level]=e)}this.requestRedraw()}},sh.requestRedraw=ew(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),sh.setupDequeueing=sr.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t){return e.dequeue(t)},onDeqd:eV,shouldRedraw:ez,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var sp,sf={};function sg(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}}function sv(e,t,n){for(var r,i=0;i<t.length;i++){var a=t[i];0===i&&(r=a),e.lineTo(a.x,a.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)}function sy(e,t,n){e.beginPath&&e.beginPath();for(var r=0;r<t.length;r++){var i=t[r];e.lineTo(i.x,i.y)}var a=n[0];e.moveTo(a.x,a.y);for(var r=1;r<n.length;r++){var i=n[r];e.lineTo(i.x,i.y)}e.closePath&&e.closePath()}function sm(e,t,n,r,i){e.beginPath&&e.beginPath(),e.arc(n,r,i,0,2*Math.PI,!1);var a=t[0];e.moveTo(a.x,a.y);for(var o=0;o<t.length;o++){var s=t[o];e.lineTo(s.x,s.y)}e.closePath&&e.closePath()}function sb(e,t,n,r){e.arc(t,n,r,0,2*Math.PI,!1)}sf.arrowShapeImpl=function(e){return(sp||(sp={polygon:sg,"triangle-backcurve":sv,"triangle-tee":sy,"circle-triangle":sm,"triangle-cross":sy,circle:sb}))[e]};var sx={};sx.drawElement=function(e,t,n,r,i,a){t.isNode()?this.drawNode(e,t,n,r,i,a):this.drawEdge(e,t,n,r,i,a)},sx.drawElementOverlay=function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},sx.drawElementUnderlay=function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},sx.drawCachedElementPortion=function(e,t,n,r,i,a,o,s){var l=n.getBoundingBox(t);if(!(0===l.w||0===l.h)){var u=n.getElement(t,l,r,i,a);if(null!=u){var c,h=s(this,t);if(0===h)return;var p,f,g,v,y,b=o(this,t),x=l.x1,w=l.y1,E=l.w,T=l.h;if(0!==b){var _=n.getRotationPoint(t);g=_.x,v=_.y,e.translate(g,v),e.rotate(b),(y=this.getImgSmoothing(e))||this.setImgSmoothing(e,!0);var k=n.getRotationOffset(t);p=k.x,f=k.y}else p=x,f=w;1!==h&&(c=e.globalAlpha,e.globalAlpha=c*h),e.drawImage(u.texture.canvas,u.x,0,u.width,u.height,p,f,E,T),1!==h&&(e.globalAlpha=c),0!==b&&(e.rotate(-b),e.translate(-g,-v),y||this.setImgSmoothing(e,!1))}else n.drawElement(e,t)}};var sw=function(){return 0},sE=function(e,t){return e.getTextAngle(t,null)},sT=function(e,t){return e.getTextAngle(t,"source")},s_=function(e,t){return e.getTextAngle(t,"target")},sk=function(e,t){return t.effectiveOpacity()},sD=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};sx.drawCachedElement=function(e,t,n,r,i,a){var o=this.data,s=o.eleTxrCache,l=o.lblTxrCache,u=o.slbTxrCache,c=o.tlbTxrCache,h=t.boundingBox(),p=!0===a?s.reasons.highQuality:null;if(!(0===h.w||0===h.h||!t.visible())&&(!r||tL(h,r))){var f=t.isEdge(),g=t.element()._private.rscratch.badLine;this.drawElementUnderlay(e,t),this.drawCachedElementPortion(e,t,s,n,i,p,sw,sk),f&&g||this.drawCachedElementPortion(e,t,l,n,i,p,sE,sD),f&&!g&&(this.drawCachedElementPortion(e,t,u,n,i,p,sT,sD),this.drawCachedElementPortion(e,t,c,n,i,p,s_,sD)),this.drawElementOverlay(e,t)}},sx.drawElements=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];this.drawElement(e,r)}},sx.drawCachedElements=function(e,t,n,r){for(var i=0;i<t.length;i++){var a=t[i];this.drawCachedElement(e,a,n,r)}},sx.drawCachedNodes=function(e,t,n,r){for(var i=0;i<t.length;i++){var a=t[i];a.isNode()&&this.drawCachedElement(e,a,n,r)}},sx.drawLayeredElements=function(e,t,n,r){var i=this.data.lyrTxrCache.getLayers(t,n);if(i)for(var a=0;a<i.length;a++){var o=i[a],s=o.bb;0===s.w||0===s.h||e.drawImage(o.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(e,t,n,r)};var sC={};sC.drawEdge=function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=!(arguments.length>5)||void 0===arguments[5]||arguments[5],o=this,s=t._private.rscratch;if(!(a&&!t.visible())&&!(s.badLine||null==s.allpts||isNaN(s.allpts[0]))){n&&(l=n,e.translate(-l.x1,-l.y1));var l,u=a?t.pstyle("opacity").value:1,c=a?t.pstyle("line-opacity").value:1,h=t.pstyle("curve-style").value,p=t.pstyle("line-style").value,f=t.pstyle("width").pfValue,g=t.pstyle("line-cap").value,v=u*c,y=u*c,b=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;"straight-triangle"===h?(o.eleStrokeStyle(e,t,n),o.drawEdgeTrianglePath(t,e,s.allpts)):(e.lineWidth=f,e.lineCap=g,o.eleStrokeStyle(e,t,n),o.drawEdgePath(t,e,s.allpts,p),e.lineCap="butt")},x=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;o.drawArrowheads(e,t,n)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var w=t.pstyle("ghost-offset-x").pfValue,E=t.pstyle("ghost-offset-y").pfValue,T=v*t.pstyle("ghost-opacity").value;e.translate(w,E),b(T),x(T),e.translate(-w,-E)}i&&o.drawEdgeUnderlay(e,t),b(),x(),i&&o.drawEdgeOverlay(e,t),o.drawElementText(e,t,null,r),n&&e.translate(l.x1,l.y1)}};var sA=function(e){if(!["overlay","underlay"].includes(e))throw Error("Invalid state");return function(t,n){if(n.visible()){var r=n.pstyle("".concat(e,"-opacity")).value;if(0!==r){var i=this.usePaths(),a=n._private.rscratch,o=n.pstyle("".concat(e,"-padding")).pfValue,s=n.pstyle("".concat(e,"-color")).value;t.lineWidth=2*o,"self"!==a.edgeType||i?t.lineCap="round":t.lineCap="butt",this.colorStrokeStyle(t,s[0],s[1],s[2],r),this.drawEdgePath(n,t,a.allpts,"solid")}}}};sC.drawEdgeOverlay=sA("overlay"),sC.drawEdgeUnderlay=sA("underlay"),sC.drawEdgePath=function(e,t,n,r){var i,a=e._private.rscratch,o=t,s=!1,l=this.usePaths(),u=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(l){var h=n.join("$");a.pathCacheKey&&a.pathCacheKey===h?(i=t=a.pathCache,s=!0):(i=t=new Path2D,a.pathCacheKey=h,a.pathCache=i)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(u),o.lineDashOffset=c;break;case"solid":o.setLineDash([])}if(!s&&!a.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var p=2;p+3<n.length;p+=4)t.quadraticCurveTo(n[p],n[p+1],n[p+2],n[p+3]);break;case"straight":case"segments":case"haystack":for(var f=2;f+1<n.length;f+=2)t.lineTo(n[f],n[f+1])}t=o,l?t.stroke(i):t.stroke(),t.setLineDash&&t.setLineDash([])},sC.drawEdgeTrianglePath=function(e,t,n){t.fillStyle=t.strokeStyle;for(var r=e.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var a=[n[i+2]-n[i],n[i+3]-n[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],l=[s[0]*r/2,s[1]*r/2];t.beginPath(),t.moveTo(n[i]-l[0],n[i+1]-l[1]),t.lineTo(n[i]+l[0],n[i+1]+l[1]),t.lineTo(n[i+2],n[i+3]),t.closePath(),t.fill()}},sC.drawArrowheads=function(e,t,n){var r=t._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},sC.drawArrowhead=function(e,t,n,r,i,a,o){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(a)||null==a)){var s=t.pstyle(n+"-arrow-shape").value;if("none"!==s){var l="hollow"===t.pstyle(n+"-arrow-fill").value?"both":"filled",u=t.pstyle(n+"-arrow-fill").value,c=t.pstyle("width").pfValue,h=t.pstyle("opacity").value;void 0===o&&(o=h);var p=e.globalCompositeOperation;(1!==o||"hollow"===u)&&(e.globalCompositeOperation="destination-out",this.colorFillStyle(e,255,255,255,1),this.colorStrokeStyle(e,255,255,255,1),this.drawArrowShape(t,e,l,c,s,r,i,a),e.globalCompositeOperation=p);var f=t.pstyle(n+"-arrow-color").value;this.colorFillStyle(e,f[0],f[1],f[2],o),this.colorStrokeStyle(e,f[0],f[1],f[2],o),this.drawArrowShape(t,e,u,c,s,r,i,a)}}},sC.drawArrowShape=function(e,t,n,r,i,a,o,s){var l,u=this.usePaths()&&"triangle-cross"!==i,c=!1,h=t,p=e.pstyle("arrow-scale").value,f=this.getArrowWidth(r,p),g=this.arrowShapes[i];if(u){var v=this.arrowPathCache=this.arrowPathCache||[],y=eI(i),b=v[y];null!=b?(l=t=b,c=!0):(l=t=new Path2D,v[y]=l)}c||(t.beginPath&&t.beginPath(),u?g.draw(t,1,0,{x:0,y:0},1):g.draw(t,f,s,{x:a,y:o},r),t.closePath&&t.closePath()),t=h,u&&(t.translate(a,o),t.rotate(s),t.scale(f,f)),("filled"===n||"both"===n)&&(u?t.fill(l):t.fill()),("hollow"===n||"both"===n)&&(t.lineWidth=(g.matchEdgeWidth?r:1)/(u?f:1),t.lineJoin="miter",u?t.stroke(l):t.stroke()),u&&(t.scale(1/f,1/f),t.rotate(-s),t.translate(-a,-o))};var sS={};sS.safeDrawImage=function(e,t,n,r,i,a,o,s,l,u){if(!(i<=0||a<=0||l<=0||u<=0))try{e.drawImage(t,n,r,i,a,o,s,l,u)}catch(e){eU(e)}},sS.drawInscribedImage=function(e,t,n,r,i){var a=n.position(),o=a.x,s=a.y,l=n.cy().style(),u=l.getIndexedStyle.bind(l),c=u(n,"background-fit","value",r),h=u(n,"background-repeat","value",r),p=n.width(),f=n.height(),g=2*n.padding(),v=p+("inner"===u(n,"background-width-relative-to","value",r)?0:g),y=f+("inner"===u(n,"background-height-relative-to","value",r)?0:g),b=n._private.rscratch,x="node"===u(n,"background-clip","value",r),w=u(n,"background-image-opacity","value",r)*i,E=u(n,"background-image-smoothing","value",r),T=t.width||t.cachedW,_=t.height||t.cachedH;(null==T||null==_)&&(document.body.appendChild(t),T=t.cachedW=t.width||t.offsetWidth,_=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var k=T,D=_;if("auto"!==u(n,"background-width","value",r)&&(k="%"===u(n,"background-width","units",r)?u(n,"background-width","pfValue",r)*v:u(n,"background-width","pfValue",r)),"auto"!==u(n,"background-height","value",r)&&(D="%"===u(n,"background-height","units",r)?u(n,"background-height","pfValue",r)*y:u(n,"background-height","pfValue",r)),!(0===k||0===D)){if("contain"===c){var C=Math.min(v/k,y/D);k*=C,D*=C}else if("cover"===c){var C=Math.max(v/k,y/D);k*=C,D*=C}var A=o-v/2,S=u(n,"background-position-x","units",r),N=u(n,"background-position-x","pfValue",r);"%"===S?A+=(v-k)*N:A+=N;var L=u(n,"background-offset-x","units",r),I=u(n,"background-offset-x","pfValue",r);"%"===L?A+=(v-k)*I:A+=I;var O=s-y/2,M=u(n,"background-position-y","units",r),P=u(n,"background-position-y","pfValue",r);"%"===M?O+=(y-D)*P:O+=P;var R=u(n,"background-offset-y","units",r),F=u(n,"background-offset-y","pfValue",r);"%"===R?O+=(y-D)*F:O+=F,b.pathCache&&(A-=o,O-=s,o=0,s=0);var B=e.globalAlpha;e.globalAlpha=w;var z=this.getImgSmoothing(e),G=!1;if("no"===E&&z?(this.setImgSmoothing(e,!1),G=!0):"yes"!==E||z||(this.setImgSmoothing(e,!0),G=!0),"no-repeat"===h)x&&(e.save(),b.pathCache?e.clip(b.pathCache):(this.nodeShapes[this.getNodeShape(n)].draw(e,o,s,v,y),e.clip())),this.safeDrawImage(e,t,0,0,T,_,A,O,k,D),x&&e.restore();else{var Y=e.createPattern(t,h);e.fillStyle=Y,this.nodeShapes[this.getNodeShape(n)].draw(e,o,s,v,y),e.translate(A,O),e.fill(),e.translate(-A,-O)}e.globalAlpha=B,G&&this.setImgSmoothing(e,z)}};var sN={};sN.eleTextBiggerThanMin=function(e,t){return t||(t=Math.pow(2,Math.ceil(tg(e.cy().zoom()*this.getPixelRatio())))),!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},sN.drawElementText=function(e,t,n,r,i){var a=!(arguments.length>5)||void 0===arguments[5]||arguments[5];if(null==r){if(a&&!this.eleTextBiggerThanMin(t))return}else if(!1===r)return;if(t.isNode()){var o=t.pstyle("label");if(!o||!o.value)return;var s=this.getLabelJustification(t);e.textAlign=s,e.textBaseline="bottom"}else{var l=t.element()._private.rscratch.badLine,u=t.pstyle("label"),c=t.pstyle("source-label"),h=t.pstyle("target-label");if(l||(!u||!u.value)&&(!c||!c.value)&&(!h||!h.value))return;e.textAlign="center",e.textBaseline="bottom"}var p,f=!n;n&&(p=n,e.translate(-p.x1,-p.y1)),null==i?(this.drawText(e,t,null,f,a),t.isEdge()&&(this.drawText(e,t,"source",f,a),this.drawText(e,t,"target",f,a))):this.drawText(e,t,i,f,a),n&&e.translate(p.x1,p.y1)},sN.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((t=this.fontCaches[n]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},sN.setupTextStyle=function(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",a=t.pstyle("font-family").strValue,o=t.pstyle("font-weight").strValue,s=n?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*s,u=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=r+" "+o+" "+i+" "+a,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],s),this.colorStrokeStyle(e,c[0],c[1],c[2],l)},sN.getTextAngle=function(e,t){var n=e._private.rscratch,r=t?t+"-":"",i=e.pstyle(r+"text-rotation"),a=e0(n,"labelAngle",t);return"autorotate"===i.strValue?e.isEdge()?a:0:"none"===i.strValue?0:i.pfValue},sN.drawText=function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=t._private.rscratch,o=i?t.effectiveOpacity():1;if(!(i&&(0===o||0===t.pstyle("text-opacity").value))){"main"===n&&(n=null);var s,l,u=e0(a,"labelX",n),c=e0(a,"labelY",n),h=this.getLabelText(t,n);if(null!=h&&""!==h&&!isNaN(u)&&!isNaN(c)){this.setupTextStyle(e,t,i);var p,f=n?n+"-":"",g=e0(a,"labelWidth",n),v=e0(a,"labelHeight",n),y=t.pstyle(f+"text-margin-x").pfValue,b=t.pstyle(f+"text-margin-y").pfValue,x=t.isEdge(),w=t.pstyle("text-halign").value,E=t.pstyle("text-valign").value;switch(x&&(w="center",E="center"),u+=y,c+=b,0!==(p=r?this.getTextAngle(t,n):0)&&(s=u,l=c,e.translate(s,l),e.rotate(p),u=0,c=0),E){case"top":break;case"center":c+=v/2;break;case"bottom":c+=v}var T=t.pstyle("text-background-opacity").value,_=t.pstyle("text-border-opacity").value,k=t.pstyle("text-border-width").pfValue,D=t.pstyle("text-background-padding").pfValue;if(T>0||k>0&&_>0){var C=u-D;switch(w){case"left":C-=g;break;case"center":C-=g/2}var A=c-v-D,S=g+2*D,N=v+2*D;if(T>0){var L=e.fillStyle,I=t.pstyle("text-background-color").value;e.fillStyle="rgba("+I[0]+","+I[1]+","+I[2]+","+T*o+")",0===t.pstyle("text-background-shape").strValue.indexOf("round")?function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+r-a,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+i-a),e.quadraticCurveTo(t+r,n+i,t+r-a,n+i),e.lineTo(t+a,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+a,n),e.closePath(),e.fill()}(e,C,A,S,N,2):e.fillRect(C,A,S,N),e.fillStyle=L}if(k>0&&_>0){var O=e.strokeStyle,M=e.lineWidth,P=t.pstyle("text-border-color").value,R=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+P[0]+","+P[1]+","+P[2]+","+_*o+")",e.lineWidth=k,e.setLineDash)switch(R){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=k/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(C,A,S,N),"double"===R){var F=k/2;e.strokeRect(C+F,A+F,S-2*F,N-2*F)}e.setLineDash&&e.setLineDash([]),e.lineWidth=M,e.strokeStyle=O}}var B=2*t.pstyle("text-outline-width").pfValue;if(B>0&&(e.lineWidth=B),"wrap"===t.pstyle("text-wrap").value){var z=e0(a,"labelWrapCachedLines",n),G=e0(a,"labelLineHeight",n),Y=g/2,V=this.getLabelJustification(t);switch("auto"===V||("left"===w?"left"===V?u+=-g:"center"===V&&(u+=-Y):"center"===w?"left"===V?u+=-Y:"right"===V&&(u+=Y):"right"===w&&("center"===V?u+=Y:"right"===V&&(u+=g))),E){case"top":case"center":case"bottom":c-=(z.length-1)*G}for(var X=0;X<z.length;X++)B>0&&e.strokeText(z[X],u,c),e.fillText(z[X],u,c),c+=G}else B>0&&e.strokeText(h,u,c),e.fillText(h,u,c);0!==p&&(e.rotate(-p),e.translate(-s,-l))}}};var sL={};sL.drawNode=function(e,t,n){var r,i,a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],o=!(arguments.length>4)||void 0===arguments[4]||arguments[4],s=!(arguments.length>5)||void 0===arguments[5]||arguments[5],l=this,u=t._private,c=u.rscratch,h=t.position();if(!(!w(h.x)||!w(h.y))&&!(s&&!t.visible())){var p,f,g=s?t.effectiveOpacity():1,v=l.usePaths(),y=!1,b=t.padding();r=t.width()+2*b,i=t.height()+2*b,n&&(p=n,e.translate(-p.x1,-p.y1));for(var x=t.pstyle("background-image"),E=x.value,T=Array(E.length),_=Array(E.length),k=0,D=0;D<E.length;D++){var C=E[D];if(T[D]=null!=C&&"none"!==C){var A=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",D);k++,_[D]=l.getCachedImage(C,A,function(){u.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var S=t.pstyle("background-blacken").value,N=t.pstyle("border-width").pfValue,L=t.pstyle("background-opacity").value*g,I=t.pstyle("border-color").value,O=t.pstyle("border-style").value,M=t.pstyle("border-opacity").value*g;e.lineJoin="miter";var P=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;l.eleFillStyle(e,t,n)},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;l.colorStrokeStyle(e,I[0],I[1],I[2],t)},F=t.pstyle("shape").strValue,B=t.pstyle("shape-polygon-points").pfValue;if(v){e.translate(h.x,h.y);var z=l.nodePathCache=l.nodePathCache||[],G=eO("polygon"===F?F+","+B.join(","):F,""+i,""+r),Y=z[G];null!=Y?(f=Y,y=!0,c.pathCache=f):(f=new Path2D,z[G]=c.pathCache=f)}var V=function(){if(!y){var n=h;v&&(n={x:0,y:0}),l.nodeShapes[l.getNodeShape(t)].draw(f||e,n.x,n.y,r,i)}v?e.fill(f):e.fill()},X=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=u.backgrounding,a=0,o=0;o<_.length;o++){var s=t.cy().style().getIndexedStyle(t,"background-image-containment","value",o);if(r&&"over"===s||!r&&"inside"===s){a++;continue}T[o]&&_[o].complete&&!_[o].error&&(a++,l.drawInscribedImage(e,_[o],t,o,n))}u.backgrounding=a!==k,i!==u.backgrounding&&t.updateStyle(!1)},j=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;l.hasPie(t)&&(l.drawPie(e,t,a),n&&(v||l.nodeShapes[l.getNodeShape(t)].draw(e,h.x,h.y,r,i)))},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=(S>0?S:-S)*t,r=S>0?0:255;0!==S&&(l.colorFillStyle(e,r,r,r,n),v?e.fill(f):e.fill())},H=function(){if(N>0){if(e.lineWidth=N,e.lineCap="butt",e.setLineDash)switch(O){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}if(v?e.stroke(f):e.stroke(),"double"===O){e.lineWidth=N/3;var t=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",v?e.stroke(f):e.stroke(),e.globalCompositeOperation=t}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var q=t.pstyle("ghost-offset-x").pfValue,W=t.pstyle("ghost-offset-y").pfValue,$=t.pstyle("ghost-opacity").value,K=$*g;e.translate(q,W),P($*L),V(),X(K,!0),R($*M),H(),j(0!==S||0!==N),X(K,!1),U(K),e.translate(-q,-W)}v&&e.translate(-h.x,-h.y),o&&l.drawNodeUnderlay(e,t,h,r,i),v&&e.translate(h.x,h.y),P(),V(),X(g,!0),R(),H(),j(0!==S||0!==N),X(g,!1),U(),v&&e.translate(-h.x,-h.y),l.drawElementText(e,t,null,a),o&&l.drawNodeOverlay(e,t,h,r,i),n&&e.translate(p.x1,p.y1)}};var sI=function(e){if(!["overlay","underlay"].includes(e))throw Error("Invalid state");return function(t,n,r,i,a){if(n.visible()){var o=n.pstyle("".concat(e,"-padding")).pfValue,s=n.pstyle("".concat(e,"-opacity")).value,l=n.pstyle("".concat(e,"-color")).value,u=n.pstyle("".concat(e,"-shape")).value;if(s>0){if(r=r||n.position(),null==i||null==a){var c=n.padding();i=n.width()+2*c,a=n.height()+2*c}this.colorFillStyle(t,l[0],l[1],l[2],s),this.nodeShapes[u].draw(t,r.x,r.y,i+2*o,a+2*o),t.fill()}}}};sL.drawNodeOverlay=sI("overlay"),sL.drawNodeUnderlay=sI("underlay"),sL.hasPie=function(e){return(e=e[0])._private.hasPie},sL.drawPie=function(e,t,n,r){t=t[0],r=r||t.position();var i=t.cy().style(),a=t.pstyle("pie-size"),o=r.x,s=r.y,l=Math.min(t.width(),t.height())/2,u=0;this.usePaths()&&(o=0,s=0),"%"===a.units?l*=a.pfValue:void 0!==a.pfValue&&(l=a.pfValue/2);for(var c=1;c<=i.pieBackgroundN;c++){var h=t.pstyle("pie-"+c+"-background-size").value,p=t.pstyle("pie-"+c+"-background-color").value,f=t.pstyle("pie-"+c+"-background-opacity").value*n,g=h/100;g+u>1&&(g=1-u);var v=1.5*Math.PI+2*Math.PI*u,y=v+2*Math.PI*g;0===h||u>=1||u+g>1||(e.beginPath(),e.moveTo(o,s),e.arc(o,s,l,v,y),e.closePath(),this.colorFillStyle(e,p[0],p[1],p[2],f),e.fill(),u+=g)}};var sO={};sO.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},sO.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((t=n[i]).context===e){r=!1;break}return r&&(t={context:e},n.push(t)),t},sO.createGradientStyleFor=function(e,t,n,r,i){var a,o=this.usePaths(),s=n.pstyle(t+"-gradient-stop-colors").value,l=n.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===r){if(n.isEdge()){var u=n.sourceEndpoint(),c=n.targetEndpoint(),h=n.midpoint(),p=ty(u,h),f=ty(c,h);a=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(p,f))}else{var g=o?{x:0,y:0}:n.position(),v=n.paddedWidth(),y=n.paddedHeight();a=e.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(v,y))}}else if(n.isEdge()){var b=n.sourceEndpoint(),x=n.targetEndpoint();a=e.createLinearGradient(b.x,b.y,x.x,x.y)}else{var w=o?{x:0,y:0}:n.position(),E=n.paddedWidth(),T=n.paddedHeight(),_=E/2,k=T/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":a=e.createLinearGradient(w.x,w.y-k,w.x,w.y+k);break;case"to-top":a=e.createLinearGradient(w.x,w.y+k,w.x,w.y-k);break;case"to-left":a=e.createLinearGradient(w.x+_,w.y,w.x-_,w.y);break;case"to-right":a=e.createLinearGradient(w.x-_,w.y,w.x+_,w.y);break;case"to-bottom-right":case"to-right-bottom":a=e.createLinearGradient(w.x-_,w.y-k,w.x+_,w.y+k);break;case"to-top-right":case"to-right-top":a=e.createLinearGradient(w.x-_,w.y+k,w.x+_,w.y-k);break;case"to-bottom-left":case"to-left-bottom":a=e.createLinearGradient(w.x+_,w.y-k,w.x-_,w.y+k);break;case"to-top-left":case"to-left-top":a=e.createLinearGradient(w.x+_,w.y+k,w.x-_,w.y-k)}}if(!a)return null;for(var D=l.length===s.length,C=s.length,A=0;A<C;A++)a.addColorStop(D?l[A]:A/(C-1),"rgba("+s[A][0]+","+s[A][1]+","+s[A][2]+","+i+")");return a},sO.gradientFillStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"background",t,n,r);if(!i)return null;e.fillStyle=i},sO.colorFillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"},sO.eleFillStyle=function(e,t,n){var r=t.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(e,t,r,n);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],n)}},sO.gradientStrokeStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"line",t,n,r);if(!i)return null;e.strokeStyle=i},sO.colorStrokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"},sO.eleStrokeStyle=function(e,t,n){var r=t.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(e,t,r,n);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],n)}},sO.matchCanvasSize=function(e){var t=this.data,n=this.findContainerClientCoords(),r=n[2],i=n[3],a=this.getPixelRatio(),o=this.motionBlurPxRatio;(e===this.data.bufferCanvases[this.MOTIONBLUR_BUFFER_NODE]||e===this.data.bufferCanvases[this.MOTIONBLUR_BUFFER_DRAG])&&(a=o);var s,l=r*a,u=i*a;if(!(l===this.canvasWidth&&u===this.canvasHeight)){this.fontCaches=null;var c=t.canvasContainer;c.style.width=r+"px",c.style.height=i+"px";for(var h=0;h<this.CANVAS_LAYERS;h++)(s=t.canvases[h]).width=l,s.height=u,s.style.width=r+"px",s.style.height=i+"px";for(var h=0;h<this.BUFFER_COUNT;h++)(s=t.bufferCanvases[h]).width=l,s.height=u,s.style.width=r+"px",s.style.height=i+"px";this.textureMult=1,a<=1&&(s=t.bufferCanvases[this.TEXTURE_BUFFER],this.textureMult=2,s.width=l*this.textureMult,s.height=u*this.textureMult),this.canvasWidth=l,this.canvasHeight=u}},sO.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},sO.render=function(e){var t=(e=e||e$()).forcedContext,n=e.drawAllLayers,r=e.drawOnlyNodeLayer,i=e.forcedZoom,a=e.forcedPan,o=this,s=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,l=o.cy,u=o.data,c=u.canvasNeedsRedraw,h=o.textureOnViewport&&!t&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),p=void 0!==e.motionBlur?e.motionBlur:o.motionBlur,f=o.motionBlurPxRatio,g=l.hasCompoundNodes(),v=o.hoverData.draggingEles,y=!!(o.hoverData.selecting||o.touchData.selecting),b=p=p&&!t&&o.motionBlurEnabled&&!y;t||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!t&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),p&&(null==o.mbFrames&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(b=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!h&&(c[o.NODE]=!0,c[o.SELECT_BOX]=!0);var x=l.style(),w=l.zoom(),E=void 0!==i?i:w,T=l.pan(),_={x:T.x,y:T.y},k={zoom:w,pan:{x:T.x,y:T.y}},D=o.prevViewport;void 0===D||k.zoom!==D.zoom||k.pan.x!==D.pan.x||k.pan.y!==D.pan.y||v&&!g||(o.motionBlurPxRatio=1),a&&(_=a),E*=s,_.x*=s,_.y*=s;var C=o.getCachedZSortedEles();function A(e,t,n,r,i){var a=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",o.colorFillStyle(e,255,255,255,o.motionBlurTransparency),e.fillRect(t,n,r,i),e.globalCompositeOperation=a}function S(e,r){var s,l,c,h;o.clearingMotionBlur||e!==u.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]&&e!==u.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]?(s=_,l=E,c=o.canvasWidth,h=o.canvasHeight):(s={x:T.x*f,y:T.y*f},l=w*f,c=o.canvasWidth*f,h=o.canvasHeight*f),e.setTransform(1,0,0,1,0,0),"motionBlur"===r?A(e,0,0,c,h):!t&&(void 0===r||r)&&e.clearRect(0,0,c,h),n||(e.translate(s.x,s.y),e.scale(l,l)),a&&e.translate(a.x,a.y),i&&e.scale(i,i)}if(h||(o.textureDrawLastFrame=!1),h){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=l.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var N=o.data.bufferContexts[o.TEXTURE_BUFFER];N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:N,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult});var k=o.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:o.canvasWidth,height:o.canvasHeight};k.mpan={x:(0-k.pan.x)/k.zoom,y:(0-k.pan.y)/k.zoom}}c[o.DRAG]=!1,c[o.NODE]=!1;var L=u.contexts[o.NODE],I=o.textureCache.texture,k=o.textureCache.viewport;L.setTransform(1,0,0,1,0,0),p?A(L,0,0,k.width,k.height):L.clearRect(0,0,k.width,k.height);var O=x.core("outside-texture-bg-color").value,M=x.core("outside-texture-bg-opacity").value;o.colorFillStyle(L,O[0],O[1],O[2],M),L.fillRect(0,0,k.width,k.height);var w=l.zoom();S(L,!1),L.clearRect(k.mpan.x,k.mpan.y,k.width/k.zoom/s,k.height/k.zoom/s),L.drawImage(I,k.mpan.x,k.mpan.y,k.width/k.zoom/s,k.height/k.zoom/s)}else o.textureOnViewport&&!t&&(o.textureCache=null);var P=l.extent(),R=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),F=o.hideEdgesOnViewport&&R,B=[];if(B[o.NODE]=!c[o.NODE]&&p&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,B[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),B[o.DRAG]=!c[o.DRAG]&&p&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,B[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),c[o.NODE]||n||r||B[o.NODE]){var z=p&&!B[o.NODE]&&1!==f,L=t||(z?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:u.contexts[o.NODE]);S(L,p&&!z?"motionBlur":void 0),F?o.drawCachedNodes(L,C.nondrag,s,P):o.drawLayeredElements(L,C.nondrag,s,P),o.debug&&o.drawDebugPoints(L,C.nondrag),n||p||(c[o.NODE]=!1)}if(!r&&(c[o.DRAG]||n||B[o.DRAG])){var z=p&&!B[o.DRAG]&&1!==f,L=t||(z?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:u.contexts[o.DRAG]);S(L,p&&!z?"motionBlur":void 0),F?o.drawCachedNodes(L,C.drag,s,P):o.drawCachedElements(L,C.drag,s,P),o.debug&&o.drawDebugPoints(L,C.drag),n||p||(c[o.DRAG]=!1)}if(o.showFps||!r&&c[o.SELECT_BOX]&&!n){var L=t||u.contexts[o.SELECT_BOX];if(S(L),1==o.selection[4]&&(o.hoverData.selecting||o.touchData.selecting)){var w=o.cy.zoom(),G=x.core("selection-box-border-width").value/w;L.lineWidth=G,L.fillStyle="rgba("+x.core("selection-box-color").value[0]+","+x.core("selection-box-color").value[1]+","+x.core("selection-box-color").value[2]+","+x.core("selection-box-opacity").value+")",L.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),G>0&&(L.strokeStyle="rgba("+x.core("selection-box-border-color").value[0]+","+x.core("selection-box-border-color").value[1]+","+x.core("selection-box-border-color").value[2]+","+x.core("selection-box-opacity").value+")",L.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(u.bgActivePosistion&&!o.hoverData.selecting){var w=o.cy.zoom(),Y=u.bgActivePosistion;L.fillStyle="rgba("+x.core("active-bg-color").value[0]+","+x.core("active-bg-color").value[1]+","+x.core("active-bg-color").value[2]+","+x.core("active-bg-opacity").value+")",L.beginPath(),L.arc(Y.x,Y.y,x.core("active-bg-size").pfValue/w,0,2*Math.PI),L.fill()}var V=o.lastRedrawTime;if(o.showFps&&V){var X=Math.round(1e3/(V=Math.round(V)));L.setTransform(1,0,0,1,0,0),L.fillStyle="rgba(255, 0, 0, 0.75)",L.strokeStyle="rgba(255, 0, 0, 0.75)",L.lineWidth=1,L.fillText("1 frame = "+V+" ms = "+X+" fps",0,20),L.strokeRect(0,30,250,20),L.fillRect(0,30,250*Math.min(X/60,1),20)}n||(c[o.SELECT_BOX]=!1)}if(p&&1!==f){var j=u.contexts[o.NODE],U=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],H=u.contexts[o.DRAG],q=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],W=function(e,t,n){e.setTransform(1,0,0,1,0,0),n||!b?e.clearRect(0,0,o.canvasWidth,o.canvasHeight):A(e,0,0,o.canvasWidth,o.canvasHeight),e.drawImage(t,0,0,o.canvasWidth*f,o.canvasHeight*f,0,0,o.canvasWidth,o.canvasHeight)};(c[o.NODE]||B[o.NODE])&&(W(j,U,B[o.NODE]),c[o.NODE]=!1),(c[o.DRAG]||B[o.DRAG])&&(W(H,q,B[o.DRAG]),c[o.DRAG]=!1)}o.prevViewport=k,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),p&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!h,o.mbFrames=0,c[o.NODE]=!0,c[o.DRAG]=!0,o.redraw()},100)),t||l.emit("render")};var sM={};sM.drawPolygonPath=function(e,t,n,r,i,a){var o=r/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*a[0],n+s*a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(t+o*a[2*l],n+s*a[2*l+1]);e.closePath()},sM.drawRoundPolygonPath=function(e,t,n,r,i,a){var o=r/2,s=i/2,l=t5(r,i);e.beginPath&&e.beginPath();for(var u=0;u<a.length/4;u++){var c=void 0,h=void 0;c=0===u?a.length-2:4*u-2,h=4*u+2;var p=t+o*a[4*u],f=n+s*a[4*u+1],g=l/Math.tan(Math.acos(-a[c]*a[h]-a[c+1]*a[h+1])/2),v=p-g*a[c],y=f-g*a[c+1],b=p+g*a[h],x=f+g*a[h+1];0===u?e.moveTo(v,y):e.lineTo(v,y),e.arcTo(p,f,b,x,l)}e.closePath()},sM.drawRoundRectanglePath=function(e,t,n,r,i){var a=r/2,o=i/2,s=t2(r,i);e.beginPath&&e.beginPath(),e.moveTo(t,n-o),e.arcTo(t+a,n-o,t+a,n,s),e.arcTo(t+a,n+o,t,n+o,s),e.arcTo(t-a,n+o,t-a,n,s),e.arcTo(t-a,n-o,t,n-o,s),e.lineTo(t,n-o),e.closePath()},sM.drawBottomRoundRectanglePath=function(e,t,n,r,i){var a=r/2,o=i/2,s=t2(r,i);e.beginPath&&e.beginPath(),e.moveTo(t,n-o),e.lineTo(t+a,n-o),e.lineTo(t+a,n),e.arcTo(t+a,n+o,t,n+o,s),e.arcTo(t-a,n+o,t-a,n,s),e.lineTo(t-a,n-o),e.lineTo(t,n-o),e.closePath()},sM.drawCutRectanglePath=function(e,t,n,r,i){var a=r/2,o=i/2,s=t3();e.beginPath&&e.beginPath(),e.moveTo(t-a+s,n-o),e.lineTo(t+a-s,n-o),e.lineTo(t+a,n-o+s),e.lineTo(t+a,n+o-s),e.lineTo(t+a-s,n+o),e.lineTo(t-a+s,n+o),e.lineTo(t-a,n+o-s),e.lineTo(t-a,n-o+s),e.closePath()},sM.drawBarrelPath=function(e,t,n,r,i){var a=r/2,o=i/2,s=t-a,l=t+a,u=n-o,c=n+o,h=t4(r,i),p=h.widthOffset,f=h.heightOffset,g=h.ctrlPtOffsetPct*p;e.beginPath&&e.beginPath(),e.moveTo(s,u+f),e.lineTo(s,c-f),e.quadraticCurveTo(s+g,c,s+p,c),e.lineTo(l-p,c),e.quadraticCurveTo(l-g,c,l,c-f),e.lineTo(l,u+f),e.quadraticCurveTo(l-g,u,l-p,u),e.lineTo(s+p,u),e.quadraticCurveTo(s+g,u,s,u+f),e.closePath()};for(var sP={},sR={},sF=Math.PI/40,sB=0*Math.PI;sB<2*Math.PI;sB+=sF)sP[sB]=Math.sin(sB),sR[sB]=Math.cos(sB);sM.drawEllipsePath=function(e,t,n,r,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,i/2,0,0,2*Math.PI);else for(var a,o,s=r/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=sF)a=t-s*sP[u]*0+s*sR[u]*1,o=n+l*sR[u]*0+l*sP[u]*1,0===u?e.moveTo(a,o):e.lineTo(a,o);e.closePath()};var sz={};function sG(e){var t=e.indexOf(",");return e.substr(t+1)}function sY(e,t,n){var r=function(){return t.toDataURL(n,e.quality)};switch(e.output){case"blob-promise":return new n7(function(r,i){try{t.toBlob(function(e){null!=e?r(e):i(Error("`canvas.toBlob()` sent a null value in its callback"))},n,e.quality)}catch(e){i(e)}});case"blob":return function(e,t){for(var n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return new Blob([r],{type:t})}(sG(r()),n);case"base64":return sG(r());default:return r()}}sz.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},sz.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=e.full?Math.ceil(n.w):r[2],a=e.full?Math.ceil(n.h):r[3],o=w(e.maxWidth)||w(e.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==e.scale)i*=e.scale,a*=e.scale,l=e.scale;else if(o){var u=1/0,c=1/0;w(e.maxWidth)&&(u=l*e.maxWidth/i),w(e.maxHeight)&&(c=l*e.maxHeight/a),i*=l=Math.min(u,c),a*=l}o||(i*=s,a*=s,l*=s);var h=document.createElement("canvas");h.width=i,h.height=a,h.style.width=i+"px",h.style.height=a+"px";var p=h.getContext("2d");if(i>0&&a>0){p.clearRect(0,0,i,a),p.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(e.full)p.translate(-n.x1*l,-n.y1*l),p.scale(l,l),this.drawElements(p,f),p.scale(1/l,1/l),p.translate(n.x1*l,n.y1*l);else{var g=t.pan(),v={x:g.x*l,y:g.y*l};l*=t.zoom(),p.translate(v.x,v.y),p.scale(l,l),this.drawElements(p,f),p.scale(1/l,1/l),p.translate(-v.x,-v.y)}e.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=e.bg,p.rect(0,0,i,a),p.fill())}return h},sz.png=function(e){return sY(e,this.bufferCanvasImage(e),"image/png")},sz.jpg=function(e){return sY(e,this.bufferCanvasImage(e),"image/jpeg")};var sV={};sV.nodeShapeImpl=function(e,t,n,r,i,a,o){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,i,a);case"polygon":return this.drawPolygonPath(t,n,r,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(t,n,r,i,a,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,r,i,a);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,r,i,a);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,r,i,a);case"barrel":return this.drawBarrelPath(t,n,r,i,a)}};var sX=sj.prototype;function sj(e){var t=this;t.data={canvases:Array(sX.CANVAS_LAYERS),contexts:Array(sX.CANVAS_LAYERS),canvasNeedsRedraw:Array(sX.CANVAS_LAYERS),bufferCanvases:Array(sX.BUFFER_COUNT),bufferContexts:Array(sX.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",r="rgba(0,0,0,0)";t.data.canvasContainer=document.createElement("div");var i=t.data.canvasContainer.style;t.data.canvasContainer.style[n]=r,i.position="relative",i.zIndex="0",i.overflow="hidden";var a=e.cy.container();a.appendChild(t.data.canvasContainer),a.style[n]=r;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};u&&u.userAgent.match(/msie|trident|edge/i)&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var s=0;s<sX.CANVAS_LAYERS;s++){var l=t.data.canvases[s]=document.createElement("canvas");t.data.contexts[s]=l.getContext("2d"),Object.keys(o).forEach(function(e){l.style[e]=o[e]}),l.style.position="absolute",l.setAttribute("data-id","layer"+s),l.style.zIndex=String(sX.CANVAS_LAYERS-s),t.data.canvasContainer.appendChild(l),t.data.canvasNeedsRedraw[s]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[sX.NODE].setAttribute("data-id","layer"+sX.NODE+"-node"),t.data.canvases[sX.SELECT_BOX].setAttribute("data-id","layer"+sX.SELECT_BOX+"-selectbox"),t.data.canvases[sX.DRAG].setAttribute("data-id","layer"+sX.DRAG+"-drag");for(var s=0;s<sX.BUFFER_COUNT;s++)t.data.bufferCanvases[s]=document.createElement("canvas"),t.data.bufferContexts[s]=t.data.bufferCanvases[s].getContext("2d"),t.data.bufferCanvases[s].style.position="absolute",t.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),t.data.bufferCanvases[s].style.zIndex=String(-s-1),t.data.bufferCanvases[s].style.visibility="hidden";t.pathsEnabled=!0;var c=t_(),h=function(e){return{x:-e.w/2,y:-e.h/2}},p=function(e){return e.boundingBox(),e[0]._private.bodyBounds},f=function(e){return e.boundingBox(),e[0]._private.labelBounds.main||c},g=function(e){return e.boundingBox(),e[0]._private.labelBounds.source||c},v=function(e){return e.boundingBox(),e[0]._private.labelBounds.target||c},y=function(e,t){return t},b=function(e,t,n){var r=e?e+"-":"";return{x:t.x+n.pstyle(r+"text-margin-x").pfValue,y:t.y+n.pstyle(r+"text-margin-y").pfValue}},x=function(e,t,n){var r=e[0]._private.rscratch;return{x:r[t],y:r[n]}},w=t.data.eleTxrCache=new ss(t,{getKey:function(e){return e[0]._private.nodeKey},doesEleInvalidateKey:function(e){var t=e[0]._private;return t.oldBackgroundTimestamp!==t.backgroundTimestamp},drawElement:function(e,n,r,i,a){return t.drawElement(e,n,r,!1,!1,a)},getBoundingBox:p,getRotationPoint:function(e){var t;return{x:((t=p(e)).x1+t.x2)/2,y:(t.y1+t.y2)/2}},getRotationOffset:function(e){return h(p(e))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),E=t.data.lblTxrCache=new ss(t,{getKey:function(e){return e[0]._private.labelStyleKey},drawElement:function(e,n,r,i,a){return t.drawElementText(e,n,r,i,"main",a)},getBoundingBox:f,getRotationPoint:function(e){return b("",x(e,"labelX","labelY"),e)},getRotationOffset:function(e){var t=f(e),n=h(f(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":n.x=-t.w;break;case"right":n.x=0}switch(e.pstyle("text-valign").value){case"top":n.y=-t.h;break;case"bottom":n.y=0}}return n},isVisible:y}),T=t.data.slbTxrCache=new ss(t,{getKey:function(e){return e[0]._private.sourceLabelStyleKey},drawElement:function(e,n,r,i,a){return t.drawElementText(e,n,r,i,"source",a)},getBoundingBox:g,getRotationPoint:function(e){return b("source",x(e,"sourceLabelX","sourceLabelY"),e)},getRotationOffset:function(e){return h(g(e))},isVisible:y}),_=t.data.tlbTxrCache=new ss(t,{getKey:function(e){return e[0]._private.targetLabelStyleKey},drawElement:function(e,n,r,i,a){return t.drawElementText(e,n,r,i,"target",a)},getBoundingBox:v,getRotationPoint:function(e){return b("target",x(e,"targetLabelX","targetLabelY"),e)},getRotationOffset:function(e){return h(v(e))},isVisible:y}),k=t.data.lyrTxrCache=new sc(t);t.onUpdateEleCalcs(function(e,t){w.invalidateElements(t),E.invalidateElements(t),T.invalidateElements(t),_.invalidateElements(t),k.invalidateElements(t);for(var n=0;n<t.length;n++){var r=t[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}});var D=function(e){for(var t=0;t<e.length;t++)k.enqueueElementRefinement(e[t].ele)};w.onDequeue(D),E.onDequeue(D),T.onDequeue(D),_.onDequeue(D)}sX.CANVAS_LAYERS=3,sX.SELECT_BOX=0,sX.DRAG=1,sX.NODE=2,sX.BUFFER_COUNT=3,sX.TEXTURE_BUFFER=0,sX.MOTIONBLUR_BUFFER_NODE=1,sX.MOTIONBLUR_BUFFER_DRAG=2,sX.redrawHint=function(e,t){switch(e){case"eles":this.data.canvasNeedsRedraw[sX.NODE]=t;break;case"drag":this.data.canvasNeedsRedraw[sX.DRAG]=t;break;case"select":this.data.canvasNeedsRedraw[sX.SELECT_BOX]=t}};var sU="u">typeof Path2D;sX.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},sX.usePaths=function(){return sU&&this.pathsEnabled},sX.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},sX.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},sX.makeOffscreenCanvas=function(t,n){var r;return(typeof OffscreenCanvas>"u"?"undefined":e(OffscreenCanvas))!=="undefined"?r=new OffscreenCanvas(t,n):((r=document.createElement("canvas")).width=t,r.height=n),r},[sf,sx,sC,sS,sN,sL,sO,sM,sz,sV].forEach(function(e){Y(sX,e)});var sH=[{name:"null",impl:oG},{name:"base",impl:se},{name:"canvas",impl:sj}],sq={},sW={};function s$(e,t,n){var r=n,i=function(n){eU("Can not register `"+t+"` for `"+e+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===e){if(a5.prototype[t])return i(t);a5.prototype[t]=n}else if("collection"===e){if(aD.prototype[t])return i(t);aD.prototype[t]=n}else if("layout"===e){for(var a=function(e){this.options=e,n.call(this,e),x(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(n.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=n.prototype.stop;o.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var n=0;n<t.length;n++)t[n].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var h=function(e){return e._private.cy},p={addEventFields:function(e,t){t.layout=e,t.cy=h(e),t.target=e},bubble:function(){return!0},parent:function(e){return h(e)}};Y(o,{createEmitter:function(){return this._private.emitter=new i5(p,this),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),rQ.eventAliasesOn(o),r=a}else if("renderer"===e&&"null"!==t&&"base"!==t){var f=sK("renderer","base"),g=f.prototype,v=n.prototype,y=function(){f.apply(this,arguments),n.apply(this,arguments)},b=y.prototype;for(var w in g){var E=g[w];if(null!=v[w])return i(w);b[w]=E}for(var T in v)b[T]=v[T];g.clientFunctions.forEach(function(e){b[e]=b[e]||function(){eX("Renderer does not implement `renderer."+e+"()` on its prototype")}}),r=y}else if("__proto__"===e||"constructor"===e||"prototype"===e)return eX(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return H({map:sq,keys:[e,t],value:r})}function sK(e,t){return q({map:sq,keys:[e,t]})}function sZ(e,t,n,r,i){return H({map:sW,keys:[e,t,n,r],value:i})}function sQ(e,t,n,r){return q({map:sW,keys:[e,t,n,r]})}var sJ=function(){return 2==arguments.length?sK.apply(null,arguments):3==arguments.length?s$.apply(null,arguments):4==arguments.length?sQ.apply(null,arguments):5==arguments.length?sZ.apply(null,arguments):void eX("Invalid extension access syntax")};a5.prototype.extension=sJ,[{type:"layout",extensions:oz},{type:"renderer",extensions:sH}].forEach(function(e){e.extensions.forEach(function(t){s$(e.type,t.name,t.impl)})});var s0=function e(){if(!(this instanceof e))return new e;this.length=0},s1=s0.prototype;s1.instanceString=function(){return"stylesheet"},s1.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},s1.css=function(e,t){var n=this.length-1;if(v(e))this[n].properties.push({name:e,value:t});else if(x(e))for(var r=Object.keys(e),i=0;i<r.length;i++){var a=r[i],o=e[a];if(null!=o){var s=aJ.properties[a]||aJ.properties[I(a)];if(null!=s){var l=s.name;this[n].properties.push({name:l,value:o})}}}return this},s1.style=s1.css,s1.generateStyle=function(e){var t=new aJ(e);return this.appendToStyle(t)},s1.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n.selector,i=n.properties;e.selector(r);for(var a=0;a<i.length;a++){var o=i[a];e.css(o.name,o.value)}}return e};var s2=function(e){return(void 0===e&&(e={}),x(e))?new a5(e):v(e)?sJ.apply(sJ,arguments):void 0};return s2.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(s2),e.apply(null,t),this},s2.warnings=function(e){return ej(e)},s2.version="3.23.0",s2.stylesheet=s2.Stylesheet=s0,s2}();var I=L.exports;let O=(0,l.U)(I);var M,P={exports:{}},R={exports:{}},F={exports:{}};l.T,P.exports=(s||(s=1,l.T,R.exports=(M||(M=1,l.T,F.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t,n){function r(){}r.QUALITY=1,r.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,r.DEFAULT_INCREMENTAL=!1,r.DEFAULT_ANIMATION_ON_LAYOUT=!0,r.DEFAULT_ANIMATION_DURING_LAYOUT=!1,r.DEFAULT_ANIMATION_PERIOD=50,r.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,r.DEFAULT_GRAPH_MARGIN=15,r.NODE_DIMENSIONS_INCLUDE_LABELS=!1,r.SIMPLE_NODE_SIZE=40,r.SIMPLE_NODE_HALF_SIZE=r.SIMPLE_NODE_SIZE/2,r.EMPTY_COMPOUND_NODE_SIZE=40,r.MIN_EDGE_LENGTH=1,r.WORLD_BOUNDARY=1e6,r.INITIAL_WORLD_BOUNDARY=r.WORLD_BOUNDARY/1e3,r.WORLD_CENTER_X=1200,r.WORLD_CENTER_Y=900,e.exports=r},function(e,t,n){var r=n(2),i=n(8),a=n(9);function o(e,t,n){r.call(this,n),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=n,this.bendpoints=[],this.source=e,this.target=t}for(var s in o.prototype=Object.create(r.prototype),r)o[s]=r[s];o.prototype.getSource=function(){return this.source},o.prototype.getTarget=function(){return this.target},o.prototype.isInterGraph=function(){return this.isInterGraph},o.prototype.getLength=function(){return this.length},o.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},o.prototype.getBendpoints=function(){return this.bendpoints},o.prototype.getLca=function(){return this.lca},o.prototype.getSourceInLca=function(){return this.sourceInLca},o.prototype.getTargetInLca=function(){return this.targetInLca},o.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},o.prototype.getOtherEndInGraph=function(e,t){for(var n=this.getOtherEnd(e),r=t.getGraphManager().getRoot();;){if(n.getOwner()==t)return n;if(n.getOwner()==r)break;n=n.getOwner().getParent()}return null},o.prototype.updateLength=function(){var e=[,,,,];this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],1>Math.abs(this.lengthX)&&(this.lengthX=a.sign(this.lengthX)),1>Math.abs(this.lengthY)&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},o.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),1>Math.abs(this.lengthX)&&(this.lengthX=a.sign(this.lengthX)),1>Math.abs(this.lengthY)&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=o},function(e,t,n){e.exports=function(e){this.vGraphObject=e}},function(e,t,n){var r=n(2),i=n(10),a=n(13),o=n(0),s=n(16),l=n(4);function u(e,t,n,o){null==n&&null==o&&(o=t),r.call(this,o),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=o,this.edges=[],this.graphManager=e,null!=n&&null!=t?this.rect=new a(t.x,t.y,n.width,n.height):this.rect=new a}for(var c in u.prototype=Object.create(r.prototype),r)u[c]=r[c];u.prototype.getEdges=function(){return this.edges},u.prototype.getChild=function(){return this.child},u.prototype.getOwner=function(){return this.owner},u.prototype.getWidth=function(){return this.rect.width},u.prototype.setWidth=function(e){this.rect.width=e},u.prototype.getHeight=function(){return this.rect.height},u.prototype.setHeight=function(e){this.rect.height=e},u.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},u.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},u.prototype.getCenter=function(){return new l(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},u.prototype.getLocation=function(){return new l(this.rect.x,this.rect.y)},u.prototype.getRect=function(){return this.rect},u.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},u.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},u.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},u.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},u.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},u.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},u.prototype.getEdgeListToNode=function(e){var t=[],n=this;return n.edges.forEach(function(r){if(r.target==e){if(r.source!=n)throw"Incorrect edge source!";t.push(r)}}),t},u.prototype.getEdgesBetween=function(e){var t=[],n=this;return n.edges.forEach(function(r){if(!(r.source==n||r.target==n))throw"Incorrect edge source and/or target";(r.target==e||r.source==e)&&t.push(r)}),t},u.prototype.getNeighborsList=function(){var e=new Set,t=this;return t.edges.forEach(function(n){if(n.source==t)e.add(n.target);else{if(n.target!=t)throw"Incorrect incidency!";e.add(n.source)}}),e},u.prototype.withChildren=function(){var e=new Set;if(e.add(this),null!=this.child)for(var t=this.child.getNodes(),n=0;n<t.length;n++)t[n].withChildren().forEach(function(t){e.add(t)});return e},u.prototype.getNoOfChildren=function(){var e=0;if(null==this.child)e=1;else for(var t=this.child.getNodes(),n=0;n<t.length;n++)e+=t[n].getNoOfChildren();return 0==e&&(e=1),e},u.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},u.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},u.prototype.scatter=function(){var e,t,n=-o.INITIAL_WORLD_BOUNDARY,r=o.INITIAL_WORLD_BOUNDARY;e=o.WORLD_CENTER_X+s.nextDouble()*(r-n)+n;var i=-o.INITIAL_WORLD_BOUNDARY,a=o.INITIAL_WORLD_BOUNDARY;t=o.WORLD_CENTER_Y+s.nextDouble()*(a-i)+i,this.rect.x=e,this.rect.y=t},u.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var e=this.getChild();if(e.updateBounds(!0),this.rect.x=e.getLeft(),this.rect.y=e.getTop(),this.setWidth(e.getRight()-e.getLeft()),this.setHeight(e.getBottom()-e.getTop()),o.NODE_DIMENSIONS_INCLUDE_LABELS){var t=e.getRight()-e.getLeft(),n=e.getBottom()-e.getTop();this.labelWidth>t&&(this.rect.x-=(this.labelWidth-t)/2,this.setWidth(this.labelWidth)),this.labelHeight>n&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-n)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-n),this.setHeight(this.labelHeight))}}},u.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},u.prototype.transform=function(e){var t=this.rect.x;t>o.WORLD_BOUNDARY?t=o.WORLD_BOUNDARY:t<-o.WORLD_BOUNDARY&&(t=-o.WORLD_BOUNDARY);var n=this.rect.y;n>o.WORLD_BOUNDARY?n=o.WORLD_BOUNDARY:n<-o.WORLD_BOUNDARY&&(n=-o.WORLD_BOUNDARY);var r=new l(t,n),i=e.inverseTransformPoint(r);this.setLocation(i.x,i.y)},u.prototype.getLeft=function(){return this.rect.x},u.prototype.getRight=function(){return this.rect.x+this.rect.width},u.prototype.getTop=function(){return this.rect.y},u.prototype.getBottom=function(){return this.rect.y+this.rect.height},u.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=u},function(e,t,n){function r(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.setX=function(e){this.x=e},r.prototype.setY=function(e){this.y=e},r.prototype.getDifference=function(e){return new DimensionD(this.x-e.x,this.y-e.y)},r.prototype.getCopy=function(){return new r(this.x,this.y)},r.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},e.exports=r},function(e,t,n){var r=n(2),i=n(10),a=n(0),o=n(6),s=n(3),l=n(1),u=n(13),c=n(12),h=n(11);function p(e,t,n){r.call(this,n),this.estimatedSize=i.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof o?this.graphManager=t:null!=t&&t instanceof Layout&&(this.graphManager=t.graphManager)}for(var f in p.prototype=Object.create(r.prototype),r)p[f]=r[f];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(e,t,n){if(null==t&&null==n){if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(e)>-1)throw"Node already in graph!";return e.owner=this,this.getNodes().push(e),e}if(!(this.getNodes().indexOf(t)>-1&&this.getNodes().indexOf(n)>-1))throw"Source or target not in graph!";if(!(t.owner==n.owner&&t.owner==this))throw"Both owners must be this graph!";return t.owner!=n.owner?null:(e.source=t,e.target=n,e.isInterGraph=!1,this.getEdges().push(e),t.edges.push(e),n!=t&&n.edges.push(e),e)},p.prototype.remove=function(e){if(e instanceof s){if(null==e)throw"Node is null!";if(!(null!=e.owner&&e.owner==this))throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var t,n=e.edges.slice(),r=n.length,i=0;i<r;i++)(t=n[i]).isInterGraph?this.graphManager.remove(t):t.source.owner.remove(t);var a=this.nodes.indexOf(e);if(-1==a)throw"Node not in owner node list!";this.nodes.splice(a,1)}else if(e instanceof l){var t=e;if(null==t)throw"Edge is null!";if(!(null!=t.source&&null!=t.target))throw"Source and/or target is null!";if(!(null!=t.source.owner&&null!=t.target.owner&&t.source.owner==this&&t.target.owner==this))throw"Source and/or target owner is invalid!";var o=t.source.edges.indexOf(t),u=t.target.edges.indexOf(t);if(!(o>-1&&u>-1))throw"Source and/or target doesn't know this edge!";t.source.edges.splice(o,1),t.target!=t.source&&t.target.edges.splice(u,1);var a=t.source.owner.getEdges().indexOf(t);if(-1==a)throw"Not in owner's edge list!";t.source.owner.getEdges().splice(a,1)}},p.prototype.updateLeftTop=function(){for(var e,t,n,r=i.MAX_VALUE,a=i.MAX_VALUE,o=this.getNodes(),s=o.length,l=0;l<s;l++){var u=o[l];e=u.getTop(),t=u.getLeft(),r>e&&(r=e),a>t&&(a=t)}return r==i.MAX_VALUE?null:(n=null!=o[0].getParent().paddingLeft?o[0].getParent().paddingLeft:this.margin,this.left=a-n,this.top=r-n,new c(this.left,this.top))},p.prototype.updateBounds=function(e){for(var t,n,r,a,o,s=i.MAX_VALUE,l=-i.MAX_VALUE,c=i.MAX_VALUE,h=-i.MAX_VALUE,p=this.nodes,f=p.length,g=0;g<f;g++){var v=p[g];e&&null!=v.child&&v.updateBounds(),t=v.getLeft(),n=v.getRight(),r=v.getTop(),a=v.getBottom(),s>t&&(s=t),l<n&&(l=n),c>r&&(c=r),h<a&&(h=a)}var y=new u(s,c,l-s,h-c);s==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),o=null!=p[0].getParent().paddingLeft?p[0].getParent().paddingLeft:this.margin,this.left=y.x-o,this.right=y.x+y.width+o,this.top=y.y-o,this.bottom=y.y+y.height+o},p.calculateBounds=function(e){for(var t,n,r,a,o=i.MAX_VALUE,s=-i.MAX_VALUE,l=i.MAX_VALUE,c=-i.MAX_VALUE,h=e.length,p=0;p<h;p++){var f=e[p];t=f.getLeft(),n=f.getRight(),r=f.getTop(),a=f.getBottom(),o>t&&(o=t),s<n&&(s=n),l>r&&(l=r),c<a&&(c=a)}return new u(o,l,s-o,c-l)},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,n=t.length,r=0;r<n;r++)e+=t[r].calcEstimatedSize();return 0==e?this.estimatedSize=a.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=e/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var e=this;if(0==this.nodes.length){this.isConnected=!0;return}var t,n,r=new h,i=new Set,a=this.nodes[0];for(a.withChildren().forEach(function(e){r.push(e),i.add(e)});0!==r.length;){t=(a=r.shift()).getEdges();for(var o=t.length,s=0;s<o;s++)null==(n=t[s].getOtherEndInGraph(a,this))||i.has(n)||n.withChildren().forEach(function(e){r.push(e),i.add(e)})}if(this.isConnected=!1,i.size>=this.nodes.length){var l=0;i.forEach(function(t){t.owner==e&&l++}),l==this.nodes.length&&(this.isConnected=!0)}},e.exports=p},function(e,t,n){var r,i=n(1);function a(e){r=n(5),this.layout=e,this.graphs=[],this.edges=[]}a.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),n=this.add(e,t);return this.setRootGraph(n),this.rootGraph},a.prototype.add=function(e,t,n,r,i){if(null==n&&null==r&&null==i){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return e.parent=t,t.child=e,e}i=n,r=t,n=e;var a=r.getOwner(),o=i.getOwner();if(!(null!=a&&a.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(null!=o&&o.getGraphManager()==this))throw"Target not in this graph mgr!";if(a==o)return n.isInterGraph=!1,a.add(n,r,i);if(n.isInterGraph=!0,n.source=r,n.target=i,this.edges.indexOf(n)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(n),!(null!=n.source&&null!=n.target))throw"Edge source and/or target is null!";if(!(-1==n.source.edges.indexOf(n)&&-1==n.target.edges.indexOf(n)))throw"Edge already in source and/or target incidency list!";return n.source.edges.push(n),n.target.edges.push(n),n},a.prototype.remove=function(e){if(e instanceof r){if(e.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(e==this.rootGraph||null!=e.parent&&e.parent.graphManager==this))throw"Invalid parent node!";var t=[];t=t.concat(e.getEdges());for(var n,a,o=t.length,s=0;s<o;s++)a=t[s],e.remove(a);var l=[];o=(l=l.concat(e.getNodes())).length;for(var s=0;s<o;s++)n=l[s],e.remove(n);e==this.rootGraph&&this.setRootGraph(null);var u=this.graphs.indexOf(e);this.graphs.splice(u,1),e.parent=null}else if(e instanceof i){if(null==(a=e))throw"Edge is null!";if(!a.isInterGraph)throw"Not an inter-graph edge!";if(!(null!=a.source&&null!=a.target))throw"Source and/or target is null!";if(!(-1!=a.source.edges.indexOf(a)&&-1!=a.target.edges.indexOf(a)))throw"Source and/or target doesn't know this edge!";var u=a.source.edges.indexOf(a);if(a.source.edges.splice(u,1),u=a.target.edges.indexOf(a),a.target.edges.splice(u,1),!(null!=a.source.owner&&null!=a.source.owner.getGraphManager()))throw"Edge owner graph or owner graph manager is null!";if(-1==a.source.owner.getGraphManager().edges.indexOf(a))throw"Not in owner graph manager's edge list!";var u=a.source.owner.getGraphManager().edges.indexOf(a);a.source.owner.getGraphManager().edges.splice(u,1)}},a.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},a.prototype.getGraphs=function(){return this.graphs},a.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),n=t.length,r=0;r<n;r++)e=e.concat(t[r].getNodes());this.allNodes=e}return this.allNodes},a.prototype.resetAllNodes=function(){this.allNodes=null},a.prototype.resetAllEdges=function(){this.allEdges=null},a.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},a.prototype.getAllEdges=function(){if(null==this.allEdges){var e=[],t=this.getGraphs();t.length;for(var n=0;n<t.length;n++)e=e.concat(t[n].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},a.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},a.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},a.prototype.getRoot=function(){return this.rootGraph},a.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,null==e.parent&&(e.parent=this.layout.newNode("Root node"))},a.prototype.getLayout=function(){return this.layout},a.prototype.isOneAncestorOfOther=function(e,t){if(!(null!=e&&null!=t))throw"assert failed";if(e==t)return!0;for(var n,r=e.getOwner();null!=(n=r.getParent());){if(n==t)return!0;if(null==(r=n.getOwner()))break}for(r=t.getOwner();null!=(n=r.getParent());){if(n==e)return!0;if(null==(r=n.getOwner()))break}return!1},a.prototype.calcLowestCommonAncestors=function(){for(var e,t,n,r,i,a=this.getAllEdges(),o=a.length,s=0;s<o;s++){if(t=(e=a[s]).source,n=e.target,e.lca=null,e.sourceInLca=t,e.targetInLca=n,t==n){e.lca=t.getOwner();continue}for(r=t.getOwner();null==e.lca;){for(e.targetInLca=n,i=n.getOwner();null==e.lca;){if(i==r){e.lca=i;break}if(i==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=i.getParent(),i=e.targetInLca.getOwner()}if(r==this.rootGraph)break;null==e.lca&&(e.sourceInLca=r.getParent(),r=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}},a.prototype.calcLowestCommonAncestor=function(e,t){if(e==t)return e.getOwner();for(var n=e.getOwner();null!=n;){for(var r=t.getOwner();null!=r;){if(r==n)return r;r=r.getParent().getOwner()}n=n.getParent().getOwner()}return n},a.prototype.calcInclusionTreeDepths=function(e,t){null==e&&null==t&&(e=this.rootGraph,t=1);for(var n,r=e.getNodes(),i=r.length,a=0;a<i;a++)(n=r[a]).inclusionTreeDepth=t,null!=n.child&&this.calcInclusionTreeDepths(n.child,t+1)},a.prototype.includesInvalidEdge=function(){for(var e,t=this.edges.length,n=0;n<t;n++)if(e=this.edges[n],this.isOneAncestorOfOther(e.source,e.target))return!0;return!1},e.exports=a},function(e,t,n){var r=n(0);function i(){}for(var a in r)i[a]=r[a];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=3*i.MAX_NODE_DISPLACEMENT_INCREMENTAL,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=i},function(e,t,n){var r=n(12);function i(){}i.calcSeparationAmount=function(e,t,n,r){if(!e.intersects(t))throw"assert failed";var i=[,,];this.decideDirectionsForOverlappingNodes(e,t,i),n[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),n[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?n[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(n[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?n[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(n[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()));var a=Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()));t.getCenterY()===e.getCenterY()&&t.getCenterX()===e.getCenterX()&&(a=1);var o=a*n[0],s=n[1]/a;n[0]<s?s=n[0]:o=n[1],n[0]=-1*i[0]*(s/2+r),n[1]=-1*i[1]*(o/2+r)},i.decideDirectionsForOverlappingNodes=function(e,t,n){e.getCenterX()<t.getCenterX()?n[0]=-1:n[0]=1,e.getCenterY()<t.getCenterY()?n[1]=-1:n[1]=1},i.getIntersection2=function(e,t,n){var r=e.getCenterX(),i=e.getCenterY(),a=t.getCenterX(),o=t.getCenterY();if(e.intersects(t))return n[0]=r,n[1]=i,n[2]=a,n[3]=o,!0;var s=e.getX(),l=e.getY(),u=e.getRight(),c=e.getX(),h=e.getBottom(),p=e.getRight(),f=e.getWidthHalf(),g=e.getHeightHalf(),v=t.getX(),y=t.getY(),b=t.getRight(),x=t.getX(),w=t.getBottom(),E=t.getRight(),T=t.getWidthHalf(),_=t.getHeightHalf(),k=!1,D=!1;if(r===a){if(i>o)return n[0]=r,n[1]=l,n[2]=a,n[3]=w,!1;if(i<o)return n[0]=r,n[1]=h,n[2]=a,n[3]=y,!1}else if(i===o){if(r>a)return n[0]=s,n[1]=i,n[2]=b,n[3]=o,!1;if(r<a)return n[0]=u,n[1]=i,n[2]=v,n[3]=o,!1}else{var C=e.height/e.width,A=t.height/t.width,S=(o-i)/(a-r),N=void 0,L=void 0,I=void 0,O=void 0,M=void 0,P=void 0;if(-C===S?(r>a?(n[0]=c,n[1]=h):(n[0]=u,n[1]=l),k=!0):C===S&&(r>a?(n[0]=s,n[1]=l):(n[0]=p,n[1]=h),k=!0),-A===S?(a>r?(n[2]=x,n[3]=w):(n[2]=b,n[3]=y),D=!0):A===S&&(a>r?(n[2]=v,n[3]=y):(n[2]=E,n[3]=w),D=!0),k&&D)return!1;if(r>a?i>o?(N=this.getCardinalDirection(C,S,4),L=this.getCardinalDirection(A,S,2)):(N=this.getCardinalDirection(-C,S,3),L=this.getCardinalDirection(-A,S,1)):i>o?(N=this.getCardinalDirection(-C,S,1),L=this.getCardinalDirection(-A,S,3)):(N=this.getCardinalDirection(C,S,2),L=this.getCardinalDirection(A,S,4)),!k)switch(N){case 1:O=l,I=r+-g/S,n[0]=I,n[1]=O;break;case 2:I=p,O=i+f*S,n[0]=I,n[1]=O;break;case 3:O=h,I=r+g/S,n[0]=I,n[1]=O;break;case 4:I=c,O=i+-f*S,n[0]=I,n[1]=O}if(!D)switch(L){case 1:P=y,M=a+-_/S,n[2]=M,n[3]=P;break;case 2:M=E,P=o+T*S,n[2]=M,n[3]=P;break;case 3:P=w,M=a+_/S,n[2]=M,n[3]=P;break;case 4:M=x,P=o+-T*S,n[2]=M,n[3]=P}}return!1},i.getCardinalDirection=function(e,t,n){return e>t?n:1+n%4},i.getIntersection=function(e,t,n,i){if(null==i)return this.getIntersection2(e,t,n);var a=e.x,o=e.y,s=t.x,l=t.y,u=n.x,c=n.y,h=i.x,p=i.y,f=void 0,g=void 0,v=void 0,y=void 0,b=void 0,x=void 0,w=void 0,E=void 0,T=void 0;return v=l-o,b=a-s,w=s*o-a*l,y=p-c,x=u-h,E=h*c-u*p,0==(T=v*x-y*b)?null:(f=(b*E-x*w)/T,g=(y*w-v*E)/T,new r(f,g))},i.angleOfVector=function(e,t,n,r){var i=void 0;return e!==n?(i=Math.atan((r-t)/(n-e)),n<e?i+=Math.PI:r<t&&(i+=this.TWO_PI)):i=r<t?this.ONE_AND_HALF_PI:this.HALF_PI,i},i.doIntersect=function(e,t,n,r){var i=e.x,a=e.y,o=t.x,s=t.y,l=n.x,u=n.y,c=r.x,h=r.y,p=(o-i)*(h-u)-(c-l)*(s-a);if(0===p)return!1;var f=((h-u)*(c-i)+(l-c)*(h-a))/p,g=((a-s)*(c-i)+(o-i)*(h-a))/p;return 0<f&&f<1&&0<g&&g<1},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,e.exports=i},function(e,t,n){function r(){}r.sign=function(e){return e>0?1:e<0?-1:0},r.floor=function(e){return e<0?Math.ceil(e):Math.floor(e)},r.ceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.exports=r},function(e,t,n){function r(){}r.MAX_VALUE=2147483647,r.MIN_VALUE=-2147483648,e.exports=r},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return{value:e,next:null,prev:null}},a=function(e,t,n,r){return null!==e?e.next=t:r.head=t,null!==n?n.prev=t:r.tail=t,t.prev=e,t.next=n,r.length++,t},o=function(e,t){var n=e.prev,r=e.next;return null!==n?n.next=r:t.head=r,null!==r?r.prev=n:t.tail=n,e.prev=e.next=null,t.length--,e},s=function(){function e(t){var n=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.length=0,this.head=null,this.tail=null,null!=t&&t.forEach(function(e){return n.push(e)})}return r(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(e,t){return a(t.prev,i(e),t,this)}},{key:"insertAfter",value:function(e,t){return a(t,i(e),t.next,this)}},{key:"insertNodeBefore",value:function(e,t){return a(t.prev,e,t,this)}},{key:"insertNodeAfter",value:function(e,t){return a(t,e,t.next,this)}},{key:"push",value:function(e){return a(this.tail,i(e),null,this)}},{key:"unshift",value:function(e){return a(null,i(e),this.head,this)}},{key:"remove",value:function(e){return o(e,this)}},{key:"pop",value:function(){return o(this.tail,this).value}},{key:"popNode",value:function(){return o(this.tail,this)}},{key:"shift",value:function(){return o(this.head,this).value}},{key:"shiftNode",value:function(){return o(this.head,this)}},{key:"get_object_at",value:function(e){if(e<=this.length()){for(var t=1,n=this.head;t<e;)n=n.next,t++;return n.value}}},{key:"set_object_at",value:function(e,t){if(e<=this.length()){for(var n=1,r=this.head;n<e;)r=r.next,n++;r.value=t}}}]),e}();e.exports=s},function(e,t,n){function r(e,t,n){this.x=null,this.y=null,null==e&&null==t&&null==n?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==n?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==n&&(n=e,this.x=n.x,this.y=n.y)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.getLocation=function(){return new r(this.x,this.y)},r.prototype.setLocation=function(e,t,n){"Point"==e.constructor.name&&null==t&&null==n?(n=e,this.setLocation(n.x,n.y)):"number"==typeof e&&"number"==typeof t&&null==n&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},r.prototype.move=function(e,t){this.x=e,this.y=t},r.prototype.translate=function(e,t){this.x+=e,this.y+=t},r.prototype.equals=function(e){return"Point"==e.constructor.name?this.x==e.x&&this.y==e.y:this==e},r.prototype.toString=function(){return new r().constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=r},function(e,t,n){function r(e,t,n,r){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=n&&null!=r&&(this.x=e,this.y=t,this.width=n,this.height=r)}r.prototype.getX=function(){return this.x},r.prototype.setX=function(e){this.x=e},r.prototype.getY=function(){return this.y},r.prototype.setY=function(e){this.y=e},r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(e){this.width=e},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(e){this.height=e},r.prototype.getRight=function(){return this.x+this.width},r.prototype.getBottom=function(){return this.y+this.height},r.prototype.intersects=function(e){return!(this.getRight()<e.x||this.getBottom()<e.y||e.getRight()<this.x||e.getBottom()<this.y)},r.prototype.getCenterX=function(){return this.x+this.width/2},r.prototype.getMinX=function(){return this.getX()},r.prototype.getMaxX=function(){return this.getX()+this.width},r.prototype.getCenterY=function(){return this.y+this.height/2},r.prototype.getMinY=function(){return this.getY()},r.prototype.getMaxY=function(){return this.getY()+this.height},r.prototype.getWidthHalf=function(){return this.width/2},r.prototype.getHeightHalf=function(){return this.height/2},e.exports=r},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}i.lastID=0,i.createID=function(e){return i.isPrimitive(e)?e:(null!=e.uniqueID||(e.uniqueID=i.getString(),i.lastID++),e.uniqueID)},i.getString=function(e){return null==e&&(e=i.lastID),"Object#"+e},i.isPrimitive=function(e){var t=typeof e>"u"?"undefined":r(e);return null==e||"object"!=t&&"function"!=t},e.exports=i},function(e,t,n){function r(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}var i=n(0),a=n(6),o=n(3),s=n(1),l=n(5),u=n(4),c=n(17),h=n(27);function p(e){h.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}p.RANDOM_SEED=1,p.prototype=Object.create(h.prototype),p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var e=new a(this);return this.graphManager=e,e},p.prototype.newGraph=function(e){return new l(null,this.graphManager,e)},p.prototype.newNode=function(e){return new o(this.graphManager,e)},p.prototype.newEdge=function(e){return new s(null,null,e)},p.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){var e;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),e=!this.checkLayoutSuccess()&&this.layout(),"during"!==i.ANIMATE&&(e&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,e)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e=this.graphManager.getAllEdges(),t=0;t<e.length;t++)e[t];for(var n=this.graphManager.getRoot().getNodes(),t=0;t<n.length;t++)n[t];this.update(this.graphManager.getRoot())}},p.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof o){if(null!=e.getChild())for(var t=e.getChild().getNodes(),n=0;n<t.length;n++)update(t[n]);null!=e.vGraphObject&&e.vGraphObject.update(e)}else e instanceof s?null!=e.vGraphObject&&e.vGraphObject.update(e):e instanceof l&&null!=e.vGraphObject&&e.vGraphObject.update(e)},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(e){if(null==e)this.transform(new u(0,0));else{var t=new c,n=this.graphManager.getRoot().updateLeftTop();if(null!=n){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(n.x),t.setDeviceOrgY(n.y);for(var r=this.getAllNodes(),i=0;i<r.length;i++)r[i].transform(t)}}},p.prototype.positionNodesRandomly=function(e){if(null==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,n,r=e.getNodes(),i=0;i<r.length;i++)null==(n=(t=r[i]).getChild())||0==n.getNodes().length?t.scatter():(this.positionNodesRandomly(n),t.updateBounds())},p.prototype.getFlatForest=function(){for(var e=[],t=!0,n=this.graphManager.getRoot().getNodes(),i=!0,a=0;a<n.length;a++)null!=n[a].getChild()&&(i=!1);if(!i)return e;var o=new Set,s=[],l=new Map,u=[];for(u=u.concat(n);u.length>0&&t;){for(s.push(u[0]);s.length>0&&t;){var c=s[0];s.splice(0,1),o.add(c);for(var h=c.getEdges(),a=0;a<h.length;a++){var p=h[a].getOtherEnd(c);if(l.get(c)!=p){if(o.has(p)){t=!1;break}s.push(p),l.set(p,c)}}}if(t){var f=[].concat(r(o));e.push(f);for(var a=0;a<f.length;a++){var g=f[a],v=u.indexOf(g);v>-1&&u.splice(v,1)}o=new Set,l=new Map}else e=[]}return e},p.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],n=e.source,r=this.graphManager.calcLowestCommonAncestor(e.source,e.target),i=0;i<e.bendpoints.length;i++){var a=this.newNode(null);a.setRect(new Point(0,0),new Dimension(1,1)),r.add(a);var o=this.newEdge(null);this.graphManager.add(o,n,a),t.add(a),n=a}var o=this.newEdge(null);return this.graphManager.add(o,n,e.target),this.edgeToDummyNodes.set(e,t),e.isInterGraph()?this.graphManager.remove(e):r.remove(e),t},p.prototype.createBendpointsFromDummyNodes=function(){var e=[];e=e.concat(this.graphManager.getAllEdges()),e=[].concat(r(this.edgeToDummyNodes.keys())).concat(e);for(var t=0;t<e.length;t++){var n=e[t];if(n.bendpoints.length>0){for(var i=this.edgeToDummyNodes.get(n),a=0;a<i.length;a++){var o=i[a],s=new u(o.getCenterX(),o.getCenterY()),l=n.bendpoints.get(a);l.x=s.x,l.y=s.y,o.getOwner().remove(o)}this.graphManager.add(n,n.source,n.target)}}},p.transform=function(e,t,n,r){if(null==n||null==r)return e<=50?(i=9*t/500,a=t/10):(i=9*t/50,a=-8*t),i*e+a;var i,a,o=t;return e<=50?o-=(t-t/n)/50*(50-e):o+=(t*r-t)/50*(e-50),o},p.findCenterOfTree=function(e){var t=[];t=t.concat(e);var n=[],r=new Map,i=!1,a=null;(1==t.length||2==t.length)&&(i=!0,a=t[0]);for(var o=0;o<t.length;o++){var s=t[o],l=s.getNeighborsList().size;r.set(s,s.getNeighborsList().size),1==l&&n.push(s)}var u=[];for(u=u.concat(n);!i;){var c=[];c=c.concat(u),u=[];for(var o=0;o<t.length;o++){var s=t[o],h=t.indexOf(s);h>=0&&t.splice(h,1),s.getNeighborsList().forEach(function(e){if(0>n.indexOf(e)){var t=r.get(e)-1;1==t&&u.push(e),r.set(e,t)}})}n=n.concat(u),(1==t.length||2==t.length)&&(i=!0,a=t[0])}return a},p.prototype.setGraphManager=function(e){this.graphManager=e},e.exports=p},function(e,t,n){function r(){}r.seed=1,r.x=0,r.nextDouble=function(){return r.x=1e4*Math.sin(r.seed++),r.x-Math.floor(r.x)},e.exports=r},function(e,t,n){var r=n(4);function i(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(e){this.lworldExtX=e},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(e){this.lworldExtY=e},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},i.prototype.transformX=function(e){var t=0,n=this.lworldExtX;return 0!=n&&(t=this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/n),t},i.prototype.transformY=function(e){var t=0,n=this.lworldExtY;return 0!=n&&(t=this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/n),t},i.prototype.inverseTransformX=function(e){var t=0,n=this.ldeviceExtX;return 0!=n&&(t=this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/n),t},i.prototype.inverseTransformY=function(e){var t=0,n=this.ldeviceExtY;return 0!=n&&(t=this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/n),t},i.prototype.inverseTransformPoint=function(e){return new r(this.inverseTransformX(e.x),this.inverseTransformY(e.y))},e.exports=i},function(e,t,n){var r=n(15),i=n(7),a=n(0),o=n(8),s=n(9);function l(){r.call(this),this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=i.DEFAULT_EDGE_LENGTH,this.springConstant=i.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=i.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=i.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=i.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=i.MAX_ITERATIONS}for(var u in l.prototype=Object.create(r.prototype),r)l[u]=r[u];l.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},l.prototype.calcIdealEdgeLengths=function(){for(var e,t,n,r,o,s,l=this.getGraphManager().getAllEdges(),u=0;u<l.length;u++)(e=l[u]).idealLength=this.idealEdgeLength,e.isInterGraph&&(n=e.getSource(),r=e.getTarget(),o=e.getSourceInLca().getEstimatedSize(),s=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=o+s-2*a.SIMPLE_NODE_SIZE),t=e.getLca().getInclusionTreeDepth(),e.idealLength+=i.DEFAULT_EDGE_LENGTH*i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+r.getInclusionTreeDepth()-2*t))},l.prototype.initSpringEmbedder=function(){var e=this.getAllNodes().length;this.incremental?(e>i.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*i.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(e-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-i.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT_INCREMENTAL):(e>i.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(i.COOLING_ADAPTATION_FACTOR,1-(e-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*(1-i.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},l.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),n=0;n<t.length;n++)e=t[n],this.calcSpringForce(e,e.idealLength)},l.prototype.calcRepulsionForces=function(){var e,t,n,r,a,o=!(arguments.length>0)||void 0===arguments[0]||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&o&&this.updateGrid(),a=new Set,e=0;e<l.length;e++)n=l[e],this.calculateRepulsionForceOfANode(n,a,o,s),a.add(n);else for(e=0;e<l.length;e++)for(n=l[e],t=e+1;t<l.length;t++)r=l[t],n.getOwner()==r.getOwner()&&this.calcRepulsionForce(n,r)},l.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),n=0;n<t.length;n++)e=t[n],this.calcGravitationalForce(e)},l.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].move()},l.prototype.calcSpringForce=function(e,t){var n,r,i,a,o=e.getSource(),s=e.getTarget();if(this.uniformLeafNodeSizes&&null==o.getChild()&&null==s.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;0!=(n=e.getLength())&&(i=(r=this.springConstant*(n-t))*(e.lengthX/n),a=r*(e.lengthY/n),o.springForceX+=i,o.springForceY+=a,s.springForceX-=i,s.springForceY-=a)},l.prototype.calcRepulsionForce=function(e,t){var n,r,a,l,u,c,h,p=e.getRect(),f=t.getRect(),g=[,,],v=[,,,,];if(p.intersects(f)){o.calcSeparationAmount(p,f,g,i.DEFAULT_EDGE_LENGTH/2),c=2*g[0],h=2*g[1];var y=e.noOfChildren*t.noOfChildren/(e.noOfChildren+t.noOfChildren);e.repulsionForceX-=y*c,e.repulsionForceY-=y*h,t.repulsionForceX+=y*c,t.repulsionForceY+=y*h}else this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(n=f.getCenterX()-p.getCenterX(),r=f.getCenterY()-p.getCenterY()):(o.getIntersection(p,f,v),n=v[2]-v[0],r=v[3]-v[1]),Math.abs(n)<i.MIN_REPULSION_DIST&&(n=s.sign(n)*i.MIN_REPULSION_DIST),Math.abs(r)<i.MIN_REPULSION_DIST&&(r=s.sign(r)*i.MIN_REPULSION_DIST),l=Math.sqrt(a=n*n+r*r),c=(u=this.repulsionConstant*e.noOfChildren*t.noOfChildren/a)*n/l,h=u*r/l,e.repulsionForceX-=c,e.repulsionForceY-=h,t.repulsionForceX+=c,t.repulsionForceY+=h},l.prototype.calcGravitationalForce=function(e){var t,n,r,i,a,o,s,l;n=((t=e.getOwner()).getRight()+t.getLeft())/2,r=(t.getTop()+t.getBottom())/2,i=e.getCenterX()-n,a=e.getCenterY()-r,o=Math.abs(i)+e.getWidth()/2,s=Math.abs(a)+e.getHeight()/2,e.getOwner()==this.graphManager.getRoot()?(o>(l=t.getEstimatedSize()*this.gravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i,e.gravitationForceY=-this.gravityConstant*a):(o>(l=t.getEstimatedSize()*this.compoundGravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*a*this.compoundGravityConstant)},l.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=2>Math.abs(this.totalDisplacement-this.oldTotalDisplacement)),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},l.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},l.prototype.calcNoOfChildrenForAllNodes=function(){for(var e,t=this.graphManager.getAllNodes(),n=0;n<t.length;n++)(e=t[n]).noOfChildren=e.getNoOfChildren()},l.prototype.calcGrid=function(e){var t=0,n=0;t=parseInt(Math.ceil((e.getRight()-e.getLeft())/this.repulsionRange)),n=parseInt(Math.ceil((e.getBottom()-e.getTop())/this.repulsionRange));for(var r=Array(t),i=0;i<t;i++)r[i]=Array(n);for(var i=0;i<t;i++)for(var a=0;a<n;a++)r[i][a]=[];return r},l.prototype.addNodeToGrid=function(e,t,n){var r=0,i=0,a=0,o=0;r=parseInt(Math.floor((e.getRect().x-t)/this.repulsionRange)),i=parseInt(Math.floor((e.getRect().width+e.getRect().x-t)/this.repulsionRange)),a=parseInt(Math.floor((e.getRect().y-n)/this.repulsionRange)),o=parseInt(Math.floor((e.getRect().height+e.getRect().y-n)/this.repulsionRange));for(var s=r;s<=i;s++)for(var l=a;l<=o;l++)this.grid[s][l].push(e),e.setGridCoordinates(r,i,a,o)},l.prototype.updateGrid=function(){var e,t,n=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),e=0;e<n.length;e++)t=n[e],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},l.prototype.calculateRepulsionForceOfANode=function(e,t,n,r){if(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&n||r){var a=new Set;e.surrounding=[];for(var o,s=this.grid,l=e.startX-1;l<e.finishX+2;l++)for(var u=e.startY-1;u<e.finishY+2;u++)if(!(l<0||u<0||l>=s.length||u>=s[0].length)){for(var c=0;c<s[l][u].length;c++)if(o=s[l][u][c],!(e.getOwner()!=o.getOwner()||e==o)&&!t.has(o)&&!a.has(o)){var h=Math.abs(e.getCenterX()-o.getCenterX())-(e.getWidth()/2+o.getWidth()/2),p=Math.abs(e.getCenterY()-o.getCenterY())-(e.getHeight()/2+o.getHeight()/2);h<=this.repulsionRange&&p<=this.repulsionRange&&a.add(o)}}e.surrounding=[].concat(function(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}(a))}for(l=0;l<e.surrounding.length;l++)this.calcRepulsionForce(e,e.surrounding[l])},l.prototype.calcRepulsionRange=function(){return 0},e.exports=l},function(e,t,n){var r=n(1),i=n(7);function a(e,t,n){r.call(this,e,t,n),this.idealLength=i.DEFAULT_EDGE_LENGTH}for(var o in a.prototype=Object.create(r.prototype),r)a[o]=r[o];e.exports=a},function(e,t,n){var r=n(3);function i(e,t,n,i){r.call(this,e,t,n,i),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var a in i.prototype=Object.create(r.prototype),r)i[a]=r[a];i.prototype.setGridCoordinates=function(e,t,n,r){this.startX=e,this.finishX=t,this.startY=n,this.finishY=r},e.exports=i},function(e,t,n){function r(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(e){this.width=e},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(e){this.height=e},e.exports=r},function(e,t,n){var r=n(14);function i(){this.map={},this.keys=[]}i.prototype.put=function(e,t){var n=r.createID(e);this.contains(n)||(this.map[n]=t,this.keys.push(e))},i.prototype.contains=function(e){return r.createID(e),null!=this.map[e]},i.prototype.get=function(e){var t=r.createID(e);return this.map[t]},i.prototype.keySet=function(){return this.keys},e.exports=i},function(e,t,n){var r=n(14);function i(){this.set={}}i.prototype.add=function(e){var t=r.createID(e);this.contains(t)||(this.set[t]=e)},i.prototype.remove=function(e){delete this.set[r.createID(e)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(e){return this.set[r.createID(e)]==e},i.prototype.isEmpty=function(){return 0===this.size()},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),n=t.length,r=0;r<n;r++)e.push(this.set[t[r]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(e){for(var t=e.length,n=0;n<t;n++){var r=e[n];this.add(r)}},e.exports=i},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),a=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),(null!==n||void 0!==n)&&(this.compareFunction=this._defaultCompareFunction);var r=void 0;r=t instanceof i?t.size():t.length,this._quicksort(t,0,r-1)}return r(e,[{key:"_quicksort",value:function(e,t,n){if(t<n){var r=this._partition(e,t,n);this._quicksort(e,t,r),this._quicksort(e,r+1,n)}}},{key:"_partition",value:function(e,t,n){for(var r=this._get(e,t),i=t,a=n;;){for(;this.compareFunction(r,this._get(e,a));)a--;for(;this.compareFunction(this._get(e,i),r);)i++;if(!(i<a))return a;this._swap(e,i,a),i++,a--}}},{key:"_get",value:function(e,t){return e instanceof i?e.get_object_at(t):e[t]}},{key:"_set",value:function(e,t,n){e instanceof i?e.set_object_at(t,n):e[t]=n}},{key:"_swap",value:function(e,t,n){var r=this._get(e,t);this._set(e,t,this._get(e,n)),this._set(e,n,r)}},{key:"_defaultCompareFunction",value:function(e,t){return t>e}}]),e}();e.exports=a},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.sequence1=t,this.sequence2=n,this.match_score=r,this.mismatch_penalty=i,this.gap_penalty=a,this.iMax=t.length+1,this.jMax=n.length+1,this.grid=Array(this.iMax);for(var o=0;o<this.iMax;o++){this.grid[o]=Array(this.jMax);for(var s=0;s<this.jMax;s++)this.grid[o][s]=0}this.tracebackGrid=Array(this.iMax);for(var l=0;l<this.iMax;l++){this.tracebackGrid[l]=Array(this.jMax);for(var u=0;u<this.jMax;u++)this.tracebackGrid[l][u]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return r(e,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var n=1;n<this.iMax;n++)for(var r=1;r<this.jMax;r++){var i=[this.sequence1[n-1]===this.sequence2[r-1]?this.grid[n-1][r-1]+this.match_score:this.grid[n-1][r-1]+this.mismatch_penalty,this.grid[n-1][r]+this.gap_penalty,this.grid[n][r-1]+this.gap_penalty],a=this.arrayAllMaxIndexes(i);this.grid[n][r]=i[a[0]],this.tracebackGrid[n][r]=[a.includes(0),a.includes(1),a.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var t=e[0],n=this.tracebackGrid[t.pos[0]][t.pos[1]];n[0]&&e.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),n[1]&&e.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),n[2]&&e.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),0===t.pos[0]&&0===t.pos[1]&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),e.shift()}return this.alignments}},{key:"getAllIndexes",value:function(e,t){for(var n=[],r=-1;-1!==(r=e.indexOf(t,r+1));)n.push(r);return n}},{key:"arrayAllMaxIndexes",value:function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}}]),e}();e.exports=i},function(e,t,n){var r=function(){};r.FDLayout=n(18),r.FDLayoutConstants=n(7),r.FDLayoutEdge=n(19),r.FDLayoutNode=n(20),r.DimensionD=n(21),r.HashMap=n(22),r.HashSet=n(23),r.IGeometry=n(8),r.IMath=n(9),r.Integer=n(10),r.Point=n(12),r.PointD=n(4),r.RandomSeed=n(16),r.RectangleD=n(13),r.Transform=n(17),r.UniqueIDGeneretor=n(14),r.Quicksort=n(24),r.LinkedList=n(11),r.LGraphObject=n(2),r.LGraph=n(5),r.LEdge=n(1),r.LGraphManager=n(6),r.LNode=n(3),r.Layout=n(15),r.LayoutConstants=n(0),r.NeedlemanWunsch=n(25),e.exports=r},function(e,t,n){function r(){this.listeners=[]}var i=r.prototype;i.addListener=function(e,t){this.listeners.push({event:e,callback:t})},i.removeListener=function(e,t){for(var n=this.listeners.length;n>=0;n--){var r=this.listeners[n];r.event===e&&r.callback===t&&this.listeners.splice(n,1)}},i.emit=function(e,t){for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];e===r.event&&r.callback(t)}},e.exports=r}])),a=F.exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t){e.exports=a},function(e,t,n){var r=n(0).FDLayoutConstants;function i(){}for(var a in r)i[a]=r[a];i.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,i.DEFAULT_RADIAL_SEPARATION=r.DEFAULT_EDGE_LENGTH,i.DEFAULT_COMPONENT_SEPERATION=60,i.TILE=!0,i.TILING_PADDING_VERTICAL=10,i.TILING_PADDING_HORIZONTAL=10,i.TREE_REDUCTION_ON_INCREMENTAL=!1,e.exports=i},function(e,t,n){var r=n(0).FDLayoutEdge;function i(e,t,n){r.call(this,e,t,n)}for(var a in i.prototype=Object.create(r.prototype),r)i[a]=r[a];e.exports=i},function(e,t,n){var r=n(0).LGraph;function i(e,t,n){r.call(this,e,t,n)}for(var a in i.prototype=Object.create(r.prototype),r)i[a]=r[a];e.exports=i},function(e,t,n){var r=n(0).LGraphManager;function i(e){r.call(this,e)}for(var a in i.prototype=Object.create(r.prototype),r)i[a]=r[a];e.exports=i},function(e,t,n){var r=n(0).FDLayoutNode,i=n(0).IMath;function a(e,t,n,i){r.call(this,e,t,n,i)}for(var o in a.prototype=Object.create(r.prototype),r)a[o]=r[o];a.prototype.move=function(){var e=this.graphManager.getLayout();this.displacementX=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementY)),null==this.child?this.moveBy(this.displacementX,this.displacementY):0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},a.prototype.propogateDisplacementToChildren=function(e,t){for(var n,r=this.getChild().getNodes(),i=0;i<r.length;i++)null==(n=r[i]).getChild()?(n.moveBy(e,t),n.displacementX+=e,n.displacementY+=t):n.propogateDisplacementToChildren(e,t)},a.prototype.setPred1=function(e){this.pred1=e},a.prototype.getPred1=function(){return pred1},a.prototype.getPred2=function(){return pred2},a.prototype.setNext=function(e){this.next=e},a.prototype.getNext=function(){return next},a.prototype.setProcessed=function(e){this.processed=e},a.prototype.isProcessed=function(){return processed},e.exports=a},function(e,t,n){var r=n(0).FDLayout,i=n(4),a=n(3),o=n(5),s=n(2),l=n(1),u=n(0).FDLayoutConstants,c=n(0).LayoutConstants,h=n(0).Point,p=n(0).PointD,f=n(0).Layout,g=n(0).Integer,v=n(0).IGeometry,y=n(0).LGraph,b=n(0).Transform;function x(){r.call(this),this.toBeTiled={}}for(var w in x.prototype=Object.create(r.prototype),r)x[w]=r[w];x.prototype.newGraphManager=function(){var e=new i(this);return this.graphManager=e,e},x.prototype.newGraph=function(e){return new a(null,this.graphManager,e)},x.prototype.newNode=function(e){return new o(this.graphManager,e)},x.prototype.newEdge=function(e){return new s(null,null,e)},x.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.isSubLayout||(l.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=l.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=l.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=u.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=u.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=u.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=u.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/u.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=u.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},x.prototype.layout=function(){return c.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},x.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(l.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter(function(t){return e.has(t)});this.graphManager.setAllNodesToApplyGravitation(t)}}else{var n=this.getFlatForest();if(n.length>0)this.positionNodesRadially(n);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter(function(t){return e.has(t)});this.graphManager.setAllNodesToApplyGravitation(t),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},x.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%u.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0){if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter(function(t){return e.has(t)});this.graphManager.setAllNodesToApplyGravitation(t),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=u.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0}this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=u.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var n=!this.isTreeGrowing&&!this.isGrowthFinished,r=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(n,r),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},x.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},n=0;n<e.length;n++){var r=e[n].rect,i=e[n].id;t[i]={id:i,x:r.getCenterX(),y:r.getCenterY(),w:r.width,h:r.height}}return t},x.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if("during"===u.ANIMATE)this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},x.prototype.calculateNodesToApplyGravitationTo=function(){var e,t,n=[],r=this.graphManager.getGraphs(),i=r.length;for(t=0;t<i;t++)(e=r[t]).updateConnected(),e.isConnected||(n=n.concat(e.getNodes()));return n},x.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var t,n=new Set;for(t=0;t<e.length;t++){var r=e[t];if(!n.has(r)){var i=r.getSource(),a=r.getTarget();if(i==a)r.getBendpoints().push(new p),r.getBendpoints().push(new p),this.createDummyNodesForBendpoints(r),n.add(r);else{var o,s=[];if(s=(s=s.concat(i.getEdgeListToNode(a))).concat(a.getEdgeListToNode(i)),!n.has(s[0])){if(s.length>1)for(o=0;o<s.length;o++){var l=s[o];l.getBendpoints().push(new p),this.createDummyNodesForBendpoints(l)}s.forEach(function(e){n.add(e)})}}}if(n.size==e.length)break}},x.prototype.positionNodesRadially=function(e){for(var t=new h(0,0),n=Math.ceil(Math.sqrt(e.length)),r=0,i=0,a=0,o=new p(0,0),s=0;s<e.length;s++){s%n==0&&(a=0,i=r,0!=s&&(i+=l.DEFAULT_COMPONENT_SEPERATION),r=0);var u=e[s],g=f.findCenterOfTree(u);t.x=a,t.y=i,(o=x.radialLayout(u,g,t)).y>r&&(r=Math.floor(o.y)),a=Math.floor(o.x+l.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(c.WORLD_CENTER_X-o.x/2,c.WORLD_CENTER_Y-o.y/2))},x.radialLayout=function(e,t,n){var r=Math.max(this.maxDiagonalInTree(e),l.DEFAULT_RADIAL_SEPARATION);x.branchRadialLayout(t,null,0,359,0,r);var i=y.calculateBounds(e),a=new b;a.setDeviceOrgX(i.getMinX()),a.setDeviceOrgY(i.getMinY()),a.setWorldOrgX(n.x),a.setWorldOrgY(n.y);for(var o=0;o<e.length;o++)e[o].transform(a);var s=new p(i.getMaxX(),i.getMaxY());return a.inverseTransformPoint(s)},x.branchRadialLayout=function(e,t,n,r,i,a){var o=(r-n+1)/2;o<0&&(o+=180);var s=(o+n)%360*v.TWO_PI/360,l=i*Math.cos(s),u=i*Math.sin(s);e.setCenter(l,u);var c=[],h=(c=c.concat(e.getEdges())).length;null!=t&&h--;for(var p,f=0,g=c.length,y=e.getEdgesBetween(t);y.length>1;){var b=y[0];y.splice(0,1);var w=c.indexOf(b);w>=0&&c.splice(w,1),g--,h--}p=null!=t?(c.indexOf(y[0])+1)%g:0;for(var E=Math.abs(r-n)/h,T=p;f!=h;T=++T%g){var _=c[T].getOtherEnd(e);if(_!=t){var k=(n+f*E)%360,D=(k+E)%360;x.branchRadialLayout(_,e,k,D,i+a,a),f++}}},x.maxDiagonalInTree=function(e){for(var t=g.MIN_VALUE,n=0;n<e.length;n++){var r=e[n].getDiagonal();r>t&&(t=r)}return t},x.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},x.prototype.groupZeroDegreeMembers=function(){var e=this,t={};this.memberGroups={},this.idToDummyNode={};for(var n=[],r=this.graphManager.getAllNodes(),i=0;i<r.length;i++){var a=r[i],s=a.getParent();0!==this.getNodeDegreeWithChildren(a)||null!=s.id&&this.getToBeTiled(s)||n.push(a)}for(var i=0;i<n.length;i++){var a=n[i],l=a.getParent().id;typeof t[l]>"u"&&(t[l]=[]),t[l]=t[l].concat(a)}Object.keys(t).forEach(function(n){if(t[n].length>1){var r="DummyCompound_"+n;e.memberGroups[r]=t[n];var i=t[n][0].getParent(),a=new o(e.graphManager);a.id=r,a.paddingLeft=i.paddingLeft||0,a.paddingRight=i.paddingRight||0,a.paddingBottom=i.paddingBottom||0,a.paddingTop=i.paddingTop||0,e.idToDummyNode[r]=a;var s=e.getGraphManager().add(e.newGraph(),a),l=i.getChild();l.add(a);for(var u=0;u<t[n].length;u++){var c=t[n][u];l.remove(c),s.add(c)}}})},x.prototype.clearCompounds=function(){var e={},t={};this.performDFSOnCompounds();for(var n=0;n<this.compoundOrder.length;n++)t[this.compoundOrder[n].id]=this.compoundOrder[n],e[this.compoundOrder[n].id]=[].concat(this.compoundOrder[n].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[n].getChild()),this.compoundOrder[n].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,t)},x.prototype.clearZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(n){var r=e.idToDummyNode[n];t[n]=e.tileNodes(e.memberGroups[n],r.paddingLeft+r.paddingRight),r.rect.width=t[n].width,r.rect.height=t[n].height})},x.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;e>=0;e--){var t=this.compoundOrder[e],n=t.id,r=t.paddingLeft,i=t.paddingTop;this.adjustLocations(this.tiledMemberPack[n],t.rect.x,t.rect.y,r,i)}},x.prototype.repopulateZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack;Object.keys(t).forEach(function(n){var r=e.idToDummyNode[n],i=r.paddingLeft,a=r.paddingTop;e.adjustLocations(t[n],r.rect.x,r.rect.y,i,a)})},x.prototype.getToBeTiled=function(e){var t=e.id;if(null!=this.toBeTiled[t])return this.toBeTiled[t];var n=e.getChild();if(null==n)return this.toBeTiled[t]=!1,!1;for(var r=n.getNodes(),i=0;i<r.length;i++){var a=r[i];if(this.getNodeDegree(a)>0)return this.toBeTiled[t]=!1,!1;if(null==a.getChild()){this.toBeTiled[a.id]=!1;continue}if(!this.getToBeTiled(a))return this.toBeTiled[t]=!1,!1}return this.toBeTiled[t]=!0,!0},x.prototype.getNodeDegree=function(e){e.id;for(var t=e.getEdges(),n=0,r=0;r<t.length;r++){var i=t[r];i.getSource().id!==i.getTarget().id&&(n+=1)}return n},x.prototype.getNodeDegreeWithChildren=function(e){var t=this.getNodeDegree(e);if(null==e.getChild())return t;for(var n=e.getChild().getNodes(),r=0;r<n.length;r++){var i=n[r];t+=this.getNodeDegreeWithChildren(i)}return t},x.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},x.prototype.fillCompexOrderByDFS=function(e){for(var t=0;t<e.length;t++){var n=e[t];null!=n.getChild()&&this.fillCompexOrderByDFS(n.getChild().getNodes()),this.getToBeTiled(n)&&this.compoundOrder.push(n)}},x.prototype.adjustLocations=function(e,t,n,r,i){t+=r,n+=i;for(var a=t,o=0;o<e.rows.length;o++){var s=e.rows[o];t=a;for(var l=0,u=0;u<s.length;u++){var c=s[u];c.rect.x=t,c.rect.y=n,t+=c.rect.width+e.horizontalPadding,c.rect.height>l&&(l=c.rect.height)}n+=l+e.verticalPadding}},x.prototype.tileCompoundMembers=function(e,t){var n=this;this.tiledMemberPack=[],Object.keys(e).forEach(function(r){var i=t[r];n.tiledMemberPack[r]=n.tileNodes(e[r],i.paddingLeft+i.paddingRight),i.rect.width=n.tiledMemberPack[r].width,i.rect.height=n.tiledMemberPack[r].height})},x.prototype.tileNodes=function(e,t){var n={rows:[],rowWidth:[],rowHeight:[],width:0,height:t,verticalPadding:l.TILING_PADDING_VERTICAL,horizontalPadding:l.TILING_PADDING_HORIZONTAL};e.sort(function(e,t){return e.rect.width*e.rect.height>t.rect.width*t.rect.height?-1:e.rect.width*e.rect.height<t.rect.width*t.rect.height?1:0});for(var r=0;r<e.length;r++){var i=e[r];0==n.rows.length?this.insertNodeToRow(n,i,0,t):this.canAddHorizontal(n,i.rect.width,i.rect.height)?this.insertNodeToRow(n,i,this.getShortestRowIndex(n),t):this.insertNodeToRow(n,i,n.rows.length,t),this.shiftToLastRow(n)}return n},x.prototype.insertNodeToRow=function(e,t,n,r){n==e.rows.length&&(e.rows.push([]),e.rowWidth.push(r),e.rowHeight.push(0));var i=e.rowWidth[n]+t.rect.width;e.rows[n].length>0&&(i+=e.horizontalPadding),e.rowWidth[n]=i,e.width<i&&(e.width=i);var a=t.rect.height;n>0&&(a+=e.verticalPadding);var o=0;a>e.rowHeight[n]&&(o=e.rowHeight[n],e.rowHeight[n]=a,o=e.rowHeight[n]-o),e.height+=o,e.rows[n].push(t)},x.prototype.getShortestRowIndex=function(e){for(var t=-1,n=Number.MAX_VALUE,r=0;r<e.rows.length;r++)e.rowWidth[r]<n&&(t=r,n=e.rowWidth[r]);return t},x.prototype.getLongestRowIndex=function(e){for(var t=-1,n=Number.MIN_VALUE,r=0;r<e.rows.length;r++)e.rowWidth[r]>n&&(t=r,n=e.rowWidth[r]);return t},x.prototype.canAddHorizontal=function(e,t,n){var r,i,a=this.getShortestRowIndex(e);if(a<0)return!0;var o=e.rowWidth[a];if(o+e.horizontalPadding+t<=e.width)return!0;var s=0;return e.rowHeight[a]<n&&a>0&&(s=n+e.verticalPadding-e.rowHeight[a]),r=e.width-o>=t+e.horizontalPadding?(e.height+s)/(o+t+e.horizontalPadding):(e.height+s)/e.width,s=n+e.verticalPadding,(i=e.width<t?(e.height+s)/t:(e.height+s)/e.width)<1&&(i=1/i),r<1&&(r=1/r),r<i},x.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),n=e.rowWidth.length-1,r=e.rows[t],i=r[r.length-1],a=i.width+e.horizontalPadding;if(e.width-e.rowWidth[n]>a&&t!=n){r.splice(-1,1),e.rows[n].push(i),e.rowWidth[t]=e.rowWidth[t]-a,e.rowWidth[n]=e.rowWidth[n]+a,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var o=Number.MIN_VALUE,s=0;s<r.length;s++)r[s].height>o&&(o=r[s].height);t>0&&(o+=e.verticalPadding);var l=e.rowHeight[t]+e.rowHeight[n];e.rowHeight[t]=o,e.rowHeight[n]<i.height+e.verticalPadding&&(e.rowHeight[n]=i.height+e.verticalPadding);var u=e.rowHeight[t]+e.rowHeight[n];e.height+=u-l,this.shiftToLastRow(e)}},x.prototype.tilingPreLayout=function(){l.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},x.prototype.tilingPostLayout=function(){l.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},x.prototype.reduceTrees=function(){for(var e,t=[],n=!0;n;){var r=this.graphManager.getAllNodes(),i=[];n=!1;for(var a=0;a<r.length;a++)1!=(e=r[a]).getEdges().length||e.getEdges()[0].isInterGraph||null!=e.getChild()||(i.push([e,e.getEdges()[0],e.getOwner()]),n=!0);if(!0==n){for(var o=[],s=0;s<i.length;s++)1==i[s][0].getEdges().length&&(o.push(i[s]),i[s][0].getOwner().remove(i[s][0]));t.push(o),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=t},x.prototype.growTree=function(e){for(var t,n=e.length,r=e[n-1],i=0;i<r.length;i++)t=r[i],this.findPlaceforPrunedNode(t),t[2].add(t[0]),t[2].add(t[1],t[1].source,t[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},x.prototype.findPlaceforPrunedNode=function(e){var t,n,r=e[0],i=(n=r==e[1].source?e[1].target:e[1].source).startX,a=n.finishX,o=n.startY,s=n.finishY,l=[0,0,0,0];if(o>0)for(var c=i;c<=a;c++)l[0]+=this.grid[c][o-1].length+this.grid[c][o].length-1;if(a<this.grid.length-1)for(var c=o;c<=s;c++)l[1]+=this.grid[a+1][c].length+this.grid[a][c].length-1;if(s<this.grid[0].length-1)for(var c=i;c<=a;c++)l[2]+=this.grid[c][s+1].length+this.grid[c][s].length-1;if(i>0)for(var c=o;c<=s;c++)l[3]+=this.grid[i-1][c].length+this.grid[i][c].length-1;for(var h,p,f=g.MAX_VALUE,v=0;v<l.length;v++)l[v]<f?(f=l[v],h=1,p=v):l[v]==f&&h++;if(3==h&&0==f)0==l[0]&&0==l[1]&&0==l[2]?t=1:0==l[0]&&0==l[1]&&0==l[3]?t=0:0==l[0]&&0==l[2]&&0==l[3]?t=3:0==l[1]&&0==l[2]&&0==l[3]&&(t=2);else if(2==h&&0==f){var y=Math.floor(2*Math.random());t=0==l[0]&&0==l[1]?0==y?0:1:0==l[0]&&0==l[2]?0==y?0:2:0==l[0]&&0==l[3]?0==y?0:3:0==l[1]&&0==l[2]?0==y?1:2:0==l[1]&&0==l[3]?0==y?1:3:0==y?2:3}else if(4==h&&0==f){var y=Math.floor(4*Math.random());t=y}else t=p;0==t?r.setCenter(n.getCenterX(),n.getCenterY()-n.getHeight()/2-u.DEFAULT_EDGE_LENGTH-r.getHeight()/2):1==t?r.setCenter(n.getCenterX()+n.getWidth()/2+u.DEFAULT_EDGE_LENGTH+r.getWidth()/2,n.getCenterY()):2==t?r.setCenter(n.getCenterX(),n.getCenterY()+n.getHeight()/2+u.DEFAULT_EDGE_LENGTH+r.getHeight()/2):r.setCenter(n.getCenterX()-n.getWidth()/2-u.DEFAULT_EDGE_LENGTH-r.getWidth()/2,n.getCenterY())},e.exports=x},function(e,t,n){var r={};r.layoutBase=n(0),r.CoSEConstants=n(1),r.CoSEEdge=n(2),r.CoSEGraph=n(3),r.CoSEGraphManager=n(4),r.CoSELayout=n(6),r.CoSENode=n(5),e.exports=r}]))),o=R.exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=o},function(e,t,n){var r=n(0).layoutBase.LayoutConstants,i=n(0).layoutBase.FDLayoutConstants,a=n(0).CoSEConstants,o=n(0).CoSELayout,s=n(0).CoSENode,l=n(0).layoutBase.PointD,u=n(0).layoutBase.DimensionD,c={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function h(e){this.options=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}(c,e),p(this.options)}var p=function(e){null!=e.nodeRepulsion&&(a.DEFAULT_REPULSION_STRENGTH=i.DEFAULT_REPULSION_STRENGTH=e.nodeRepulsion),null!=e.idealEdgeLength&&(a.DEFAULT_EDGE_LENGTH=i.DEFAULT_EDGE_LENGTH=e.idealEdgeLength),null!=e.edgeElasticity&&(a.DEFAULT_SPRING_STRENGTH=i.DEFAULT_SPRING_STRENGTH=e.edgeElasticity),null!=e.nestingFactor&&(a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(a.DEFAULT_GRAVITY_STRENGTH=i.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(a.MAX_ITERATIONS=i.MAX_ITERATIONS=e.numIter),null!=e.gravityRange&&(a.DEFAULT_GRAVITY_RANGE_FACTOR=i.DEFAULT_GRAVITY_RANGE_FACTOR=e.gravityRange),null!=e.gravityCompound&&(a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.gravityCompound),null!=e.gravityRangeCompound&&(a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.gravityRangeCompound),null!=e.initialEnergyOnIncremental&&(a.DEFAULT_COOLING_FACTOR_INCREMENTAL=i.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.initialEnergyOnIncremental),"draft"==e.quality?r.QUALITY=0:"proof"==e.quality?r.QUALITY=2:r.QUALITY=1,a.NODE_DIMENSIONS_INCLUDE_LABELS=i.NODE_DIMENSIONS_INCLUDE_LABELS=r.NODE_DIMENSIONS_INCLUDE_LABELS=e.nodeDimensionsIncludeLabels,a.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=r.DEFAULT_INCREMENTAL=!e.randomize,a.ANIMATE=i.ANIMATE=r.ANIMATE=e.animate,a.TILE=e.tile,a.TILING_PADDING_VERTICAL="function"==typeof e.tilingPaddingVertical?e.tilingPaddingVertical.call():e.tilingPaddingVertical,a.TILING_PADDING_HORIZONTAL="function"==typeof e.tilingPaddingHorizontal?e.tilingPaddingHorizontal.call():e.tilingPaddingHorizontal};h.prototype.run=function(){var e,t,n=this.options;this.idToLNode={};var r=this.layout=new o,i=this;i.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var a=r.newGraphManager();this.gm=a;var s=this.options.eles.nodes(),l=this.options.eles.edges();this.root=a.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(s),r);for(var u=0;u<l.length;u++){var c=l[u],h=this.idToLNode[c.data("source")],p=this.idToLNode[c.data("target")];h!==p&&0==h.getEdgesBetween(p).length&&(a.add(r.newEdge(),h,p).id=c.id())}var f=function(e,t){"number"==typeof e&&(e=t);var n=e.data("id"),r=i.idToLNode[n];return{x:r.getRect().getCenterX(),y:r.getRect().getCenterY()}},g=function a(){for(var o,s=function(){n.fit&&n.cy.fit(n.eles,n.padding),e||(e=!0,i.cy.one("layoutready",n.ready),i.cy.trigger({type:"layoutready",layout:i}))},l=i.options.refresh,u=0;u<l&&!o;u++)o=i.stopped||i.layout.tick();if(o){r.checkLayoutSuccess()&&!r.isSubLayout&&r.doPostLayout(),r.tilingPostLayout&&r.tilingPostLayout(),r.isLayoutFinished=!0,i.options.eles.nodes().positions(f),s(),i.cy.one("layoutstop",i.options.stop),i.cy.trigger({type:"layoutstop",layout:i}),t&&cancelAnimationFrame(t),e=!1;return}var c=i.layout.getPositionsData();n.eles.nodes().positions(function(e,t){if("number"==typeof e&&(e=t),!e.isParent()){for(var n=e.id(),r=c[n],i=e;null==r&&(r=c[i.data("parent")]||c["DummyCompound_"+i.data("parent")],c[n]=r,null!=(i=i.parent()[0])););return null!=r?{x:r.x,y:r.y}:{x:e.position("x"),y:e.position("y")}}}),s(),t=requestAnimationFrame(a)};return r.addListener("layoutstarted",function(){"during"===i.options.animate&&(t=requestAnimationFrame(g))}),r.runLayout(),"during"!==this.options.animate&&(i.options.eles.nodes().not(":parent").layoutPositions(i,i.options,f),e=!1),this},h.prototype.getTopMostNodes=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].id()]=!0;return e.filter(function(e,n){"number"==typeof e&&(e=n);for(var r=e.parent()[0];null!=r;){if(t[r.id()])return!1;r=r.parent()[0]}return!0})},h.prototype.processChildrenList=function(e,t,n){for(var r=t.length,i=0;i<r;i++){var a,o,c=t[i],h=c.children(),p=c.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((o=null!=c.outerWidth()&&null!=c.outerHeight()?e.add(new s(n.graphManager,new l(c.position("x")-p.w/2,c.position("y")-p.h/2),new u(parseFloat(p.w),parseFloat(p.h)))):e.add(new s(this.graphManager))).id=c.data("id"),o.paddingLeft=parseInt(c.css("padding")),o.paddingTop=parseInt(c.css("padding")),o.paddingRight=parseInt(c.css("padding")),o.paddingBottom=parseInt(c.css("padding")),this.options.nodeDimensionsIncludeLabels&&c.isParent()){var f=c.boundingBox({includeLabels:!0,includeNodes:!1}).w,g=c.boundingBox({includeLabels:!0,includeNodes:!1}).h,v=c.css("text-halign");o.labelWidth=f,o.labelHeight=g,o.labelPos=v}this.idToLNode[c.data("id")]=o,isNaN(o.rect.x)&&(o.rect.x=0),isNaN(o.rect.y)&&(o.rect.y=0),null!=h&&h.length>0&&(a=n.getGraphManager().add(n.newGraph(),o),this.processChildrenList(a,h,n))}},h.prototype.stop=function(){return this.stopped=!0,this};var f=function(e){e("layout","cose-bilkent",h)};"u">typeof cytoscape&&f(cytoscape),e.exports=f}]));var B=P.exports;let z=(0,l.U)(B);O.use(z);let G=async(e,t,n,r)=>{let i;let a=(0,l.c)();a.htmlLabels=!1,(0,l.l).debug(`Rendering mindmap diagram
`+e,r.parser);let o=(0,l.c)().securityLevel;"sandbox"===o&&(i=(0,l.j)("#i"+t));let s=("sandbox"===o?(0,l.j)(i.nodes()[0].contentDocument.body):(0,l.j)("body")).select("#"+t);s.append("g");let u=r.db.getMindmap(),c=s.append("g");c.attr("class","mindmap-edges");let h=s.append("g");h.attr("class","mindmap-nodes"),function e(t,n,r,i){N.drawNode(t,n,r,i),n.children&&n.children.forEach((n,a)=>{e(t,n,r<0?a:r,i)})}(h,u,-1,a);let p=await new Promise(e=>{let t=(0,l.j)("body").append("div").attr("id","cy").attr("style","display:none"),n=O({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});t.remove(),function e(t,n,r,i){n.add({group:"nodes",data:{id:t.id,labelText:t.descr,height:t.height,width:t.width,level:i,nodeId:t.id,padding:t.padding,type:t.type},position:{x:t.x,y:t.y}}),t.children&&t.children.forEach(a=>{e(a,n,r,i+1),n.add({group:"edges",data:{id:`${t.id}_${a.id}`,source:t.id,target:a.id,depth:i,section:a.section}})})}(u,n,a,0),n.nodes().forEach(function(e){e.layoutDimensions=()=>{let t=e.data();return{w:t.width,h:t.height}}}),n.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),n.ready(t=>{(0,l.l).info("Ready",t),e(n)})});(function(e,t){t.edges().map((t,n)=>{let r=t.data();if(t[0]._private.bodyBounds){let i=t[0]._private.rscratch;(0,l.l).trace("Edge: ",n,r),e.insert("path").attr("d",`M ${i.startX},${i.startY} L ${i.midX},${i.midY} L${i.endX},${i.endY} `).attr("class","edge section-edge-"+r.section+" edge-depth-"+r.depth)}})})(c,p),function(e){e.nodes().map((e,t)=>{let n=e.data();n.x=e.position().x,n.y=e.position().y,N.positionNode(n);let r=w(n.nodeId);(0,l.l).info("Id:",t,"Position: (",e.position().x,", ",e.position().y,")",n),r.attr("transform",`translate(${e.position().x-n.width/2}, ${e.position().y-n.height/2})`),r.attr("attr",`apa-${t})`)})}(p),(0,l.t)(void 0,s,a.mindmap.padding,a.mindmap.useMaxWidth)},Y=e=>{let t="";for(let t=0;t<e.THEME_COLOR_LIMIT;t++)e["lineColor"+t]=e["lineColor"+t]||e["cScaleInv"+t],(0,l.aV)(e["lineColor"+t])?e["lineColor"+t]=(0,l.aW)(e["lineColor"+t],20):e["lineColor"+t]=(0,l.aX)(e["lineColor"+t],20);for(let n=0;n<e.THEME_COLOR_LIMIT;n++){let r=""+(17-3*n);t+=`
    .section-${n-1} rect, .section-${n-1} path, .section-${n-1} circle, .section-${n-1} polygon, .section-${n-1} path  {
      fill: ${e["cScale"+n]};
    }
    .section-${n-1} text {
     fill: ${e["cScaleLabel"+n]};
    }
    .node-icon-${n-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+n]};
    }
    .section-edge-${n-1}{
      stroke: ${e["cScale"+n]};
    }
    .edge-depth-${n-1}{
      stroke-width: ${r};
    }
    .section-${n-1} line {
      stroke: ${e["cScaleInv"+n]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return t},V={db:E,renderer:{draw:G},parser:c,styles:e=>`
  .edge {
    stroke-width: 3;
  }
  ${Y(e)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`}}),t.register("6N8n7",function(n,r){e(n.exports,"c",function(){return eM});var i=t("2O8Km");function a(e,t){return e&&"object"==typeof e&&(e.value||(t?e.alt:"")||"children"in e&&o(e.children,t)||Array.isArray(e)&&o(e,t))||""}function o(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=a(e[r],t);return n.join("")}function s(e,t,n,r){let i=e.length,a=0,o;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)(o=Array.from(r)).unshift(t,n),[].splice.apply(e,o);else for(n&&[].splice.apply(e,[t,n]);a<r.length;)(o=r.slice(a,a+1e4)).unshift(t,0),[].splice.apply(e,o),a+=1e4,t+=1e4}function l(e,t){return e.length>0?(s(e,e.length,0,t),e):t}let u={}.hasOwnProperty,c=_(/[A-Za-z]/),h=_(/\d/),p=_(/[\dA-Fa-f]/),f=_(/[\dA-Za-z]/),g=_(/[!-/:-@[-`{-~]/),v=_(/[#-'*+\--9=?A-Z^-~]/);function y(e){return null!==e&&(e<32||127===e)}function b(e){return null!==e&&(e<0||32===e)}function x(e){return null!==e&&e<-2}function w(e){return -2===e||-1===e||32===e}let E=_(/\s/),T=_(/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/);function _(e){return function(t){return null!==t&&e.test(String.fromCharCode(t))}}function k(e,t,n,r){let i=r?r-1:Number.POSITIVE_INFINITY,a=0;return function(r){return w(r)?(e.enter(n),function r(o){return w(o)&&a++<i?(e.consume(o),r):(e.exit(n),t(o))}(r)):t(r)}}let D={tokenize:function(e){let t;let n=e.attempt(this.parser.constructs.contentInitial,function(t){if(null===t){e.consume(t);return}return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),k(e,n,"linePrefix")},function(n){return e.enter("paragraph"),function n(r){let i=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=i),t=i,function t(r){if(null===r){e.exit("chunkText"),e.exit("paragraph"),e.consume(r);return}return x(r)?(e.consume(r),e.exit("chunkText"),n):(e.consume(r),t)}(r)}(n)});return n}},C={tokenize:function(e){let t=this,n=[],r=0,i,a,o;return l;function l(i){if(r<n.length){let a=n[r];return t.containerState=a[1],e.attempt(a[0].continuation,u,c)(i)}return c(i)}function u(e){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&w();let n=t.events.length,a=n,o;for(;a--;)if("exit"===t.events[a][0]&&"chunkFlow"===t.events[a][1].type){o=t.events[a][1].end;break}b(r);let l=n;for(;l<t.events.length;)t.events[l][1].end=Object.assign({},o),l++;return s(t.events,a+1,0,t.events.slice(n)),t.events.length=l,c(e)}return l(e)}function c(a){if(r===n.length){if(!i)return f(a);if(i.currentConstruct&&i.currentConstruct.concrete)return v(a);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(A,h,p)(a)}function h(e){return i&&w(),b(r),f(e)}function p(e){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,v(e)}function f(n){return t.containerState={},e.attempt(A,g,v)(n)}function g(e){return r++,n.push([t.currentConstruct,t.containerState]),f(e)}function v(n){if(null===n){i&&w(),b(0),e.consume(n);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:a,_tokenizer:i}),function n(i){if(null===i){y(e.exit("chunkFlow"),!0),b(0),e.consume(i);return}return x(i)?(e.consume(i),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(i),n)}(n)}function y(e,n){let l=t.sliceStream(e);if(n&&l.push(null),e.previous=a,a&&(a.next=e),a=e,i.defineSkip(e.start),i.write(l),t.parser.lazy[e.start.line]){let e=i.events.length;for(;e--;)if(i.events[e][1].start.offset<o&&(!i.events[e][1].end||i.events[e][1].end.offset>o))return;let n=t.events.length,a=n,l,u;for(;a--;)if("exit"===t.events[a][0]&&"chunkFlow"===t.events[a][1].type){if(l){u=t.events[a][1].end;break}l=!0}for(b(r),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},u),e++;s(t.events,a+1,0,t.events.slice(n)),t.events.length=e}}function b(r){let i=n.length;for(;i-- >r;){let r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function w(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}},A={tokenize:function(e,t,n){return k(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function S(e){return null===e||b(e)||E(e)?1:T(e)?2:void 0}function N(e,t,n){let r=[],i=-1;for(;++i<e.length;){let a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}let L={name:"attention",tokenize:function(e,t){let n;let r=this.parser.constructs.attentionMarkers.null,i=this.previous,a=S(i);return function(o){return e.enter("attentionSequence"),n=o,function o(s){if(s===n)return e.consume(s),o;let l=e.exit("attentionSequence"),u=S(s),c=!u||2===u&&a||r.includes(s),h=!a||2===a&&u||r.includes(i);return l._open=!!(42===n?c:c&&(a||!h)),l._close=!!(42===n?h:h&&(u||!c)),t(s)}(o)}},resolveAll:function(e,t){let n=-1,r,i,a,o,u,c,h,p;for(;++n<e.length;)if("enter"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._close){for(r=n;r--;)if("exit"===e[r][0]&&"attentionSequence"===e[r][1].type&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;let f=Object.assign({},e[r][1].end),g=Object.assign({},e[n][1].start);I(f,-c),I(g,c),o={type:c>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},u={type:c>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:g},a={type:c>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:c>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},u.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},u.end),h=[],e[r][1].end.offset-e[r][1].start.offset&&(h=l(h,[["enter",e[r][1],t],["exit",e[r][1],t]])),h=l(h,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",a,t]]),h=l(h,N(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),h=l(h,[["exit",a,t],["enter",u,t],["exit",u,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(p=2,h=l(h,[["enter",e[n][1],t],["exit",e[n][1],t]])):p=0,s(e,r-1,n-r+3,h),n=r+h.length-p-2;break}}for(n=-1;++n<e.length;)"attentionSequence"===e[n][1].type&&(e[n][1].type="data");return e}};function I(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}let O={tokenize:function(e,t,n){return k(e,function(e){return null===e||x(e)?t(e):n(e)},"linePrefix")},partial:!0},M={name:"blockQuote",tokenize:function(e,t,n){let r=this;return function(t){if(62===t){let n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return w(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return k(e,e.attempt(M,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},exit:function(e){e.exit("blockQuote")}},P={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return g(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}},R=document.createElement("i");function F(e){let t="&"+e+";";R.innerHTML=t;let n=R.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&n!==t&&n}let B={name:"characterReference",tokenize:function(e,t,n){let r=this,i=0,a,o;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),a=31,o=f,u(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=p,u):(e.enter("characterReferenceValue"),a=7,o=h,u(t))}function u(s){let l;return 59===s&&i?(l=e.exit("characterReferenceValue"),o!==f||F(r.sliceSerialize(l))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)):o(s)&&i++<a?(e.consume(s),u):n(s)}}},z={name:"codeFenced",tokenize:function(e,t,n){let r=this,i={tokenize:function(e,t,n){let r=0;return k(e,function(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),function t(a){return a===u?(e.consume(a),r++,t):r<l?n(a):(e.exit("codeFencedFenceSequence"),k(e,i,"whitespace")(a))}(t)},"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function i(r){return null===r||x(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},a={tokenize:function(e,t,n){let r=this;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},o=this.events[this.events.length-1],s=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0,l=0,u;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u=t,function t(r){return r===u?(e.consume(r),l++,t):(e.exit("codeFencedFenceSequence"),l<3?n(r):k(e,c,"whitespace")(r))}(t)};function c(t){return null===t||x(t)?p(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),function t(r){return null===r||b(r)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),k(e,h,"whitespace")(r)):96===r&&r===u?n(r):(e.consume(r),t)}(t))}function h(t){return null===t||x(t)?p(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),function t(r){return null===r||x(r)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(r)):96===r&&r===u?n(r):(e.consume(r),t)}(t))}function p(n){return e.exit("codeFencedFence"),r.interrupt?t(n):function t(n){return null===n?f(n):x(n)?e.attempt(a,e.attempt(i,f,s?k(e,t,"linePrefix",s+1):t),f)(n):(e.enter("codeFlowValue"),function n(r){return null===r||x(r)?(e.exit("codeFlowValue"),t(r)):(e.consume(r),n)}(n))}(n)}function f(n){return e.exit("codeFenced"),t(n)}},concrete:!0},G={name:"codeIndented",tokenize:function(e,t,n){let r=this;return function(t){return e.enter("codeIndented"),k(e,i,"linePrefix",5)(t)};function i(t){let i=r.events[r.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?function t(n){return null===n?a(n):x(n)?e.attempt(Y,t,a)(n):(e.enter("codeFlowValue"),function n(r){return null===r||x(r)?(e.exit("codeFlowValue"),t(r)):(e.consume(r),n)}(n))}(t):n(t)}function a(n){return e.exit("codeIndented"),t(n)}}},Y={tokenize:function(e,t,n){let r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):x(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):k(e,a,"linePrefix",5)(t)}function a(e){let a=r.events[r.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):x(e)?i(e):n(e)}},partial:!0};function V(e){let t={},n=-1,r,i,a,o,l,u,c;for(;++n<e.length;){for(;(n in t);)n=t[n];if(r=e[n],n&&"chunkFlow"===r[1].type&&"listItemPrefix"===e[n-1][1].type&&((a=0)<(u=r[1]._tokenizer.events).length&&"lineEndingBlank"===u[a][1].type&&(a+=2),a<u.length&&"content"===u[a][1].type))for(;++a<u.length&&"content"!==u[a][1].type;)"chunkText"===u[a][1].type&&(u[a][1]._isInFirstContentOfListItem=!0,a++);if("enter"===r[0])r[1].contentType&&(Object.assign(t,function(e,t){let n=e[t][1],r=e[t][2],i=t-1,a=[],o=n._tokenizer||r.parser[n.contentType](n.start),l=o.events,u=[],c={},h,p,f=-1,g=n,v=0,y=0,b=[y];for(;g;){for(;e[++i][1]!==g;);a.push(i),g._tokenizer||(h=r.sliceStream(g),g.next||h.push(null),p&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++f<l.length;)"exit"===l[f][0]&&"enter"===l[f-1][0]&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(y=f+1,b.push(y),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):b.pop(),f=b.length;f--;){let t=l.slice(b[f],b[f+1]),n=a.pop();u.unshift([n,n+t.length-1]),s(e,n,2,t)}for(f=-1;++f<u.length;)c[v+u[f][0]]=v+u[f][1],v+=u[f][1]-u[f][0]-1;return c}(e,n)),n=t[n],c=!0);else if(r[1]._container){for(a=n,i=void 0;a--&&("lineEnding"===(o=e[a])[1].type||"lineEndingBlank"===o[1].type);)"enter"===o[0]&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);i&&(r[1].end=Object.assign({},e[i][1].start),(l=e.slice(i,n)).unshift(r),s(e,i,n-i+1,l))}}return!c}let X={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):x(t)?e.check(j,a,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return V(e),e}},j={tokenize:function(e,t,n){let r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),k(e,i,"linePrefix")};function i(i){if(null===i||x(i))return n(i);let a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}},partial:!0};function U(e,t,n,r,i,a,o,s,l){let u=l||Number.POSITIVE_INFINITY,c=0;return function(t){return 60===t?(e.enter(r),e.enter(i),e.enter(a),e.consume(t),e.exit(a),h):null===t||41===t||y(t)?n(t):(e.enter(r),e.enter(o),e.enter(s),e.enter("chunkString",{contentType:"string"}),g(t))};function h(n){return 62===n?(e.enter(a),e.consume(n),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),p(n))}function p(t){return 62===t?(e.exit("chunkString"),e.exit(s),h(t)):null===t||60===t||x(t)?n(t):(e.consume(t),92===t?f:p)}function f(t){return 60===t||62===t||92===t?(e.consume(t),p):p(t)}function g(i){return 40===i?++c>u?n(i):(e.consume(i),g):41===i?c--?(e.consume(i),g):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(i)):null===i||b(i)?c?n(i):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(i)):y(i)?n(i):(e.consume(i),92===i?v:g)}function v(t){return 40===t||41===t||92===t?(e.consume(t),g):g(t)}}function H(e,t,n,r,i,a){let o=this,s=0,l;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(a),u};function u(h){return null===h||91===h||93===h&&!l||94===h&&!s&&"_hiddenFootnoteSupport"in o.parser.constructs||s>999?n(h):93===h?(e.exit(a),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):x(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),c(h))}function c(t){return null===t||91===t||93===t||x(t)||s++>999?(e.exit("chunkString"),u(t)):(e.consume(t),l=l||!w(t),92===t?h:c)}function h(t){return 91===t||92===t||93===t?(e.consume(t),s++,c):c(t)}}function q(e,t,n,r,i,a){let o;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),o=40===t?41:t,s};function s(n){return n===o?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(a),l(n))}function l(t){return t===o?(e.exit(a),s(o)):null===t?n(t):x(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),k(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return t===o||null===t||x(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?c:u)}function c(t){return t===o||92===t?(e.consume(t),u):u(t)}}function W(e,t){let n;return function r(i){return x(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):w(i)?k(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function $(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}let K={tokenize:function(e,t,n){return function(t){return b(t)?W(e,r)(t):n(t)};function r(t){return 34===t||39===t||40===t?q(e,k(e,i,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function i(e){return null===e||x(e)?t(e):n(e)}},partial:!0},Z=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Q=["pre","script","style","textarea"],J={tokenize:function(e,t,n){return function(r){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),e.attempt(O,t,n)}},partial:!0},ee={name:"labelEnd",tokenize:function(e,t,n){let r=this,i=r.events.length,a,o;for(;i--;)if(("labelImage"===r.events[i][1].type||"labelLink"===r.events[i][1].type)&&!r.events[i][1]._balanced){a=r.events[i][1];break}return function(t){return a?a._inactive?l(t):(o=r.parser.defined.includes($(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s):n(t)};function s(n){return 40===n?e.attempt(et,t,o?t:l)(n):91===n?e.attempt(en,t,o?e.attempt(er,t,l):l)(n):o?t(n):l(n)}function l(e){return a._balanced=!0,n(e)}},resolveTo:function(e,t){let n=e.length,r=0,i,a,o,u;for(;n--;)if(i=e[n][1],a){if("link"===i.type||"labelLink"===i.type&&i._inactive)break;"enter"===e[n][0]&&"labelLink"===i.type&&(i._inactive=!0)}else if(o){if("enter"===e[n][0]&&("labelImage"===i.type||"labelLink"===i.type)&&!i._balanced&&(a=n,"labelLink"!==i.type)){r=2;break}}else"labelEnd"===i.type&&(o=n);let c={type:"labelLink"===e[a][1].type?"link":"image",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)},h={type:"label",start:Object.assign({},e[a][1].start),end:Object.assign({},e[o][1].end)},p={type:"labelText",start:Object.assign({},e[a+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return u=l(u=[["enter",c,t],["enter",h,t]],e.slice(a+1,a+r+3)),u=l(u,[["enter",p,t]]),u=l(u,N(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),u=l(u,[["exit",p,t],e[o-2],e[o-1],["exit",h,t]]),u=l(u,e.slice(o+1)),u=l(u,[["exit",c,t]]),s(e,a,e.length,u),e},resolveAll:function(e){let t=-1,n;for(;++t<e.length;)("labelImage"===(n=e[t][1]).type||"labelLink"===n.type||"labelEnd"===n.type)&&(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++);return e}},et={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),W(e,r)};function r(t){return 41===t?o(t):U(e,i,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return b(t)?W(e,a)(t):o(t)}function a(t){return 34===t||39===t||40===t?q(e,W(e,o),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):o(t)}function o(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},en={tokenize:function(e,t,n){let r=this;return function(t){return H.call(r,e,i,n,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes($(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}}},er={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}},ei={name:"labelStartImage",tokenize:function(e,t,n){let r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:ee.resolveAll},ea={name:"labelStartLink",tokenize:function(e,t,n){let r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:ee.resolveAll},eo={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),k(e,t,"linePrefix")}}},es={name:"thematicBreak",tokenize:function(e,t,n){let r=0,i;return function(a){return e.enter("thematicBreak"),i=a,function a(o){return o===i?(e.enter("thematicBreakSequence"),function t(n){return n===i?(e.consume(n),r++,t):(e.exit("thematicBreakSequence"),a(n))}(o)):w(o)?k(e,a,"whitespace")(o):r<3||null!==o&&!x(o)?n(o):(e.exit("thematicBreak"),t(o))}(a)}}},el={name:"list",tokenize:function(e,t,n){let r=this,i=r.events[r.events.length-1],a=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,o=0;return function(t){let i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:h(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(es,n,s)(t):s(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),function t(i){return h(i)&&++o<10?(e.consume(i),t):(!r.interrupt||o<2)&&(r.containerState.marker?i===r.containerState.marker:41===i||46===i)?(e.exit("listItemValue"),s(i)):n(i)}(t)}return n(t)};function s(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(O,r.interrupt?n:l,e.attempt(eu,c,u))}function l(e){return r.containerState.initialBlankLine=!0,a++,c(e)}function u(t){return w(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),c):n(t)}function c(n){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){let r=this;return r.containerState._closeFlow=void 0,e.check(O,function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,k(e,t,"listItemIndent",r.containerState.size+1)(n)},function(n){return r.containerState.furtherBlankLines||!w(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(ec,t,i)(n))});function i(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,k(e,e.attempt(el,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},eu={tokenize:function(e,t,n){let r=this;return k(e,function(e){let i=r.events[r.events.length-1];return!w(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},ec={tokenize:function(e,t,n){let r=this;return k(e,function(e){let i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)},partial:!0},eh={name:"setextUnderline",tokenize:function(e,t,n){let r=this,i=r.events.length,a,o;for(;i--;)if("lineEnding"!==r.events[i][1].type&&"linePrefix"!==r.events[i][1].type&&"content"!==r.events[i][1].type){o="paragraph"===r.events[i][1].type;break}return function(t){return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),a=t,function t(n){return n===a?(e.consume(n),t):(e.exit("setextHeadingLineSequence"),k(e,s,"lineSuffix")(n))}(t)):n(t)};function s(r){return null===r||x(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n=e.length,r,i,a;for(;n--;)if("enter"===e[n][0]){if("content"===e[n][1].type){r=n;break}"paragraph"===e[n][1].type&&(i=n)}else"content"===e[n][1].type&&e.splice(n,1),a||"definition"!==e[n][1].type||(a=n);let o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[a][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}},ed={tokenize:function(e){let t=this,n=e.attempt(O,function(r){if(null===r){e.consume(r);return}return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,r,k(e,e.attempt(this.parser.constructs.flow,r,e.attempt(X,r)),"linePrefix")));return n;function r(r){if(null===r){e.consume(r);return}return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n}}},ep={resolveAll:ey()},ef=ev("string"),eg=ev("text");function ev(e){return{tokenize:function(t){let n=this,r=this.parser.constructs[e],i=t.attempt(r,a,o);return a;function a(e){return l(e)?i(e):o(e)}function o(e){if(null===e){t.consume(e);return}return t.enter("data"),t.consume(e),s}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;let t=r[e],i=-1;if(t)for(;++i<t.length;){let e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:ey("text"===e?em:void 0)}}function ey(e){return function(t,n){let r=-1,i;for(;++r<=t.length;)void 0===i?t[r]&&"data"===t[r][1].type&&(i=r,r++):t[r]&&"data"===t[r][1].type||(r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),r=i+2),i=void 0);return e?e(t,n):t}}function em(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){let r=e[n-1][1],i=t.sliceStream(r),a=i.length,o=-1,s=0,l;for(;a--;){let e=i[a];if("string"==typeof e){for(o=e.length;32===e.charCodeAt(o-1);)s++,o--;if(o)break;o=-1}else if(-2===e)l=!0,s++;else if(-1!==e){a++;break}}if(s){let i={type:n===e.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-s,offset:r.end.offset-s,_index:r.start._index+a,_bufferIndex:a?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},i.start),r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}let eb=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:{91:{name:"definition",tokenize:function(e,t,n){let r;let i=this;return function(t){return e.enter("definition"),H.call(i,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function a(t){return r=$(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),W(e,U(e,e.attempt(K,k(e,o,"whitespace"),k(e,o,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function o(a){return null===a||x(a)?(e.exit("definition"),i.parser.defined.includes(r)||i.parser.defined.push(r),t(a)):n(a)}}}},disable:{null:[]},document:{42:el,43:el,45:el,48:el,49:el,50:el,51:el,52:el,53:el,54:el,55:el,56:el,57:el,62:M},flow:{35:{name:"headingAtx",tokenize:function(e,t,n){let r=this,i=0;return function(a){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),function a(o){return 35===o&&i++<6?(e.consume(o),a):null===o||b(o)?(e.exit("atxHeadingSequence"),r.interrupt?t(o):function n(r){return 35===r?(e.enter("atxHeadingSequence"),function t(r){return 35===r?(e.consume(r),t):(e.exit("atxHeadingSequence"),n(r))}(r)):null===r||x(r)?(e.exit("atxHeading"),t(r)):w(r)?k(e,n,"whitespace")(r):(e.enter("atxHeadingText"),function t(r){return null===r||35===r||b(r)?(e.exit("atxHeadingText"),n(r)):(e.consume(r),t)}(r))}(o)):n(o)}(a)}},resolve:function(e,t){let n=e.length-2,r=3,i,a;return"whitespace"===e[3][1].type&&(r+=2),n-2>r&&"whitespace"===e[n][1].type&&(n-=2),"atxHeadingSequence"===e[n][1].type&&(r===n-1||n-4>r&&"whitespace"===e[n-2][1].type)&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},s(e,r,n-r+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}},42:es,45:[eh,es],60:{name:"htmlFlow",tokenize:function(e,t,n){let r,i,a,o,s;let l=this;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),u};function u(o){return 33===o?(e.consume(o),h):47===o?(e.consume(o),v):63===o?(e.consume(o),r=3,l.interrupt?t:B):c(o)?(e.consume(o),a=String.fromCharCode(o),i=!0,y):n(o)}function h(i){return 45===i?(e.consume(i),r=2,p):91===i?(e.consume(i),r=5,a="CDATA[",o=0,g):c(i)?(e.consume(i),r=4,l.interrupt?t:B):n(i)}function p(r){return 45===r?(e.consume(r),l.interrupt?t:B):n(r)}function g(r){return r===a.charCodeAt(o++)?(e.consume(r),o===a.length?l.interrupt?t:L:g):n(r)}function v(t){return c(t)?(e.consume(t),a=String.fromCharCode(t),y):n(t)}function y(o){return null===o||47===o||62===o||b(o)?47!==o&&i&&Q.includes(a.toLowerCase())?(r=1,l.interrupt?t(o):L(o)):Z.includes(a.toLowerCase())?(r=6,47===o?(e.consume(o),E):l.interrupt?t(o):L(o)):(r=7,l.interrupt&&!l.parser.lazy[l.now().line]?n(o):i?T(o):function t(n){return w(n)?(e.consume(n),t):S(n)}(o)):45===o||f(o)?(e.consume(o),a+=String.fromCharCode(o),y):n(o)}function E(r){return 62===r?(e.consume(r),l.interrupt?t:L):n(r)}function T(t){return 47===t?(e.consume(t),S):58===t||95===t||c(t)?(e.consume(t),_):w(t)?(e.consume(t),T):S(t)}function _(t){return 45===t||46===t||58===t||95===t||f(t)?(e.consume(t),_):k(t)}function k(t){return 61===t?(e.consume(t),D):w(t)?(e.consume(t),k):T(t)}function D(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,C):w(t)?(e.consume(t),D):(s=null,function t(n){return null===n||34===n||39===n||60===n||61===n||62===n||96===n||b(n)?k(n):(e.consume(n),t)}(t))}function C(t){return null===t||x(t)?n(t):t===s?(e.consume(t),A):(e.consume(t),C)}function A(e){return 47===e||62===e||w(e)?T(e):n(e)}function S(t){return 62===t?(e.consume(t),N):n(t)}function N(t){return w(t)?(e.consume(t),N):null===t||x(t)?L(t):n(t)}function L(t){return 45===t&&2===r?(e.consume(t),M):60===t&&1===r?(e.consume(t),P):62===t&&4===r?(e.consume(t),z):63===t&&3===r?(e.consume(t),B):93===t&&5===r?(e.consume(t),F):x(t)&&(6===r||7===r)?e.check(J,z,I)(t):null===t||x(t)?I(t):(e.consume(t),L)}function I(t){return e.exit("htmlFlowData"),function t(n){return null===n?G(n):x(n)?e.attempt({tokenize:O,partial:!0},t,G)(n):(e.enter("htmlFlowData"),L(n))}(t)}function O(e,t,n){return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r};function r(e){return l.parser.lazy[l.now().line]?n(e):t(e)}}function M(t){return 45===t?(e.consume(t),B):L(t)}function P(t){return 47===t?(e.consume(t),a="",R):L(t)}function R(t){return 62===t&&Q.includes(a.toLowerCase())?(e.consume(t),z):c(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),R):L(t)}function F(t){return 93===t?(e.consume(t),B):L(t)}function B(t){return 62===t?(e.consume(t),z):45===t&&2===r?(e.consume(t),B):L(t)}function z(t){return null===t||x(t)?(e.exit("htmlFlowData"),G(t)):(e.consume(t),z)}function G(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&!("enter"===e[t][0]&&"htmlFlow"===e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e},concrete:!0},61:eh,95:es,96:z,126:z},flowInitial:{[-2]:G,[-1]:G,32:G},insideSpan:{null:[L,ep]},string:{38:B,92:P},text:{[-5]:eo,[-4]:eo,[-3]:eo,33:ei,38:B,42:L,60:[{name:"autolink",tokenize:function(e,t,n){let r=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return c(t)?(e.consume(t),a):v(t)?s(t):n(t)}function a(t){return 43===t||45===t||46===t||f(t)?function t(n){return 58===n?(e.consume(n),o):(43===n||45===n||46===n||f(n))&&r++<32?(e.consume(n),t):s(n)}(t):s(t)}function o(t){return 62===t?(e.exit("autolinkProtocol"),u(t)):null===t||32===t||60===t||y(t)?n(t):(e.consume(t),o)}function s(t){return 64===t?(e.consume(t),r=0,l):v(t)?(e.consume(t),s):n(t)}function l(t){return f(t)?function t(i){return 46===i?(e.consume(i),r=0,l):62===i?(e.exit("autolinkProtocol").type="autolinkEmail",u(i)):function i(a){return(45===a||f(a))&&r++<63?(e.consume(a),45===a?i:t):n(a)}(i)}(t):n(t)}function u(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}},{name:"htmlText",tokenize:function(e,t,n){let r,i,a,o;let s=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l};function l(t){return 33===t?(e.consume(t),u):47===t?(e.consume(t),N):63===t?(e.consume(t),A):c(t)?(e.consume(t),I):n(t)}function u(t){return 45===t?(e.consume(t),h):91===t?(e.consume(t),i="CDATA[",a=0,E):c(t)?(e.consume(t),C):n(t)}function h(t){return 45===t?(e.consume(t),p):n(t)}function p(t){return null===t||62===t?n(t):45===t?(e.consume(t),g):v(t)}function g(e){return null===e||62===e?n(e):v(e)}function v(t){return null===t?n(t):45===t?(e.consume(t),y):x(t)?(o=v,z(t)):(e.consume(t),v)}function y(t){return 45===t?(e.consume(t),Y):v(t)}function E(t){return t===i.charCodeAt(a++)?(e.consume(t),a===i.length?T:E):n(t)}function T(t){return null===t?n(t):93===t?(e.consume(t),_):x(t)?(o=T,z(t)):(e.consume(t),T)}function _(t){return 93===t?(e.consume(t),D):T(t)}function D(t){return 62===t?Y(t):93===t?(e.consume(t),D):T(t)}function C(t){return null===t||62===t?Y(t):x(t)?(o=C,z(t)):(e.consume(t),C)}function A(t){return null===t?n(t):63===t?(e.consume(t),S):x(t)?(o=A,z(t)):(e.consume(t),A)}function S(e){return 62===e?Y(e):A(e)}function N(t){return c(t)?(e.consume(t),L):n(t)}function L(t){return 45===t||f(t)?(e.consume(t),L):function t(n){return x(n)?(o=t,z(n)):w(n)?(e.consume(n),t):Y(n)}(t)}function I(t){return 45===t||f(t)?(e.consume(t),I):47===t||62===t||b(t)?O(t):n(t)}function O(t){return 47===t?(e.consume(t),Y):58===t||95===t||c(t)?(e.consume(t),M):x(t)?(o=O,z(t)):w(t)?(e.consume(t),O):Y(t)}function M(t){return 45===t||46===t||58===t||95===t||f(t)?(e.consume(t),M):function t(n){return 61===n?(e.consume(n),P):x(n)?(o=t,z(n)):w(n)?(e.consume(n),t):O(n)}(t)}function P(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),r=t,R):x(t)?(o=P,z(t)):w(t)?(e.consume(t),P):(e.consume(t),r=void 0,B)}function R(t){return t===r?(e.consume(t),F):null===t?n(t):x(t)?(o=R,z(t)):(e.consume(t),R)}function F(e){return 62===e||47===e||b(e)?O(e):n(e)}function B(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||b(t)?O(t):(e.consume(t),B)}function z(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),k(e,G,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function G(t){return e.enter("htmlTextData"),o(t)}function Y(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}}}],91:ea,92:[{name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return x(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}},P],93:ee,95:L,96:{name:"codeText",tokenize:function(e,t,n){let r=0,i,a;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),function t(n){return 96===n?(e.consume(n),r++,t):(e.exit("codeTextSequence"),o(n))}(t)};function o(l){return null===l?n(l):96===l?(a=e.enter("codeTextSequence"),i=0,function n(o){return 96===o?(e.consume(o),i++,n):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(o)):(a.type="codeTextData",s(o))}(l)):32===l?(e.enter("space"),e.consume(l),e.exit("space"),o):x(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):(e.enter("codeTextData"),s(l))}function s(t){return null===t||32===t||96===t||x(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),s)}},resolve:function(e){let t=e.length-4,n=3,r,i;if(("lineEnding"===e[3][1].type||"space"===e[n][1].type)&&("lineEnding"===e[t][1].type||"space"===e[t][1].type)){for(r=n;++r<t;)if("codeTextData"===e[r][1].type){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)void 0===i?r!==t&&"lineEnding"!==e[r][1].type&&(i=r):(r===t||"lineEnding"===e[r][1].type)&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}}}},Symbol.toStringTag,{value:"Module"})),ex=/[\0\t\n\r]/g;function ew(e,t){let n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(65535&n)==65535||(65535&n)==65534||n>1114111?"�":String.fromCharCode(n)}let eE=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function eT(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){let e=n.charCodeAt(1),t=120===e||88===e;return ew(n.slice(t?2:1),t?16:10)}return F(n)||e}function e_(e){return e&&"object"==typeof e?"position"in e||"type"in e?eD(e.position):"start"in e||"end"in e?eD(e):"line"in e||"column"in e?ek(e):"":""}function ek(e){return eC(e&&e.line)+":"+eC(e&&e.column)}function eD(e){return ek(e&&e.start)+"-"+ek(e&&e.end)}function eC(e){return e&&"number"==typeof e?e:1}let eA={}.hasOwnProperty,eS=function(e,t,n){let r,i,o,c;return"string"!=typeof t&&(n=t,t=void 0),(function(e){let t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(E),autolinkProtocol:p,autolinkEmail:p,atxHeading:o(b),blockQuote:o(function(){return{type:"blockquote",children:[]}}),characterEscape:p,characterReference:p,codeFenced:o(y),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(y,s),codeText:o(function(){return{type:"inlineCode",value:""}},s),codeTextData:p,data:p,codeFlowValue:p,definition:o(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:o(x),hardBreakTrailing:o(x),htmlFlow:o(w,s),htmlFlowData:p,htmlText:o(w,s),htmlTextData:p,image:o(function(){return{type:"image",title:null,url:"",alt:null}}),label:s,link:o(E),listItem:o(function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}),listItemValue:function(e){if(n.expectingFirstListItemValue){let t=this.stack[this.stack.length-2];t.start=Number.parseInt(this.sliceSerialize(e),10),n.expectingFirstListItemValue=void 0}},listOrdered:o(T,function(){n.expectingFirstListItemValue=!0}),listUnordered:o(T),paragraph:o(function(){return{type:"paragraph",children:[]}}),reference:function(){n.referenceType="collapsed"},referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(b),strong:o(function(){return{type:"strong",children:[]}}),thematicBreak:o(function(){return{type:"thematicBreak"}})},exit:{atxHeading:u(),atxHeadingSequence:function(e){let t=this.stack[this.stack.length-1];if(!t.depth){let n=this.sliceSerialize(e).length;t.depth=n}},autolink:u(),autolinkEmail:function(e){f.call(this,e);let t=this.stack[this.stack.length-1];t.url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){f.call(this,e);let t=this.stack[this.stack.length-1];t.url=this.sliceSerialize(e)},blockQuote:u(),characterEscapeValue:f,characterReferenceMarkerHexadecimal:v,characterReferenceMarkerNumeric:v,characterReferenceValue:function(e){let t;let r=this.sliceSerialize(e),i=n.characterReferenceType;i?(t=ew(r,"characterReferenceMarkerNumeric"===i?10:16),n.characterReferenceType=void 0):t=F(r);let a=this.stack.pop();a.value+=t,a.position.end=eN(e.end)},codeFenced:u(function(){let e=this.resume(),t=this.stack[this.stack.length-1];t.value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),n.flowCodeInside=void 0}),codeFencedFence:function(){n.flowCodeInside||(this.buffer(),n.flowCodeInside=!0)},codeFencedFenceInfo:function(){let e=this.resume(),t=this.stack[this.stack.length-1];t.lang=e},codeFencedFenceMeta:function(){let e=this.resume(),t=this.stack[this.stack.length-1];t.meta=e},codeFlowValue:f,codeIndented:u(function(){let e=this.resume(),t=this.stack[this.stack.length-1];t.value=e.replace(/(\r?\n|\r)$/g,"")}),codeText:u(function(){let e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}),codeTextData:f,data:f,definition:u(),definitionDestinationString:function(){let e=this.resume(),t=this.stack[this.stack.length-1];t.url=e},definitionLabelString:function(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=$(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){let e=this.resume(),t=this.stack[this.stack.length-1];t.title=e},emphasis:u(),hardBreakEscape:u(g),hardBreakTrailing:u(g),htmlFlow:u(function(){let e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}),htmlFlowData:f,htmlText:u(function(){let e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}),htmlTextData:f,image:u(function(){let e=this.stack[this.stack.length-1];if(n.inReference){let t=n.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;n.referenceType=void 0}),label:function(){let e=this.stack[this.stack.length-1],t=this.resume(),r=this.stack[this.stack.length-1];if(n.inReference=!0,"link"===r.type){let t=e.children;r.children=t}else r.alt=t},labelText:function(e){let t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=t.replace(eE,eT),n.identifier=$(t).toLowerCase()},lineEnding:function(e){let r=this.stack[this.stack.length-1];if(n.atHardBreak){let t=r.children[r.children.length-1];t.position.end=eN(e.end),n.atHardBreak=void 0;return}!n.setextHeadingSlurpLineEnding&&t.canContainEols.includes(r.type)&&(p.call(this,e),f.call(this,e))},link:u(function(){let e=this.stack[this.stack.length-1];if(n.inReference){let t=n.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;n.referenceType=void 0}),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:function(e){let t=this.resume(),r=this.stack[this.stack.length-1];r.label=t,r.identifier=$(this.sliceSerialize(e)).toLowerCase(),n.referenceType="full"},resourceDestinationString:function(){let e=this.resume(),t=this.stack[this.stack.length-1];t.url=e},resourceTitleString:function(){let e=this.resume(),t=this.stack[this.stack.length-1];t.title=e},resource:function(){n.inReference=void 0},setextHeading:u(function(){n.setextHeadingSlurpLineEnding=void 0}),setextHeadingLineSequence:function(e){let t=this.stack[this.stack.length-1];t.depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2},setextHeadingText:function(){n.setextHeadingSlurpLineEnding=!0},strong:u(),thematicBreak:u()}};(function e(t,n){let r=-1;for(;++r<n.length;){let i=n[r];Array.isArray(i)?e(t,i):function(e,t){let n;for(n in t)if(eA.call(t,n)){if("canContainEols"===n){let r=t[n];r&&e[n].push(...r)}else if("transforms"===n){let r=t[n];r&&e[n].push(...r)}else if("enter"===n||"exit"===n){let r=t[n];r&&Object.assign(e[n],r)}}}(t,i)}})(t,(e||{}).mdastExtensions||[]);let n={};return function(e){let n={type:"root",children:[]},a={stack:[n],tokenStack:[],config:t,enter:l,exit:c,buffer:s,resume:h,setData:r,getData:i},o=[],u=-1;for(;++u<e.length;)if("listOrdered"===e[u][1].type||"listUnordered"===e[u][1].type){if("enter"===e[u][0])o.push(u);else{let t=o.pop();u=function(e,t,n){let r=t-1,i=-1,a=!1,o,s,l,u;for(;++r<=n;){let t=e[r];if("listUnordered"===t[1].type||"listOrdered"===t[1].type||"blockQuote"===t[1].type?("enter"===t[0]?i++:i--,u=void 0):"lineEndingBlank"===t[1].type?"enter"===t[0]&&(!o||u||i||l||(l=r),u=void 0):"linePrefix"===t[1].type||"listItemValue"===t[1].type||"listItemMarker"===t[1].type||"listItemPrefix"===t[1].type||"listItemPrefixWhitespace"===t[1].type||(u=void 0),!i&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===i&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(o){let i=r;for(s=void 0;i--;){let t=e[i];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;s&&(e[s][1].type="lineEndingBlank",a=!0),t[1].type="lineEnding",s=i}else if(!("linePrefix"===t[1].type||"blockQuotePrefix"===t[1].type||"blockQuotePrefixWhitespace"===t[1].type||"blockQuoteMarker"===t[1].type||"listItemIndent"===t[1].type))break}l&&(!s||l<s)&&(o._spread=!0),o.end=Object.assign({},s?e[s][1].start:t[1].end),e.splice(s||r,0,["exit",o,t[2]]),r++,n++}"listItemPrefix"===t[1].type&&(o={type:"listItem",_spread:!1,start:Object.assign({},t[1].start)},e.splice(r,0,["enter",o,t[2]]),r++,n++,l=void 0,u=!0)}}return e[t][1]._spread=a,n}(e,t,u)}}for(u=-1;++u<e.length;){let n=t[e[u][0]];eA.call(n,e[u][1].type)&&n[e[u][1].type].call(Object.assign({sliceSerialize:e[u][2].sliceSerialize},a),e[u][1])}if(a.tokenStack.length>0){let e=a.tokenStack[a.tokenStack.length-1];(e[1]||eL).call(a,void 0,e[0])}for(n.position={start:eN(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:eN(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},u=-1;++u<t.transforms.length;)n=t.transforms[u](n)||n;return n};function r(e,t){n[e]=t}function i(e){return n[e]}function o(e,t){return function(n){l.call(this,e(n),n),t&&t.call(this,n)}}function s(){this.stack.push({type:"fragment",children:[]})}function l(e,t,n){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:eN(t.start)},e}function u(e){return function(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){let n=this.stack.pop(),r=this.tokenStack.pop();if(r)r[0].type!==e.type&&(t?t.call(this,e,r[0]):(r[1]||eL).call(this,e,r[0]));else throw Error("Cannot close `"+e.type+"` ("+e_({start:e.start,end:e.end})+"): it’s not open");return n.position.end=eN(e.end),n}function h(){return function(e,t){var{includeImageAlt:n=!0}={};return a(e,n)}(this.stack.pop())}function p(e){let t=this.stack[this.stack.length-1],n=t.children[t.children.length-1];n&&"text"===n.type||((n={type:"text",value:""}).position={start:eN(e.start)},t.children.push(n)),this.stack.push(n)}function f(e){let t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=eN(e.end)}function g(){n.atHardBreak=!0}function v(e){var t;t=e.type,n.characterReferenceType=t}function y(){return{type:"code",lang:null,meta:null,value:""}}function b(){return{type:"heading",depth:void 0,children:[]}}function x(){return{type:"break"}}function w(){return{type:"html",value:""}}function E(){return{type:"link",title:null,url:"",children:[]}}function T(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}})(n)(function(e){for(;!V(e););return e}((function(e={}){let t=function(e){let t={},n=-1;for(;++n<e.length;)(function(e,t){let n;for(n in t){let r;let i=(u.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];for(r in a){u.call(i,r)||(i[r]=[]);let e=a[r];(function(e,t){let n=-1,r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);s(e,0,0,r)})(i[r],Array.isArray(e)?e:e?[e]:[])}}})(t,e[n]);return t}([eb].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(D),document:r(C),flow:r(ed),string:r(ef),text:r(eg)};return n;function r(e){return function(t){return function(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),i={},a=[],o=[],u=[],c={consume:function(e){x(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,w()):-1!==e&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=e},enter:function(e,t){let n=t||{};return n.type=e,n.start=g(),h.events.push(["enter",n,h]),u.push(n),n},exit:function(e){let t=u.pop();return t.end=g(),h.events.push(["exit",t,h]),t},attempt:y(function(e,t){b(e,t.from)}),check:y(v),interrupt:y(v,{interrupt:!0})},h={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:f,sliceSerialize:function(e,t){return function(e,t){let n,r=-1,i=[];for(;++r<e.length;){let a;let o=e[r];if("string"==typeof o)a=o;else switch(o){case -5:a="\r";break;case -4:a=`
`;break;case -3:a=`\r
`;break;case -2:a=t?" ":"	";break;case -1:if(!t&&n)continue;a=" ";break;default:a=String.fromCharCode(o)}n=-2===o,i.push(a)}return i.join("")}(f(e),t)},now:g,defineSkip:function(e){i[e.line]=e.column,w()},write:function(e){return o=l(o,e),function(){let e;for(;r._index<o.length;){var t;let n=o[r._index];if("string"==typeof n)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<n.length;)t=n.charCodeAt(r._bufferIndex),p=p(t);else p=p(n)}}(),null!==o[o.length-1]?[]:(b(t,0),h.events=N(a,h.events,h),h.events)}},p=t.tokenize.call(h,c);return t.resolveAll&&a.push(t),h;function f(e){return function(e,t){let n;let r=t.start._index,i=t.start._bufferIndex,a=t.end._index,o=t.end._bufferIndex;return r===a?n=[e[r].slice(i,o)]:(n=e.slice(r,a),i>-1&&(n[0]=n[0].slice(i)),o>0&&n.push(e[a].slice(0,o))),n}(o,e)}function g(){return Object.assign({},r)}function v(e,t){t.restore()}function y(e,t){return function(n,i,a){let o,s,l,p;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){let t=null!==e&&n[e],r=null!==e&&n.null,i=[...Array.isArray(t)?t:t?[t]:[],...Array.isArray(r)?r:r?[r]:[]];return f(i)(e)};function f(e){return o=e,s=0,0===e.length?a:v(e[s])}function v(e){return function(n){return p=function(){let e=g(),t=h.previous,n=h.currentConstruct,i=h.events.length,a=Array.from(u);return{restore:function(){r=e,h.previous=t,h.currentConstruct=n,h.events.length=i,u=a,w()},from:i}}(),l=e,e.partial||(h.currentConstruct=e),e.name&&h.parser.constructs.disable.null.includes(e.name)?b():e.tokenize.call(t?Object.assign(Object.create(h),t):h,c,y,b)(n)}}function y(t){return e(l,p),i}function b(e){return p.restore(),++s<o.length?v(o[s]):a}}}function b(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&s(h.events,t,h.events.length-t,e.resolve(h.events.slice(t),h)),e.resolveTo&&(h.events=e.resolveTo(h.events,h))}function w(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}(n,e,t)}}})(n).document().write((r=1,i="",o=!0,function(e,t,n){let a,s,l,u,h;let p=[];for(e=i+e.toString(t),l=0,i="",o&&(65279===e.charCodeAt(0)&&l++,o=void 0);l<e.length;){if(ex.lastIndex=l,u=(a=ex.exec(e))&&void 0!==a.index?a.index:e.length,h=e.charCodeAt(u),!a){i=e.slice(l);break}if(10===h&&l===u&&c)p.push(-3),c=void 0;else switch(c&&(p.push(-5),c=void 0),l<u&&(p.push(e.slice(l,u)),r+=u-l),h){case 0:p.push(65533),r++;break;case 9:for(s=4*Math.ceil(r/4),p.push(-2);r++<s;)p.push(-1);break;case 10:p.push(-4),r=1;break;default:c=!0,r=1}l=u+1}return n&&(c&&p.push(-5),i&&p.push(i),p.push(null)),p})(e,t,!0))))};function eN(e){return{line:e.line,column:e.column,offset:e.offset}}function eL(e,t){throw e?Error("Cannot close `"+e.type+"` ("+e_({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+e_({start:t.start,end:t.end})+") is open"):Error("Cannot close document, a token (`"+t.type+"`, "+e_({start:t.start,end:t.end})+") is still open")}function eI(e,t,n){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*n-.1+"em").attr("dy",n+"em")}function eO(e,t){e.text(""),t.forEach((t,n)=>{let r=e.append("tspan").attr("font-style","emphasis"===t.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===t.type?"bold":"normal");0===n?r.text(t.content):r.text(" "+t.content)})}let eM=(e,t="",{style:n="",isTitle:r=!1,classes:a="",useHtmlLabels:o=!0,isNode:s=!0,width:l=200,addSvgBackground:u=!1}={})=>{if((0,i.l).info("createText",t,n,r,a,o,s,u),o){let r=function(e){let{children:t}=eS(e);return t.map(function e(t){return"text"===t.type?t.value.replace(/\n/g,"<br/>"):"strong"===t.type?`<strong>${t.children.map(e).join("")}</strong>`:"emphasis"===t.type?`<em>${t.children.map(e).join("")}</em>`:"paragraph"===t.type?`<p>${t.children.map(e).join("")}</p>`:`Unsupported markdown: ${t.type}`}).join("")}(t),o={isNode:s,label:(0,i.aT)(r).replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`),labelStyle:n.replace("fill:","color:")};return function(e,t,n,r,i=!1){var a;let o=e.append("foreignObject"),s=o.append("xhtml:div"),l=t.label,u=t.isNode?"nodeLabel":"edgeLabel";s.html(`
    <span class="${u} ${r}" `+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+l+"</span>"),(a=t.labelStyle)&&s.attr("style",a),s.style("display","table-cell"),s.style("white-space","nowrap"),s.style("max-width",n+"px"),s.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&s.attr("class","labelBkg");let c=s.node().getBoundingClientRect();return c.width===n&&(s.style("display","table"),s.style("white-space","break-spaces"),s.style("width",n+"px"),c=s.node().getBoundingClientRect()),o.style("width",c.width),o.style("height",c.height),o.node()}(e,o,l,a,u)}{let n=function(e){let t=function(e){let t=e.replace(/\n{2,}/g,`
`);return(0,i.b8)(t)}(e),{children:n}=eS(t),r=[[]],a=0;return n.forEach(e=>{"paragraph"===e.type&&e.children.forEach(e=>{(function e(t,n="normal"){"text"===t.type?t.value.split(`
`).forEach((e,t)=>{0!==t&&(a++,r.push([])),e.split(" ").forEach(e=>{e&&r[a].push({content:e,type:n})})}):("strong"===t.type||"emphasis"===t.type)&&t.children.forEach(n=>{e(n,t.type)})})(e)})}),r}(t);return function(e,t,n,r=!1){let i=t.append("g"),a=i.insert("rect").attr("class","background"),o=i.append("text").attr("y","-10.1"),s=0;for(let t of n){let n=t=>(function(e,t,n){let r=e.append("text"),i=eI(r,1,1.1);eO(i,n);let a=i.node().getComputedTextLength();return r.remove(),a})(i,0,t)<=e,r=n(t)?[t]:function(e,t){if(e.some(({content:e})=>e.includes(`
`)))throw Error("splitLineToFitWidth does not support newlines in the line");return function e(t,n,r=[],i=[]){var a;if(0===t.length)return i.length>0&&r.push(i),r.length>0?r:[];let o="";" "===t[0].content&&(o=" ",t.shift());let s=null!==(a=t.shift())&&void 0!==a?a:{content:" ",type:"normal"},l=[...i];if(""!==o&&l.push({content:o,type:"normal"}),l.push(s),n(l))return e(t,n,r,l);if(i.length>0)r.push(i),t.unshift(s);else if(s.content){let[e,i]=function(e,t){var n;let r=(n=t.content,Intl.Segmenter?[...new Intl.Segmenter().segment(n)].map(e=>e.segment):[...n]);return function e(t,n,r,i){if(0===r.length)return[{content:n.join(""),type:i},{content:"",type:i}];let[a,...o]=r,s=[...n,a];return t([{content:s.join(""),type:i}])?e(t,s,o,i):(0===n.length&&a&&(n.push(a),r.shift()),[{content:n.join(""),type:i},{content:r.join(""),type:i}])}(e,[],r,t.type)}(n,s);r.push([e]),i.content&&t.unshift(i)}return e(t,n,r)}(e,t)}(t,n);for(let e of r){let t=eI(o,s,1.1);eO(t,e),s++}}if(!r)return o.node();{let e=o.node().getBBox();return a.attr("x",-2).attr("y",-2).attr("width",e.width+4).attr("height",e.height+4),i.node()}}(l,e,n,u)}}})}();